"use strict";(self.webpackChunkvet=self.webpackChunkvet||[]).push([[179],{2011:(st,Te,O)=>{O.d(Te,{Dh:()=>he,GT:()=>de,cc:()=>Ae,hO:()=>Fe,on:()=>B,pX:()=>ie,xv:()=>pe});var g=O(4650),X=O(127),k=O(5813);st=O.hmd(st);const ae=["ngOnDestroy"],ie=(fe,Ye,rt,Ce={})=>new Proxy(fe,{get:(_e,Ie)=>rt.runOutsideAngular(()=>{var Ve;if(fe[Ie])return!(null===(Ve=Ce?.spy)||void 0===Ve)&&Ve.get&&Ce.spy.get(Ie,fe[Ie]),fe[Ie];if(ae.indexOf(Ie)>-1)return()=>{};const je=Ye.toPromise().then(V=>{const ge=V&&V[Ie];return"function"==typeof ge?ge.bind(V):ge&&ge.then?ge.then(W=>rt.run(()=>W)):rt.run(()=>ge)});return new Proxy(()=>{},{get:(V,ge)=>je[ge],apply:(V,ge,W)=>je.then(J=>{var se;const ne=J&&J(...W);return!(null===(se=Ce?.spy)||void 0===se)&&se.apply&&Ce.spy.apply(Ie,W,ne),ne})})})}),de=(fe,Ye)=>{Ye.forEach(rt=>{Object.getOwnPropertyNames(rt.prototype||rt).forEach(Ce=>{Object.defineProperty(fe.prototype,Ce,Object.getOwnPropertyDescriptor(rt.prototype||rt,Ce))})})};class ce{constructor(Ye){return Ye}}const he=new g.OlP("angularfire2.app.options"),pe=new g.OlP("angularfire2.app.name");function B(fe,Ye,rt){const _e="object"==typeof rt&&rt||{};_e.name=_e.name||"string"==typeof rt&&rt||"[DEFAULT]";const Ve=X.Z.apps.filter(je=>je&&je.name===_e.name)[0]||Ye.runOutsideAngular(()=>X.Z.initializeApp(fe,_e));try{JSON.stringify(fe)!==JSON.stringify(Ve.options)&&j("error",`${Ve.name} Firebase App already initialized with different options${st.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ce(Ve)}const j=(fe,...Ye)=>{(0,g.X6Q)()&&typeof console<"u"&&console[fe](...Ye)},K={provide:ce,useFactory:B,deps:[he,g.R0b,[new g.FiY,pe]]};let Fe=(()=>{class fe{constructor(rt){X.Z.registerVersion("angularfire",k.q4.full,"core"),X.Z.registerVersion("angularfire",k.q4.full,"app-compat"),X.Z.registerVersion("angular",g.q4F.full,rt.toString())}static initializeApp(rt,Ce){return{ngModule:fe,providers:[{provide:he,useValue:rt},{provide:pe,useValue:Ce}]}}}return fe.\u0275fac=function(rt){return new(rt||fe)(g.LFG(g.Lbi))},fe.\u0275mod=g.oAB({type:fe}),fe.\u0275inj=g.cJS({providers:[K]}),fe})();function Ae(fe,Ye,rt,Ce,_e){const[,Ie,Ve]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===fe)||[];if(Ie)return function ve(fe,Ye){try{return fe.toString()===Ye.toString()}catch{return fe===Ye}}(_e,Ve)||(me("error",`${Ye} was already initialized on the ${rt} Firebase App with different settings.${Je?" You may need to reload as Firebase is not HMR aware.":""}`),me("warn",{is:_e,was:Ve})),Ie;{const je=Ce();return globalThis.\u0275AngularfireInstanceCache.push([fe,je,_e]),je}}const Je=!!st.hot,me=(fe,...Ye)=>{(0,g.X6Q)()&&typeof console<"u"&&console[fe](...Ye)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(st,Te,O)=>{O.d(Te,{q4:()=>ao,iC:()=>mn,fc:()=>Zo,HU:()=>Pu,vb:()=>Us,JM:()=>Xl});var g=O(4650),X=O(5867),k=O(5861),ae=O(9681),ie=O(2090),de=O(4859),ce=O(1877),he=O(8766);const pe="@firebase/installations",B="0.5.12",K=`w:${B}`,Fe="FIS_v2",Ye=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function rt(D){return D instanceof ie.ZR&&D.code.includes("request-failed")}function Ce({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function _e(D){return{token:D.token,requestStatus:2,expiresIn:J(D.expiresIn),creationTime:Date.now()}}function Ie(D,T){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,k.Z)(function*(D,T){const L=(yield T.json()).error;return Ye.create("request-failed",{requestName:D,serverCode:L.code,serverMessage:L.message,serverStatus:L.status})})).apply(this,arguments)}function je({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function V(D,{refreshToken:T}){const x=je(D);return x.append("Authorization",function se(D){return`${Fe} ${D}`}(T)),x}function ge(D){return W.apply(this,arguments)}function W(){return(W=(0,k.Z)(function*(D){const T=yield D();return T.status>=500&&T.status<600?D():T})).apply(this,arguments)}function J(D){return Number(D.replace("s","000"))}function ne(D,T){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,k.Z)(function*({appConfig:D,heartbeatServiceProvider:T},{fid:x}){const L=Ce(D),Q=je(D),re=T.getImmediate({optional:!0});if(re){const Dt=yield re.getHeartbeatsHeader();Dt&&Q.append("x-firebase-client",Dt)}const Be={method:"POST",headers:Q,body:JSON.stringify({fid:x,authVersion:Fe,appId:D.appId,sdkVersion:K})},ct=yield ge(()=>fetch(L,Be));if(ct.ok){const Dt=yield ct.json();return{fid:Dt.fid||x,registrationStatus:2,refreshToken:Dt.refreshToken,authToken:_e(Dt.authToken)}}throw yield Ie("Create Installation",ct)})).apply(this,arguments)}function ke(D){return new Promise(T=>{setTimeout(T,D)})}const zt=/^[cdef][\w-]{21}$/;function ze(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const x=function tn(D){return function ut(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return zt.test(x)?x:""}catch{return""}}function Cn(D){return`${D.appName}!${D.appId}`}const Wt=new Map;function Kt(D,T){const x=Cn(D);nn(x,T),function Eo(D,T){const x=function vr(){return!Yr&&"BroadcastChannel"in self&&(Yr=new BroadcastChannel("[Firebase] FID Change"),Yr.onmessage=D=>{nn(D.data.key,D.data.fid)}),Yr}();x&&x.postMessage({key:D,fid:T}),function Tr(){0===Wt.size&&Yr&&(Yr.close(),Yr=null)}()}(x,T)}function nn(D,T){const x=Wt.get(D);if(x)for(const L of x)L(T)}let Yr=null;const Qr="firebase-installations-store";let Ni=null;function ht(){return Ni||(Ni=(0,he.X3)("firebase-installations-database",1,{upgrade:(D,T)=>{0===T&&D.createObjectStore(Qr)}})),Ni}function on(D,T){return mi.apply(this,arguments)}function mi(){return(mi=(0,k.Z)(function*(D,T){const x=Cn(D),Q=(yield ht()).transaction(Qr,"readwrite"),re=Q.objectStore(Qr),De=yield re.get(x);return yield re.put(T,x),yield Q.done,(!De||De.fid!==T.fid)&&Kt(D,T.fid),T})).apply(this,arguments)}function Sn(D){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,k.Z)(function*(D){const T=Cn(D),L=(yield ht()).transaction(Qr,"readwrite");yield L.objectStore(Qr).delete(T),yield L.done})).apply(this,arguments)}function ts(D,T){return An.apply(this,arguments)}function An(){return(An=(0,k.Z)(function*(D,T){const x=Cn(D),Q=(yield ht()).transaction(Qr,"readwrite"),re=Q.objectStore(Qr),De=yield re.get(x),Be=T(De);return void 0===Be?yield re.delete(x):yield re.put(Be,x),yield Q.done,Be&&(!De||De.fid!==Be.fid)&&Kt(D,Be.fid),Be})).apply(this,arguments)}function un(D){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,k.Z)(function*(D){let T;const x=yield ts(D.appConfig,L=>{const Q=an(L),re=tt(D,Q);return T=re.registrationPromise,re.installationEntry});return""===x.fid?{installationEntry:yield T}:{installationEntry:x,registrationPromise:T}})).apply(this,arguments)}function an(D){return Bn(D||{fid:ze(),registrationStatus:0})}function tt(D,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(Ye.create("app-offline"))};const x={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},L=function Ke(D,T){return Do.apply(this,arguments)}(D,x);return{installationEntry:x,registrationPromise:L}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:er(D)}:{installationEntry:T}}function Do(){return(Do=(0,k.Z)(function*(D,T){try{const x=yield ne(D,T);return on(D.appConfig,x)}catch(x){throw rt(x)&&409===x.customData.serverCode?yield Sn(D.appConfig):yield on(D.appConfig,{fid:T.fid,registrationStatus:0}),x}})).apply(this,arguments)}function er(D){return cn.apply(this,arguments)}function cn(){return(cn=(0,k.Z)(function*(D){let T=yield Ot(D.appConfig);for(;1===T.registrationStatus;)yield ke(100),T=yield Ot(D.appConfig);if(0===T.registrationStatus){const{installationEntry:x,registrationPromise:L}=yield un(D);return L||x}return T})).apply(this,arguments)}function Ot(D){return ts(D,T=>{if(!T)throw Ye.create("installation-not-found");return Bn(T)})}function Bn(D){return function Is(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Yt(D,T){return Li.apply(this,arguments)}function Li(){return(Li=(0,k.Z)(function*({appConfig:D,heartbeatServiceProvider:T},x){const L=Vt(D,x),Q=V(D,x),re=T.getImmediate({optional:!0});if(re){const Dt=yield re.getHeartbeatsHeader();Dt&&Q.append("x-firebase-client",Dt)}const Be={method:"POST",headers:Q,body:JSON.stringify({installation:{sdkVersion:K,appId:D.appId}})},ct=yield ge(()=>fetch(L,Be));if(ct.ok)return _e(yield ct.json());throw yield Ie("Generate Auth Token",ct)})).apply(this,arguments)}function Vt(D,{fid:T}){return`${Ce(D)}/${T}/authTokens:generate`}function Z(D){return $.apply(this,arguments)}function $(){return($=(0,k.Z)(function*(D,T=!1){let x;const L=yield ts(D.appConfig,re=>{if(!ot(re))throw Ye.create("not-registered");const De=re.authToken;if(!T&&rn(De))return re;if(1===De.requestStatus)return x=F(D,T),re;{if(!navigator.onLine)throw Ye.create("app-offline");const Be=zn(re);return x=be(D,Be),Be}});return x?yield x:L.authToken})).apply(this,arguments)}function F(D,T){return H.apply(this,arguments)}function H(){return(H=(0,k.Z)(function*(D,T){let x=yield z(D.appConfig);for(;1===x.authToken.requestStatus;)yield ke(100),x=yield z(D.appConfig);const L=x.authToken;return 0===L.requestStatus?Z(D,T):L})).apply(this,arguments)}function z(D){return ts(D,T=>{if(!ot(T))throw Ye.create("not-registered");return function Xe(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function be(D,T){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,k.Z)(function*(D,T){try{const x=yield Yt(D,T),L=Object.assign(Object.assign({},T),{authToken:x});return yield on(D.appConfig,L),x}catch(x){if(!rt(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const L=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield on(D.appConfig,L)}else yield Sn(D.appConfig);throw x}})).apply(this,arguments)}function ot(D){return void 0!==D&&2===D.registrationStatus}function rn(D){return 2===D.requestStatus&&!function Qt(D){const T=Date.now();return T<D.creationTime||D.creationTime+D.expiresIn<T+36e5}(D)}function zn(D){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:T})}function ln(){return(ln=(0,k.Z)(function*(D){const T=D,{installationEntry:x,registrationPromise:L}=yield un(T);return L?L.catch(console.error):Z(T).catch(console.error),x.fid})).apply(this,arguments)}function ar(){return(ar=(0,k.Z)(function*(D,T=!1){const x=D;return yield qe(x),(yield Z(x,T)).token})).apply(this,arguments)}function qe(D){return _t.apply(this,arguments)}function _t(){return(_t=(0,k.Z)(function*(D){const{registrationPromise:T}=yield un(D);T&&(yield T)})).apply(this,arguments)}function At(D){return Ye.create("missing-app-config-values",{valueName:D})}const aa="installations",pn=D=>{const T=D.getProvider("app").getImmediate(),x=function Es(D){if(!D||!D.options)throw At("App Configuration");if(!D.name)throw At("App Name");const T=["projectId","apiKey","appId"];for(const x of T)if(!D.options[x])throw At(x);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(T);return{app:T,appConfig:x,heartbeatServiceProvider:(0,ae._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},Ds=D=>{const T=D.getProvider("app").getImmediate(),x=(0,ae._getProvider)(T,aa).getImmediate();return{getId:()=>function sn(D){return ln.apply(this,arguments)}(x),getToken:Q=>function tr(D){return ar.apply(this,arguments)}(x,Q)}};(function ur(){(0,ae._registerComponent)(new de.wA(aa,pn,"PUBLIC")),(0,ae._registerComponent)(new de.wA("installations-internal",Ds,"PRIVATE"))})(),(0,ae.registerVersion)(pe,B),(0,ae.registerVersion)(pe,B,"esm2017");const bs="@firebase/remote-config",Lt=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class yp{constructor(T,x,L,Q){this.client=T,this.storage=x,this.storageCache=L,this.logger=Q}isCachedDataFresh(T,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const L=Date.now()-x,Q=L<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${L}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${Q}.`),Q}fetch(T){var x=this;return(0,k.Z)(function*(){const[L,Q]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(Q&&x.isCachedDataFresh(T.cacheMaxAgeMillis,L))return Q;T.eTag=Q&&Q.eTag;const re=yield x.client.fetch(T),De=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===re.status&&De.push(x.storage.setLastSuccessfulFetchResponse(re)),yield Promise.all(De),re})()}}function xl(D=navigator){return D.languages&&D.languages[0]||D.language}class wc{constructor(T,x,L,Q,re,De){this.firebaseInstallations=T,this.sdkVersion=x,this.namespace=L,this.projectId=Q,this.apiKey=re,this.appId=De}fetch(T){var x=this;return(0,k.Z)(function*(){var L,Q,re;const[De,Be]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Dt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Tt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},at={sdk_version:x.sdkVersion,app_instance_id:De,app_instance_id_token:Be,app_id:x.appId,language_code:xl()},yn={method:"POST",headers:Tt,body:JSON.stringify(at)},Gr=fetch(Dt,yn),Fa=new Promise((uo,Ti)=>{T.signal.addEventListener(()=>{const Ou=new Error("The operation was aborted.");Ou.name="AbortError",Ti(Ou)})});let Ei;try{yield Promise.race([Gr,Fa]),Ei=yield Gr}catch(uo){let Ti="fetch-client-network";throw"AbortError"===(null===(L=uo)||void 0===L?void 0:L.name)&&(Ti="fetch-timeout"),Lt.create(Ti,{originalErrorMessage:null===(Q=uo)||void 0===Q?void 0:Q.message})}let Di=Ei.status;const Lh=Ei.headers.get("ETag")||void 0;let Ua,bi;if(200===Ei.status){let uo;try{uo=yield Ei.json()}catch(Ti){throw Lt.create("fetch-client-parse",{originalErrorMessage:null===(re=Ti)||void 0===re?void 0:re.message})}Ua=uo.entries,bi=uo.state}if("INSTANCE_STATE_UNSPECIFIED"===bi?Di=500:"NO_CHANGE"===bi?Di=304:("NO_TEMPLATE"===bi||"EMPTY_CONFIG"===bi)&&(Ua={}),304!==Di&&200!==Di)throw Lt.create("fetch-status",{httpStatus:Di});return{status:Di,eTag:Lh,config:Ua}})()}}class _p{constructor(T,x){this.client=T,this.storage=x}fetch(T){var x=this;return(0,k.Z)(function*(){const L=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(T,L)})()}attemptFetch(T,{throttleEndTimeMillis:x,backoffCount:L}){var Q=this;return(0,k.Z)(function*(){yield function qn(D,T){return new Promise((x,L)=>{const Q=Math.max(T-Date.now(),0),re=setTimeout(x,Q);D.addEventListener(()=>{clearTimeout(re),L(Lt.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,x);try{const re=yield Q.client.fetch(T);return yield Q.storage.deleteThrottleMetadata(),re}catch(re){if(!function Ml(D){if(!(D instanceof ie.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}(re))throw re;const De={throttleEndTimeMillis:Date.now()+(0,ie.$s)(L),backoffCount:L+1};return yield Q.storage.setThrottleMetadata(De),Q.attemptFetch(T,De)}})()}}class Rl{constructor(T,x,L,Q,re){this.app=T,this._client=x,this._storageCache=L,this._storage=Q,this._logger=re,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ic(D,T){var x;const L=D.target.error||void 0;return Lt.create(T,{originalErrorMessage:L&&(null===(x=L)||void 0===x?void 0:x.message)})}const As="app_namespace_store";class kl{constructor(T,x,L,Q=function Ip(){return new Promise((D,T)=>{var x;try{const L=indexedDB.open("firebase_remote_config",1);L.onerror=Q=>{T(Ic(Q,"storage-open"))},L.onsuccess=Q=>{D(Q.target.result)},L.onupgradeneeded=Q=>{0===Q.oldVersion&&Q.target.result.createObjectStore(As,{keyPath:"compositeKey"})}}catch(L){T(Lt.create("storage-open",{originalErrorMessage:null===(x=L)||void 0===x?void 0:x.message}))}})}()){this.appId=T,this.appName=x,this.namespace=L,this.openDbPromise=Q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var x=this;return(0,k.Z)(function*(){const L=yield x.openDbPromise;return new Promise((Q,re)=>{var De;const ct=L.transaction([As],"readonly").objectStore(As),Dt=x.createCompositeKey(T);try{const Tt=ct.get(Dt);Tt.onerror=at=>{re(Ic(at,"storage-get"))},Tt.onsuccess=at=>{const yn=at.target.result;Q(yn?yn.value:void 0)}}catch(Tt){re(Lt.create("storage-get",{originalErrorMessage:null===(De=Tt)||void 0===De?void 0:De.message}))}})})()}set(T,x){var L=this;return(0,k.Z)(function*(){const Q=yield L.openDbPromise;return new Promise((re,De)=>{var Be;const Dt=Q.transaction([As],"readwrite").objectStore(As),Tt=L.createCompositeKey(T);try{const at=Dt.put({compositeKey:Tt,value:x});at.onerror=yn=>{De(Ic(yn,"storage-set"))},at.onsuccess=()=>{re()}}catch(at){De(Lt.create("storage-set",{originalErrorMessage:null===(Be=at)||void 0===Be?void 0:Be.message}))}})})()}delete(T){var x=this;return(0,k.Z)(function*(){const L=yield x.openDbPromise;return new Promise((Q,re)=>{var De;const ct=L.transaction([As],"readwrite").objectStore(As),Dt=x.createCompositeKey(T);try{const Tt=ct.delete(Dt);Tt.onerror=at=>{re(Ic(at,"storage-delete"))},Tt.onsuccess=()=>{Q()}}catch(Tt){re(Lt.create("storage-delete",{originalErrorMessage:null===(De=Tt)||void 0===De?void 0:De.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class la{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,k.Z)(function*(){const x=T.storage.getLastFetchStatus(),L=T.storage.getLastSuccessfulFetchTimestampMillis(),Q=T.storage.getActiveConfig(),re=yield x;re&&(T.lastFetchStatus=re);const De=yield L;De&&(T.lastSuccessfulFetchTimestampMillis=De);const Be=yield Q;Be&&(T.activeConfig=Be)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function _i(){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,k.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}!function xo(){(0,ae._registerComponent)(new de.wA("remote-config",function D(T,{instanceIdentifier:x}){const L=T.getProvider("app").getImmediate(),Q=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Lt.create("registration-window");if(!(0,ie.hl)())throw Lt.create("indexed-db-unavailable");const{projectId:re,apiKey:De,appId:Be}=L.options;if(!re)throw Lt.create("registration-project-id");if(!De)throw Lt.create("registration-api-key");if(!Be)throw Lt.create("registration-app-id");const ct=new kl(Be,L.name,x=x||"firebase"),Dt=new la(ct),Tt=new ce.Yd(bs);Tt.logLevel=ce.in.ERROR;const at=new wc(Q,ae.SDK_VERSION,x,re,De,Be),yn=new _p(at,ct),Gr=new yp(yn,ct,Dt,Tt),Fa=new Rl(L,Gr,Dt,ct,Tt);return function Sr(D){const T=(0,ie.m9)(D);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Fa),Fa},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(bs,"0.3.11"),(0,ae.registerVersion)(bs,"0.3.11","esm2017")}();const Mo="/firebase-messaging-sw.js",Fi="/firebase-cloud-messaging-push-scope",Ys="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Po="google.c.a.c_id",da="google.c.a.c_l",Ll="google.c.a.ts",Fl="google.c.a.e";var Zn=(()=>{return(D=Zn||(Zn={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Zn;var D})();function Ar(D){const T=new Uint8Array(D);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ul(D){const x=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),L=atob(x),Q=new Uint8Array(L.length);for(let re=0;re<L.length;++re)Q[re]=L.charCodeAt(re);return Q}const ko="fcm_token_details_db",$r="fcm_token_object_Store";function Rn(D){return Bl.apply(this,arguments)}function Bl(){return Bl=(0,k.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(re=>re.name).includes(ko))return null;let T=null;return(yield(0,he.X3)(ko,5,{upgrade:(L=(0,k.Z)(function*(Q,re,De,Be){var ct;if(re<2||!Q.objectStoreNames.contains($r))return;const Dt=Be.objectStore($r),Tt=yield Dt.index("fcmSenderId").get(D);if(yield Dt.clear(),Tt)if(2===re){const at=Tt;if(!at.auth||!at.p256dh||!at.endpoint)return;T={token:at.fcmToken,createTime:null!==(ct=at.createTime)&&void 0!==ct?ct:Date.now(),subscriptionOptions:{auth:at.auth,p256dh:at.p256dh,endpoint:at.endpoint,swScope:at.swScope,vapidKey:"string"==typeof at.vapidKey?at.vapidKey:Ar(at.vapidKey)}}}else if(3===re){const at=Tt;T={token:at.fcmToken,createTime:at.createTime,subscriptionOptions:{auth:Ar(at.auth),p256dh:Ar(at.p256dh),endpoint:at.endpoint,swScope:at.swScope,vapidKey:Ar(at.vapidKey)}}}else if(4===re){const at=Tt;T={token:at.fcmToken,createTime:at.createTime,subscriptionOptions:{auth:Ar(at.auth),p256dh:Ar(at.p256dh),endpoint:at.endpoint,swScope:at.swScope,vapidKey:Ar(at.vapidKey)}}}}),function(re,De,Be,ct){return L.apply(this,arguments)})})).close(),yield(0,he.Lj)(ko),yield(0,he.Lj)("fcm_vapid_details_db"),yield(0,he.Lj)("undefined"),bh(T)?T:null;var L}),Bl.apply(this,arguments)}function bh(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:T}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const is="firebase-messaging-store";let fa=null;function ss(){return fa||(fa=(0,he.X3)("firebase-messaging-database",1,{upgrade:(D,T)=>{0===T&&D.createObjectStore(is)}})),fa}function cr(D){return No.apply(this,arguments)}function No(){return(No=(0,k.Z)(function*(D){const T=Oo(D),L=yield(yield ss()).transaction(is).objectStore(is).get(T);if(L)return L;{const Q=yield Rn(D.appConfig.senderId);if(Q)return yield vi(D,Q),Q}})).apply(this,arguments)}function vi(D,T){return os.apply(this,arguments)}function os(){return(os=(0,k.Z)(function*(D,T){const x=Oo(D),Q=(yield ss()).transaction(is,"readwrite");return yield Q.objectStore(is).put(T,x),yield Q.done,T})).apply(this,arguments)}function as(D){return us.apply(this,arguments)}function us(){return(us=(0,k.Z)(function*(D){const T=Oo(D),L=(yield ss()).transaction(is,"readwrite");yield L.objectStore(is).delete(T),yield L.done})).apply(this,arguments)}function Oo({appConfig:D}){return D.appId}const In=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function jl(D,T){return gu.apply(this,arguments)}function gu(){return(gu=(0,k.Z)(function*(D,T){var x;const L=yield Ee(D),Q=Ms(T),re={method:"POST",headers:L,body:JSON.stringify(Q)};let De;try{De=yield(yield fetch(Lo(D.appConfig),re)).json()}catch(Be){throw In.create("token-subscribe-failed",{errorInfo:null===(x=Be)||void 0===x?void 0:x.toString()})}if(De.error)throw In.create("token-subscribe-failed",{errorInfo:De.error.message});if(!De.token)throw In.create("token-subscribe-no-token");return De.token})).apply(this,arguments)}function Ec(D,T){return Js.apply(this,arguments)}function Js(){return(Js=(0,k.Z)(function*(D,T){var x;const L=yield Ee(D),Q=Ms(T.subscriptionOptions),re={method:"PATCH",headers:L,body:JSON.stringify(Q)};let De;try{De=yield(yield fetch(`${Lo(D.appConfig)}/${T.token}`,re)).json()}catch(Be){throw In.create("token-update-failed",{errorInfo:null===(x=Be)||void 0===x?void 0:x.toString()})}if(De.error)throw In.create("token-update-failed",{errorInfo:De.error.message});if(!De.token)throw In.create("token-update-no-token");return De.token})).apply(this,arguments)}function xs(D,T){return mu.apply(this,arguments)}function mu(){return(mu=(0,k.Z)(function*(D,T){var x;const Q={method:"DELETE",headers:yield Ee(D)};try{const De=yield(yield fetch(`${Lo(D.appConfig)}/${T}`,Q)).json();if(De.error)throw In.create("token-unsubscribe-failed",{errorInfo:De.error.message})}catch(re){throw In.create("token-unsubscribe-failed",{errorInfo:null===(x=re)||void 0===x?void 0:x.toString()})}})).apply(this,arguments)}function Lo({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Ee(D){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,k.Z)(function*({appConfig:D,installations:T}){const x=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Ms({p256dh:D,auth:T,endpoint:x,vapidKey:L}){const Q={web:{endpoint:x,auth:T,p256dh:D}};return L!==Ys&&(Q.web.applicationPubKey=L),Q}const Fo=6048e5;function dn(D){return pa.apply(this,arguments)}function pa(){return(pa=(0,k.Z)(function*(D){const T=yield Th(D.swRegistration,D.vapidKey),x={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:T.endpoint,auth:Ar(T.getKey("auth")),p256dh:Ar(T.getKey("p256dh"))},L=yield cr(D.firebaseDependencies);if(L){if(jn(L.subscriptionOptions,x))return Date.now()>=L.createTime+Fo?ga(D,{token:L.token,createTime:Date.now(),subscriptionOptions:x}):L.token;try{yield xs(D.firebaseDependencies,L.token)}catch(Q){console.warn(Q)}return Uo(D.firebaseDependencies,x)}return Uo(D.firebaseDependencies,x)})).apply(this,arguments)}function Rs(D){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,k.Z)(function*(D){const T=yield cr(D.firebaseDependencies);T&&(yield xs(D.firebaseDependencies,T.token),yield as(D.firebaseDependencies));const x=yield D.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function ga(D,T){return ma.apply(this,arguments)}function ma(){return(ma=(0,k.Z)(function*(D,T){try{const x=yield Ec(D.firebaseDependencies,T),L=Object.assign(Object.assign({},T),{token:x,createTime:Date.now()});return yield vi(D.firebaseDependencies,L),x}catch(x){throw yield Rs(D),x}})).apply(this,arguments)}function Uo(D,T){return ya.apply(this,arguments)}function ya(){return(ya=(0,k.Z)(function*(D,T){const L={token:yield jl(D,T),createTime:Date.now(),subscriptionOptions:T};return yield vi(D,L),L.token})).apply(this,arguments)}function Th(D,T){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,k.Z)(function*(D,T){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ul(T)})})).apply(this,arguments)}function jn(D,T){return T.vapidKey===D.vapidKey&&T.endpoint===D.endpoint&&T.auth===D.auth&&T.p256dh===D.p256dh}function Ui(D){const T={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function _a(D,T){if(!T.notification)return;D.notification={};const x=T.notification.title;x&&(D.notification.title=x);const L=T.notification.body;L&&(D.notification.body=L);const Q=T.notification.image;Q&&(D.notification.image=Q)}(T,D),function Xs(D,T){!T.data||(D.data=T.data)}(T,D),function cs(D,T){var x,L,Q,re,De;if(!(T.fcmOptions||null!==(x=T.notification)&&void 0!==x&&x.click_action))return;D.fcmOptions={};const Be=null!==(Q=null===(L=T.fcmOptions)||void 0===L?void 0:L.link)&&void 0!==Q?Q:null===(re=T.notification)||void 0===re?void 0:re.click_action;Be&&(D.fcmOptions.link=Be);const ct=null===(De=T.fcmOptions)||void 0===De?void 0:De.analytics_label;ct&&(D.fcmOptions.analyticsLabel=ct)}(T,D),T}function Dc(D){return"object"==typeof D&&!!D&&Po in D}function bc(D,T){const x=[];for(let L=0;L<D.length;L++)x.push(D.charAt(L)),L<T.length&&x.push(T.charAt(L));return x.join("")}function va(D){return In.create("missing-app-config-values",{valueName:D})}bc("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),bc("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Tc{constructor(T,x,L){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Q=function $l(D){if(!D||!D.options)throw va("App Configuration Object");if(!D.name)throw va("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:x}=D;for(const L of T)if(!x[L])throw va(L);return{appName:D.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:Q,installations:x,analyticsProvider:L}}_delete(){return Promise.resolve()}}function eo(D){return yu.apply(this,arguments)}function yu(){return(yu=(0,k.Z)(function*(D){var T;try{D.swRegistration=yield navigator.serviceWorker.register(Mo,{scope:Fi}),D.swRegistration.update().catch(()=>{})}catch(x){throw In.create("failed-service-worker-registration",{browserErrorMessage:null===(T=x)||void 0===T?void 0:T.message})}})).apply(this,arguments)}function wa(D,T){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,k.Z)(function*(D,T){if(!T&&!D.swRegistration&&(yield eo(D)),T||!D.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw In.create("invalid-sw-registration");D.swRegistration=T}})).apply(this,arguments)}function Vo(D,T){return _u.apply(this,arguments)}function _u(){return(_u=(0,k.Z)(function*(D,T){T?D.vapidKey=T:D.vapidKey||(D.vapidKey=Ys)})).apply(this,arguments)}function wu(){return(wu=(0,k.Z)(function*(D,T){if(!navigator)throw In.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw In.create("permission-blocked");return yield Vo(D,T?.vapidKey),yield wa(D,T?.serviceWorkerRegistration),dn(D)})).apply(this,arguments)}function Iu(D,T,x){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,k.Z)(function*(D,T,x){const L=Bo(T);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(L,{message_id:x[Po],message_name:x[da],message_time:x[Ll],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Bo(D){switch(D){case Zn.NOTIFICATION_CLICKED:return"notification_open";case Zn.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Du(){return(Du=(0,k.Z)(function*(D,T){const x=T.data;if(!x.isFirebaseMessaging)return;D.onMessageHandler&&x.messageType===Zn.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Ui(x)):D.onMessageHandler.next(Ui(x)));const L=x.data;Dc(L)&&"1"===L[Fl]&&(yield Iu(D,x.messageType,L))})).apply(this,arguments)}const Wn="@firebase/messaging",gn=D=>{const T=new Tc(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Ch(D,T){return Du.apply(this,arguments)}(T,x)),T},jo=D=>{const T=D.getProvider("messaging").getImmediate();return{getToken:L=>function vu(D,T){return wu.apply(this,arguments)}(T,L)}};function Gl(){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,k.Z)(function*(){try{yield(0,ie.eu)()}catch{return!1}return typeof window<"u"&&(0,ie.hl)()&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Hl(){(0,ae._registerComponent)(new de.wA("messaging",gn,"PUBLIC")),(0,ae._registerComponent)(new de.wA("messaging-internal",jo,"PRIVATE")),(0,ae.registerVersion)(Wn,"0.9.16"),(0,ae.registerVersion)(Wn,"0.9.16","esm2017")}();const Vi="analytics",$o="firebase_id",Bi="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ea="https://www.googletagmanager.com/gtag/js",rr=new ce.Yd("@firebase/analytics");function Mh(D){return Promise.all(D.map(T=>T.catch(x=>x)))}function Om(D,T){const x=document.createElement("script");x.src=`${Ea}?l=${D}&id=${T}`,x.async=!0,document.head.appendChild(x)}function Da(D,T,x,L,Q,re){return ba.apply(this,arguments)}function ba(){return(ba=(0,k.Z)(function*(D,T,x,L,Q,re){const De=L[Q];try{if(De)yield T[De];else{const ct=(yield Mh(x)).find(Dt=>Dt.measurementId===Q);ct&&(yield T[ct.appId])}}catch(Be){rr.error(Be)}D("config",Q,re)})).apply(this,arguments)}function Zl(D,T,x,L,Q){return ks.apply(this,arguments)}function ks(){return(ks=(0,k.Z)(function*(D,T,x,L,Q){try{let re=[];if(Q&&Q.send_to){let De=Q.send_to;Array.isArray(De)||(De=[De]);const Be=yield Mh(x);for(const ct of De){const Dt=Be.find(at=>at.measurementId===ct),Tt=Dt&&T[Dt.appId];if(!Tt){re=[];break}re.push(Tt)}}0===re.length&&(re=Object.values(T)),yield Promise.all(re),D("event",L,Q||{})}catch(re){rr.error(re)}})).apply(this,arguments)}function Ta(){const D=window.document.getElementsByTagName("script");for(const T of Object.values(D))if(T.src&&T.src.includes(Ea))return T;return null}const lr=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Yl=new class no{constructor(T={},x=1e3){this.throttleMetadata=T,this.intervalMillis=x}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,x){this.throttleMetadata[T]=x}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function xc(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function qt(D){return dr.apply(this,arguments)}function dr(){return(dr=(0,k.Z)(function*(D){var T;const{appId:x,apiKey:L}=D,Q={method:"GET",headers:xc(L)},re=Bi.replace("{app-id}",x),De=yield fetch(re,Q);if(200!==De.status&&304!==De.status){let Be="";try{const ct=yield De.json();null!==(T=ct.error)&&void 0!==T&&T.message&&(Be=ct.error.message)}catch{}throw lr.create("config-fetch-failed",{httpStatus:De.status,responseMessage:Be})}return De.json()})).apply(this,arguments)}function $e(D){return wr.apply(this,arguments)}function wr(){return(wr=(0,k.Z)(function*(D,T=Yl,x){const{appId:L,apiKey:Q,measurementId:re}=D.options;if(!L)throw lr.create("no-app-id");if(!Q){if(re)return{measurementId:re,appId:L};throw lr.create("no-api-key")}const De=T.getThrottleMetadata(L)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Be=new Ph;return setTimeout((0,k.Z)(function*(){Be.abort()}),void 0!==x?x:6e4),hr({appId:L,apiKey:Q,measurementId:re},De,Be,T)})).apply(this,arguments)}function hr(D,T,x){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,k.Z)(function*(D,{throttleEndTimeMillis:T,backoffCount:x},L,Q=Yl){var re,De;const{appId:Be,measurementId:ct}=D;try{yield ls(L,T)}catch(Dt){if(ct)return rr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ct} provided in the "measurementId" field in the local Firebase config. [${null===(re=Dt)||void 0===re?void 0:re.message}]`),{appId:Be,measurementId:ct};throw Dt}try{const Dt=yield qt(D);return Q.deleteThrottleMetadata(Be),Dt}catch(Dt){const Tt=Dt;if(!ti(Tt)){if(Q.deleteThrottleMetadata(Be),ct)return rr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ct} provided in the "measurementId" field in the local Firebase config. [${Tt?.message}]`),{appId:Be,measurementId:ct};throw Dt}const at=503===Number(null===(De=Tt?.customData)||void 0===De?void 0:De.httpStatus)?(0,ie.$s)(x,Q.intervalMillis,30):(0,ie.$s)(x,Q.intervalMillis),yn={throttleEndTimeMillis:Date.now()+at,backoffCount:x+1};return Q.setThrottleMetadata(Be,yn),rr.debug(`Calling attemptFetch again in ${at} millis`),hr(D,yn,L,Q)}})).apply(this,arguments)}function ls(D,T){return new Promise((x,L)=>{const Q=Math.max(T-Date.now(),0),re=setTimeout(x,Q);D.addEventListener(()=>{clearTimeout(re),L(lr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function ti(D){if(!(D instanceof ie.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}class Ph{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let Aa,Pn;function ro(){return(ro=(0,k.Z)(function*(D,T,x,L,Q){if(Q&&Q.global)D("event",x,L);else{const re=yield T;D("event",x,Object.assign(Object.assign({},L),{send_to:re}))}})).apply(this,arguments)}function Pc(D){Pn=D}function Ma(D){Aa=D}function kh(){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,k.Z)(function*(){var D;if(!(0,ie.hl)())return rr.warn(lr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(T){return rr.warn(lr.create("indexeddb-unavailable",{errorInfo:null===(D=T)||void 0===D?void 0:D.toString()}).message),!1}return!0})).apply(this,arguments)}function Os(){return(Os=(0,k.Z)(function*(D,T,x,L,Q,re,De){var Be;const ct=$e(D);ct.then(Gr=>{x[Gr.measurementId]=Gr.appId,D.options.measurementId&&Gr.measurementId!==D.options.measurementId&&rr.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Gr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Gr=>rr.error(Gr)),T.push(ct);const Dt=kh().then(Gr=>{if(Gr)return L.getId()}),[Tt,at]=yield Promise.all([ct,Dt]);Ta()||Om(re,Tt.measurementId),Pn&&(Q("consent","default",Pn),Pc(void 0)),Q("js",new Date);const yn=null!==(Be=De?.config)&&void 0!==Be?Be:{};return yn.origin="firebase",yn.update=!0,null!=at&&(yn[$o]=at),Q("config",Tt.measurementId,yn),Aa&&(Q("set",Aa),Ma(void 0)),Tt.measurementId})).apply(this,arguments)}class Ls{constructor(T){this.app=T}_delete(){return delete fr[this.app.options.appId],Promise.resolve()}}let fr={},Ho=[];const Su={};let Fs,jt,ri="dataLayer",kn=!1;function $n(D,T,x){!function Oh(){const D=[];if((0,ie.ru)()&&D.push("This is a browser extension environment."),(0,ie.zI)()||D.push("Cookies are not available."),D.length>0){const T=D.map((L,Q)=>`(${Q+1}) ${L}`).join(" "),x=lr.create("invalid-analytics-context",{errorInfo:T});rr.warn(x.message)}}();const L=D.options.appId;if(!L)throw lr.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw lr.create("no-api-key");rr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=fr[L])throw lr.create("already-exists",{id:L});if(!kn){!function Lm(D){let T=[];Array.isArray(window[D])?T=window[D]:window[D]=T}(ri);const{wrappedGtag:re,gtagCore:De}=function Rh(D,T,x,L,Q){let re=function(...De){window[L].push(arguments)};return window[Q]&&"function"==typeof window[Q]&&(re=window[Q]),window[Q]=function Wl(D,T,x,L){function re(){return(re=(0,k.Z)(function*(De,Be,ct){try{"event"===De?yield Zl(D,T,x,Be,ct):"config"===De?yield Da(D,T,x,L,Be,ct):"consent"===De?D("consent","update",ct):D("set",Be)}catch(Dt){rr.error(Dt)}})).apply(this,arguments)}return function Q(De,Be,ct){return re.apply(this,arguments)}}(re,D,T,x),{gtagCore:re,wrappedGtag:window[Q]}}(fr,Ho,Su,ri,"gtag");jt=re,Fs=De,kn=!0}return fr[L]=function ni(D,T,x,L,Q,re,De){return Os.apply(this,arguments)}(D,Ho,Su,T,Fs,ri,x),new Ls(D)}function ji(){return En.apply(this,arguments)}function En(){return(En=(0,k.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}const xr="@firebase/analytics";!function Au(){(0,ae._registerComponent)(new de.wA(Vi,(T,{options:x})=>$n(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ae._registerComponent)(new de.wA("analytics-internal",function D(T){try{const x=T.getProvider(Vi).getImmediate();return{logEvent:(L,Q,re)=>function Ir(D,T,x,L){D=(0,ie.m9)(D),function Ql(D,T,x,L,Q){return ro.apply(this,arguments)}(jt,fr[D.app.options.appId],T,x,L).catch(Q=>rr.error(Q))}(x,L,Q,re)}}catch(x){throw lr.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ae.registerVersion)(xr,"0.8.0"),(0,ae.registerVersion)(xr,"0.8.0","esm2017")}();var so=O(4408),xu=O(7565);const Mt=new class zo extends xu.v{}(class Pa extends so.o{constructor(T,x){super(T,x),this.scheduler=T,this.work=x}schedule(T,x=0){return x>0?super.schedule(T,x):(this.delay=x,this.state=T,this.scheduler.flush(this),this)}execute(T,x){return x>0||this.closed?super.execute(T,x):this._execute(T,x)}requestAsyncId(T,x,L=0){return null!=L&&L>0||null==L&&this.delay>0?super.requestAsyncId(T,x,L):T.flush(this)}});var oo=O(4986),qo=O(8505),Nn=O(5363),Mr=O(9468);const ao=new g.GfV("7.4.1"),Nc="__angularfire_symbol__analyticsIsSupportedValue",ka="__angularfire_symbol__analyticsIsSupported",Mu="__angularfire_symbol__remoteConfigIsSupportedValue",On="__angularfire_symbol__remoteConfigIsSupported",Ii="__angularfire_symbol__messagingIsSupportedValue",Na="__angularfire_symbol__messagingIsSupported";function Xl(D,T,x){if(T){if(1===T.length)return T[0];const re=T.filter(De=>De.app===x);if(1===re.length)return re[0]}return x.container.getProvider(D).getImmediate({optional:!0})}globalThis[ka]||(globalThis[ka]=ji().then(D=>globalThis[Nc]=D).catch(()=>globalThis[Nc]=!1)),globalThis[Na]||(globalThis[Na]=Gl().then(D=>globalThis[Ii]=D).catch(()=>globalThis[Ii]=!1)),globalThis[On]||(globalThis[On]=_i().then(D=>globalThis[Mu]=D).catch(()=>globalThis[Mu]=!1));const Us=(D,T)=>{const x=T?[T]:(0,X.C6)(),L=[];return x.forEach(Q=>{Q.container.getProvider(D).instances.forEach(De=>{L.includes(De)||L.push(De)})}),L};function Vs(){}class Gi{constructor(T,x=Mt){this.zone=T,this.delegate=x}now(){return this.delegate.now()}schedule(T,x,L){const Q=this.zone;return this.delegate.schedule(function(De){Q.runGuarded(()=>{T.apply(this,[De])})},x,L)}}class ed{constructor(T){this.zone=T,this.task=null}call(T,x){const L=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Vs,{},Vs,Vs)),x.pipe((0,qo.b)({next:L,complete:L,error:L})).subscribe(T).add(L)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Pu=(()=>{class D{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Gi(Zone.current)),this.insideAngular=x.run(()=>new Gi(Zone.current,oo.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(x){return new(x||D)(g.LFG(g.R0b))},D.\u0275prov=g.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Er(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Zo(D){return D.pipe((0,Nn.Q)(Er().outsideAngular))}function mn(D){return Er(),function ku(D){return function(x){return(x=x.lift(new ed(D.ngZone))).pipe((0,Mr.R)(D.outsideAngular),(0,Nn.Q)(D.insideAngular))}}(Er())(D)}},2090:(st,Te,O)=>{O.d(Te,{$s:()=>Is,BH:()=>Fe,G6:()=>je,L:()=>he,LL:()=>Oe,Mn:()=>Ie,Sg:()=>Ae,UG:()=>me,US:()=>de,ZB:()=>j,ZR:()=>ne,b$:()=>rt,d:()=>Ce,eu:()=>ge,hl:()=>V,jU:()=>fe,m9:()=>Vt,ne:()=>ht,pd:()=>Qr,r3:()=>br,ru:()=>Ye,tV:()=>pe,uI:()=>Je,vZ:()=>Yr,w1:()=>_e,xO:()=>ki,xb:()=>nn,z$:()=>ve,zI:()=>W,zd:()=>es});const ae=function(Z){const $=[];let F=0;for(let H=0;H<Z.length;H++){let z=Z.charCodeAt(H);z<128?$[F++]=z:z<2048?($[F++]=z>>6|192,$[F++]=63&z|128):55296==(64512&z)&&H+1<Z.length&&56320==(64512&Z.charCodeAt(H+1))?(z=65536+((1023&z)<<10)+(1023&Z.charCodeAt(++H)),$[F++]=z>>18|240,$[F++]=z>>12&63|128,$[F++]=z>>6&63|128,$[F++]=63&z|128):($[F++]=z>>12|224,$[F++]=z>>6&63|128,$[F++]=63&z|128)}return $},de={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Z,$){if(!Array.isArray(Z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const F=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,H=[];for(let z=0;z<Z.length;z+=3){const be=Z[z],Ue=z+1<Z.length,ot=Ue?Z[z+1]:0,rn=z+2<Z.length,Qt=rn?Z[z+2]:0;let sn=(15&ot)<<2|Qt>>6,ln=63&Qt;rn||(ln=64,Ue||(sn=64)),H.push(F[be>>2],F[(3&be)<<4|ot>>4],F[sn],F[ln])}return H.join("")},encodeString(Z,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(Z):this.encodeByteArray(ae(Z),$)},decodeString(Z,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(Z):function(Z){const $=[];let F=0,H=0;for(;F<Z.length;){const z=Z[F++];if(z<128)$[H++]=String.fromCharCode(z);else if(z>191&&z<224){const be=Z[F++];$[H++]=String.fromCharCode((31&z)<<6|63&be)}else if(z>239&&z<365){const rn=((7&z)<<18|(63&Z[F++])<<12|(63&Z[F++])<<6|63&Z[F++])-65536;$[H++]=String.fromCharCode(55296+(rn>>10)),$[H++]=String.fromCharCode(56320+(1023&rn))}else{const be=Z[F++],Ue=Z[F++];$[H++]=String.fromCharCode((15&z)<<12|(63&be)<<6|63&Ue)}}return $.join("")}(this.decodeStringToByteArray(Z,$))},decodeStringToByteArray(Z,$){this.init_();const F=$?this.charToByteMapWebSafe_:this.charToByteMap_,H=[];for(let z=0;z<Z.length;){const be=F[Z.charAt(z++)],ot=z<Z.length?F[Z.charAt(z)]:0;++z;const Qt=z<Z.length?F[Z.charAt(z)]:64;++z;const Xe=z<Z.length?F[Z.charAt(z)]:64;if(++z,null==be||null==ot||null==Qt||null==Xe)throw Error();H.push(be<<2|ot>>4),64!==Qt&&(H.push(ot<<4&240|Qt>>2),64!==Xe&&H.push(Qt<<6&192|Xe))}return H},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Z=0;Z<this.ENCODED_VALS.length;Z++)this.byteToCharMap_[Z]=this.ENCODED_VALS.charAt(Z),this.charToByteMap_[this.byteToCharMap_[Z]]=Z,this.byteToCharMapWebSafe_[Z]=this.ENCODED_VALS_WEBSAFE.charAt(Z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Z]]=Z,Z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Z)]=Z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Z)]=Z)}}},he=function(Z){return function(Z){const $=ae(Z);return de.encodeByteArray($,!0)}(Z).replace(/\./g,"")},pe=function(Z){try{return de.decodeString(Z,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function j(Z,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===Z&&(Z={});break;case Array:Z=[];break;default:return $}for(const F in $)!$.hasOwnProperty(F)||!K(F)||(Z[F]=j(Z[F],$[F]));return Z}function K(Z){return"__proto__"!==Z}class Fe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,F)=>{this.resolve=$,this.reject=F})}wrapCallback($){return(F,H)=>{F?this.reject(F):this.resolve(H),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(F):$(F,H))}}}function Ae(Z,$){if(Z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const H=$||"demo-project",z=Z.iat||0,be=Z.sub||Z.user_id;if(!be)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ue=Object.assign({iss:`https://securetoken.google.com/${H}`,aud:H,iat:z,exp:z+3600,auth_time:z,sub:be,user_id:be,firebase:{sign_in_provider:"custom",identities:{}}},Z);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(Ue)),""].join(".")}function ve(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Je(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ve())}function me(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function fe(){return"object"==typeof self&&self.self===self}function Ye(){const Z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Z&&void 0!==Z.id}function rt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ce(){return ve().indexOf("Electron/")>=0}function _e(){const Z=ve();return Z.indexOf("MSIE ")>=0||Z.indexOf("Trident/")>=0}function Ie(){return ve().indexOf("MSAppHost/")>=0}function je(){return!me()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function V(){return"object"==typeof indexedDB}function ge(){return new Promise((Z,$)=>{try{let F=!0;const H="validate-browser-context-for-indexeddb-analytics-module",z=self.indexedDB.open(H);z.onsuccess=()=>{z.result.close(),F||self.indexedDB.deleteDatabase(H),Z(!0)},z.onupgradeneeded=()=>{F=!1},z.onerror=()=>{var be;$((null===(be=z.error)||void 0===be?void 0:be.message)||"")}}catch(F){$(F)}})}function W(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ne extends Error{constructor($,F,H){super(F),this.code=$,this.customData=H,this.name="FirebaseError",Object.setPrototypeOf(this,ne.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oe.prototype.create)}}class Oe{constructor($,F,H){this.service=$,this.serviceName=F,this.errors=H}create($,...F){const H=F[0]||{},z=`${this.service}/${$}`,be=this.errors[$],Ue=be?function ke(Z,$){return Z.replace(ut,(F,H)=>{const z=$[H];return null!=z?String(z):`<${H}?>`})}(be,H):"Error";return new ne(z,`${this.serviceName}: ${Ue} (${z}).`,H)}}const ut=/\{\$([^}]+)}/g;function br(Z,$){return Object.prototype.hasOwnProperty.call(Z,$)}function nn(Z){for(const $ in Z)if(Object.prototype.hasOwnProperty.call(Z,$))return!1;return!0}function Yr(Z,$){if(Z===$)return!0;const F=Object.keys(Z),H=Object.keys($);for(const z of F){if(!H.includes(z))return!1;const be=Z[z],Ue=$[z];if(vr(be)&&vr(Ue)){if(!Yr(be,Ue))return!1}else if(be!==Ue)return!1}for(const z of H)if(!F.includes(z))return!1;return!0}function vr(Z){return null!==Z&&"object"==typeof Z}function ki(Z){const $=[];for(const[F,H]of Object.entries(Z))Array.isArray(H)?H.forEach(z=>{$.push(encodeURIComponent(F)+"="+encodeURIComponent(z))}):$.push(encodeURIComponent(F)+"="+encodeURIComponent(H));return $.length?"&"+$.join("&"):""}function es(Z){const $={};return Z.replace(/^\?/,"").split("&").forEach(H=>{if(H){const[z,be]=H.split("=");$[decodeURIComponent(z)]=decodeURIComponent(be)}}),$}function Qr(Z){const $=Z.indexOf("?");if(!$)return"";const F=Z.indexOf("#",$);return Z.substring($,F>0?F:void 0)}function ht(Z,$){const F=new on(Z,$);return F.subscribe.bind(F)}class on{constructor($,F){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=F,this.task.then(()=>{$(this)}).catch(H=>{this.error(H)})}next($){this.forEachObserver(F=>{F.next($)})}error($){this.forEachObserver(F=>{F.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,F,H){let z;if(void 0===$&&void 0===F&&void 0===H)throw new Error("Missing Observer.");z=function Sn(Z,$){if("object"!=typeof Z||null===Z)return!1;for(const F of $)if(F in Z&&"function"==typeof Z[F])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:F,complete:H},void 0===z.next&&(z.next=Oi),void 0===z.error&&(z.error=Oi),void 0===z.complete&&(z.complete=Oi);const be=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?z.error(this.finalError):z.complete()}catch{}}),this.observers.push(z),be}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let F=0;F<this.observers.length;F++)this.sendOne(F,$)}sendOne($,F){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{F(this.observers[$])}catch(H){typeof console<"u"&&console.error&&console.error(H)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Oi(){}function Is(Z,$=1e3,F=2){const H=$*Math.pow(F,Z),z=Math.round(.5*H*(Math.random()-.5)*2);return Math.min(144e5,H+z)}function Vt(Z){return Z&&Z._delegate?Z._delegate:Z}},7994:(st,Te,O)=>{var g=O(4650);let X=null;function k(){return X}const ce=new g.OlP("DocumentToken");let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function pe(){return(0,g.LFG)(j)}()},providedIn:"platform"}),n})();const B=new g.OlP("Location Initialized");let j=(()=>{class n extends he{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){K()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){K()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ce))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Fe(){return new j((0,g.LFG)(ce))}()},providedIn:"platform"}),n})();function K(){return!!window.history.pushState}function Ae(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function ve(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Je(n){return n&&"?"!==n[0]?"?"+n:n}let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(Ye)},providedIn:"root"}),n})();const fe=new g.OlP("appBaseHref");let Ye=(()=>{class n extends me{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,g.f3M)(ce).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ae(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Je(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const l=this.prepareExternalUrl(o+Je(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){const l=this.prepareExternalUrl(o+Je(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(he),g.LFG(fe,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rt=(()=>{class n extends me{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ae(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let l=this.prepareExternalUrl(o+Je(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){let l=this.prepareExternalUrl(o+Je(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(he),g.LFG(fe,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Ce=(()=>{class n{constructor(t){this._subject=new g.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=ve(Ve(r)),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Je(r))}normalize(t){return n.stripTrailingSlash(function Ie(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ve(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Je(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Je(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Je,n.joinWithSlash=Ae,n.stripTrailingSlash=ve,n.\u0275fac=function(t){return new(t||n)(g.LFG(me))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function _e(){return new Ce((0,g.LFG)(me))}()},providedIn:"root"}),n})();function Ve(n){return n.replace(/\/index.html$/,"")}class Ks{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let Ao=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),jr=(()=>{class n{constructor(t,r,o){this.ngSwitch=o,o._addCase(),this._view=new Ks(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(Ao,9))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),Eh=(()=>{class n{constructor(t,r,o){o._addDefault(new Ks(t,r))}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(Ao,9))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngSwitchDefault",""]],standalone:!0}),n})(),ha=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function $r(n){return"server"===n}let Qs=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new Hr((0,g.LFG)(ce),window)}),n})();class Hr{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function fa(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=is(this.window.history)||is(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function is(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class vi extends class No extends class de{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ie(n){X||(X=n)}(new vi)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function as(){return os=os||document.querySelector("base"),os?os.getAttribute("href"):null}();return null==t?null:function Oo(n){us=us||document.createElement("a"),us.setAttribute("href",n);const e=us.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){os=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function _c(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let us,os=null;const It=new g.OlP("TRANSITION_ID"),jl=[{provide:g.ip1,useFactory:function In(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=k(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[It,ce,g.zs3],multi:!0}];let Ec=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Js=new g.OlP("EventManagerPlugins");let xs=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const l=o[u];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Js),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class mu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=k().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Lo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Ee=(()=>{class n extends Lo{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const l=this._doc.createElement("style");l.textContent=u,o.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ft),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ft))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ce))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function Ft(n){k().remove(n)}const Ms={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Fo=/%COMP%/g;function Uo(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?Uo(n,o,t):(o=o.replace(Fo,n),t.push(o))}return t}function ya(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ps=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new jn(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new cs(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case g.ifc.ShadowDom:return new Dc(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=Uo(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(xs),g.LFG(Ee),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class jn{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ms[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Xs(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Xs(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=Ms[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=Ms[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,o&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ya(r)):this.eventManager.addEventListener(e,t,ya(r))}}function Xs(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class cs extends jn{constructor(e,t,r,o){super(e),this.component=r;const u=Uo(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function ga(n){return"_ngcontent-%COMP%".replace(Fo,n)}(o+"-"+r.id),this.hostAttr=function ma(n){return"_nghost-%COMP%".replace(Fo,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Dc extends jn{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Uo(o.id,o.styles,[]);for(let l=0;l<u.length;l++){const m=document.createElement("style");m.textContent=u[l],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let bc=(()=>{class n extends mu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ce))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const $l=["alt","control","meta","shift"],Tc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},eo={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},yu={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let wa=(()=>{class n extends mu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let l="";if($l.forEach(v=>{const b=r.indexOf(v);b>-1&&(r.splice(b,1),l+=v+".")}),l+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=o,m.fullKey=l,m}static getEventFullKey(t){let r="",o=function Cc(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&eo.hasOwnProperty(e)&&(e=eo[e]))}return Tc[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),$l.forEach(u=>{u!=o&&(0,yu[u])(t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ce))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Ch=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function wu(){vi.makeCurrent()},multi:!0},{provide:ce,useFactory:function Eu(){return(0,g.RDi)(document),document},deps:[]}]),Du=new g.OlP(""),Wn=[{provide:g.rWj,useClass:class gu{addToWindow(e){g.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const o=g.dqk.getAllAngularTestabilities();let u=o.length,l=!1;const m=function(v){l=l||v,u--,0==u&&r(l)};o.forEach(function(v){v.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:g.lri,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]}],ei=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function Iu(){return new g.qLn},deps:[]},{provide:Js,useClass:bc,multi:!0,deps:[ce,g.R0b,g.Lbi]},{provide:Js,useClass:wa,multi:!0,deps:[ce]},{provide:Ps,useClass:Ps,deps:[xs,Ee,g.AFp]},{provide:g.FYo,useExisting:Ps},{provide:Lo,useExisting:Ee},{provide:Ee,useClass:Ee,deps:[ce]},{provide:xs,useClass:xs,deps:[Js,g.R0b]},{provide:class cr{},useClass:Ec,deps:[]},[]];let gn=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:It,useExisting:g.AFp},jl]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Du,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[...ei,...Wn],imports:[ha,g.hGG]}),n})(),zl=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ce))},n.\u0275prov=g.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Sc(){return new zl((0,g.LFG)(ce))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;const xc_firebase={apiKey:"AIzaSyD_2LqdtUt5dMmAwUROzsw60z2XfghawJI",authDomain:"vet-project-b1cc5.firebaseapp.com",projectId:"vet-project-b1cc5",storageBucket:"vet-project-b1cc5.appspot.com",messagingSenderId:"694710746400",appId:"1:694710746400:web:034327c91f406d08ab2b45",measurementId:"G-6D1LMSK7VQ"};var qt=O(8996),dr=O(7669);function $e(...n){const e=(0,dr.yG)(n);return(0,qt.D)(n,e)}var wr=O(7579);class hr extends wr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const ls=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ti=O(9751);const{isArray:Ph}=Array,{getPrototypeOf:Aa,prototype:Ql,keys:ro}=Object;var wi=O(4671),pt=O(4004);const{isArray:Rc}=Array;var Pn=O(5403),Pc=O(9672);function Ma(...n){const e=(0,dr.yG)(n),t=(0,dr.jO)(n),{args:r,keys:o}=function Mc(n){if(1===n.length){const e=n[0];if(Ph(e))return{args:e,keys:null};if(function io(n){return n&&"object"==typeof n&&Aa(n)===Ql}(e)){const t=ro(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,qt.D)([],e);const u=new ti.y(function kh(n,e,t=wi.y){return r=>{Cu(e,()=>{const{length:o}=n,u=new Array(o);let l=o,m=o;for(let v=0;v<o;v++)Cu(e,()=>{const b=(0,qt.D)(n[v],e);let A=!1;b.subscribe((0,Pn.x)(r,R=>{u[v]=R,A||(A=!0,m--),m||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,o?l=>function Ns(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}(o,l):wi.y));return t?u.pipe(function Tu(n){return(0,pt.U)(e=>function xa(n,e){return Rc(e)?n(...e):n(e)}(n,e))}(t)):u}function Cu(n,e,t){n?(0,Pc.f)(t,n,e):e()}var ni=O(8189);function Ls(...n){return function Os(){return(0,ni.J)(1)}()((0,qt.D)(n,(0,dr.yG)(n)))}var fr=O(8421);function Ho(n){return new ti.y(e=>{(0,fr.Xf)(n()).subscribe(e)})}var Su=O(9635),ri=O(576);function Go(n,e){const t=(0,ri.m)(n)?n:()=>n,r=o=>o.error(t());return new ti.y(e?o=>e.schedule(r,0,o):r)}var Fs=O(515),jt=O(727),kn=O(4482);function Nh(){return(0,kn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Pn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Oh extends ti.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,kn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new jt.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Pn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=jt.w0.EMPTY)}return e}refCount(){return Nh()(this)}}function $n(n,e){return(0,kn.e)((t,r)=>{let o=null,u=0,l=!1;const m=()=>l&&!o&&r.complete();t.subscribe((0,Pn.x)(r,v=>{o?.unsubscribe();let b=0;const A=u++;(0,fr.Xf)(n(v,A)).subscribe(o=(0,Pn.x)(r,R=>r.next(e?e(v,R,A,b++):R),()=>{o=null,m()}))},()=>{l=!0,m()}))})}function Ra(n){return n<=0?()=>Fs.E:(0,kn.e)((e,t)=>{let r=0;e.subscribe((0,Pn.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function kc(...n){const e=(0,dr.yG)(n);return(0,kn.e)((t,r)=>{(e?Ls(n,t,e):Ls(n,t)).subscribe(r)})}function ji(n,e){return(0,kn.e)((t,r)=>{let o=0;t.subscribe((0,Pn.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var En=O(5577);function Jl(n){return(0,kn.e)((e,t)=>{let r=!1;e.subscribe((0,Pn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function Dp(n=Hn){return(0,kn.e)((e,t)=>{let r=!1;e.subscribe((0,Pn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function Hn(){return new ls}function $i(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ji((o,u)=>n(o,u,r)):wi.y,Ra(1),t?Jl(e):Dp(()=>new ls))}function Hi(n,e){return(0,ri.m)(e)?(0,En.z)(n,e,1):(0,En.z)(n,1)}var Ir=O(8505);function ds(n){return(0,kn.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Pn.x)(t,void 0,void 0,l=>{u=(0,fr.Xf)(n(l,ds(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function xr(n,e,t,r,o){return(u,l)=>{let m=t,v=e,b=0;u.subscribe((0,Pn.x)(l,A=>{const R=b++;v=m?n(v,A,R):(m=!0,A),r&&l.next(v)},o&&(()=>{m&&l.next(v),l.complete()})))}}function pr(n,e){return(0,kn.e)(xr(n,e,arguments.length>=2,!0))}function Au(n){return n<=0?()=>Fs.E:(0,kn.e)((e,t)=>{let r=[];e.subscribe((0,Pn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function so(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ji((o,u)=>n(o,u,r)):wi.y,Au(1),t?Jl(e):Dp(()=>new ls))}function zo(n){return(0,kn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Mt="primary";class Fm{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function oo(n){return new Fm(n)}function qo(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const l=r[u],m=n[u];if(l.startsWith(":"))o[l.substring(1)]=m;else if(l!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Mr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!ao(n[o],e[o]))return!1;return!0}function ao(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function Nc(n){return Array.prototype.concat.apply([],n)}function ka(n){return n.length>0?n[n.length-1]:null}function On(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ii(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,qt.D)(Promise.resolve(n)):$e(n)}const bp={exact:function Us(n,e,t){if(!Bs(n.segments,e.segments)||!Pu(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Us(n.children[r],e.children[r],t))return!1;return!0},subset:Gi},La={exact:function Xl(n,e){return Mr(n,e)},subset:function Vs(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ao(n[t],e[t]))},ignored:()=>!0};function Ru(n,e,t){return bp[t.paths](n.root,e.root,t.matrixParams)&&La[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Gi(n,e,t){return ed(n,e,e.segments,t)}function ed(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Bs(o,t)||e.hasChildren()||!Pu(o,t,r))}if(n.segments.length===t.length){if(!Bs(n.segments,t)||!Pu(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!Gi(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Bs(n.segments,o)&&Pu(n.segments,o,r)&&n.children[Mt])&&ed(n.children[Mt],e,u,r)}}function Pu(n,e,t){return e.every((r,o)=>La[t](n[o].parameters,r.parameters))}class Er{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=oo(this.queryParams)),this._queryParamMap}toString(){return td.serialize(this)}}class Rt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,On(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return D(this)}}class ir{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=oo(this.parameters)),this._parameterMap}toString(){return ct(this)}}function Bs(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let ku=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return new Nu},providedIn:"root"}),n})();class Nu{parse(e){const t=new Lh(e);return new Er(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${T(e.root,!0)}`,r=function Tt(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${L(t)}=${L(o)}`).join("&"):`${L(t)}=${L(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Q(n){return encodeURI(n)}(e.fragment)}`:""}`}}const td=new Nu;function D(n){return n.segments.map(e=>ct(e)).join("/")}function T(n,e){if(!n.hasChildren())return D(n);if(e){const t=n.children[Mt]?T(n.children[Mt],!1):"",r=[];return On(n.children,(o,u)=>{u!==Mt&&r.push(`${u}:${T(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function mn(n,e){let t=[];return On(n.children,(r,o)=>{o===Mt&&(t=t.concat(e(r,o)))}),On(n.children,(r,o)=>{o!==Mt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Mt?[T(n.children[Mt],!1)]:[`${o}:${T(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Mt]?`${D(n)}/${t[0]}`:`${D(n)}/(${t.join("//")})`}}function x(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function L(n){return x(n).replace(/%3B/gi,";")}function re(n){return x(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function De(n){return decodeURIComponent(n)}function Be(n){return De(n.replace(/\+/g,"%20"))}function ct(n){return`${re(n.path)}${function Dt(n){return Object.keys(n).map(e=>`;${re(e)}=${re(n[e])}`).join("")}(n.parameters)}`}const at=/^[^\/()?;=#]+/;function yn(n){const e=n.match(at);return e?e[0]:""}const Gr=/^[^=?&#]+/,Ei=/^[^&#]+/;class Lh{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Rt([],{}):new Rt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Mt]=new Rt(e,t)),r}parseSegment(){const e=yn(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new g.vHH(4009,!1);return this.capture(e),new ir(De(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=yn(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=yn(this.remaining);o&&(r=o,this.capture(r))}e[De(t)]=De(r)}parseQueryParam(e){const t=function Fa(n){const e=n.match(Gr);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function Di(n){const e=n.match(Ei);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const o=Be(t),u=Be(r);if(e.hasOwnProperty(o)){let l=e[o];Array.isArray(l)||(l=[l],e[o]=l),l.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=yn(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new g.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Mt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[Mt]:new Rt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new g.vHH(4011,!1)}}function Ua(n){return n.segments.length>0?new Rt([],{[Mt]:n}):n}function bi(n){const e={};for(const r of Object.keys(n.children)){const u=bi(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function uo(n){if(1===n.numberOfChildren&&n.children[Mt]){const e=n.children[Mt];return new Rt(n.segments.concat(e.segments),e.children)}return n}(new Rt(n.segments,e))}function Ti(n){return n instanceof Er}function Fh(n,e,t,r,o){if(0===t.length)return Lc(e.root,e.root,e.root,r,o);const u=function rd(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Vm(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return On(u.outlets,(v,b)=>{m[b]="string"==typeof v?v.split("/"):v}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===l?(u.split("/").forEach((m,v)=>{0==v&&"."===m||(0==v&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new Vm(t,e,r)}(t);return u.toRoot()?Lc(e.root,e.root,new Rt([],{}),r,o):function l(v){const b=function id(n,e,t,r){if(n.isAbsolute)return new Lu(e.root,!0,0);if(-1===r)return new Lu(t,t===e.root,0);return function sd(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new g.vHH(4005,!1);o=r.segments.length}return new Lu(r,!1,o-u)}(t,r+(Oc(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,v),A=b.processChildren?Fc(b.segmentGroup,b.index,u.commands):Vh(b.segmentGroup,b.index,u.commands);return Lc(e.root,b.segmentGroup,A,r,o)}(n.snapshot?._lastPathIndex)}function Oc(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function co(n){return"object"==typeof n&&null!=n&&n.outlets}function Lc(n,e,t,r,o){let l,u={};r&&On(r,(v,b)=>{u[b]=Array.isArray(v)?v.map(A=>`${A}`):`${v}`}),l=n===e?t:Uh(n,e,t);const m=Ua(bi(l));return new Er(m,u,o)}function Uh(n,e,t){const r={};return On(n.children,(o,u)=>{r[u]=o===e?t:Uh(o,e,t)}),new Rt(n.segments,r)}class Vm{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Oc(r[0]))throw new g.vHH(4003,!1);const o=r.find(co);if(o&&o!==ka(r))throw new g.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Lu{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Vh(n,e,t){if(n||(n=new Rt([],{})),0===n.segments.length&&n.hasChildren())return Fc(n,e,t);const r=function m0(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const l=n.segments[o],m=t[r];if(co(m))break;const v=`${m}`,b=r<t.length-1?t[r+1]:null;if(o>0&&void 0===v)break;if(v&&b&&"object"==typeof b&&void 0===b.outlets){if(!jh(v,b,l))return u;r+=2}else{if(!jh(v,{},l))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Rt(n.segments.slice(0,r.pathIndex),{});return u.children[Mt]=new Rt(n.segments.slice(r.pathIndex),n.children),Fc(u,0,o)}return r.match&&0===o.length?new Rt(n.segments,{}):r.match&&!n.hasChildren()?Fu(n,e,t):r.match?Fc(n,0,o):Fu(n,e,t)}function Fc(n,e,t){if(0===t.length)return new Rt(n.segments,{});{const r=function Wo(n){return co(n[0])?n[0].outlets:{[Mt]:n}}(t),o={};return On(r,(u,l)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[l]=Vh(n.children[l],e,u))}),On(n.children,(u,l)=>{void 0===r[l]&&(o[l]=u)}),new Rt(n.segments,o)}}function Fu(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(co(u)){const v=Bh(u.outlets);return new Rt(r,v)}if(0===o&&Oc(t[0])){r.push(new ir(n.segments[e].path,od(t[0]))),o++;continue}const l=co(u)?u.outlets[Mt]:`${u}`,m=o<t.length-1?t[o+1]:null;l&&m&&Oc(m)?(r.push(new ir(l,od(m))),o+=2):(r.push(new ir(l,{})),o++)}return new Rt(r,{})}function Bh(n){const e={};return On(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Fu(new Rt([],{}),0,t))}),e}function od(n){const e={};return On(n,(t,r)=>e[r]=`${t}`),e}function jh(n,e,t){return n==t.path&&Mr(e,t.parameters)}class js{constructor(e,t){this.id=e,this.url=t}}class ad extends js{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Va extends js{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Uu extends js{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Sp extends js{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class $h extends js{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bm extends js{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lo extends js{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Uc extends js{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hh extends js{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class y0{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class jm{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class $m{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _0{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class v0{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ap{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hm{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class xp{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Gh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Gh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ud(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return ud(e,this._root).map(t=>t.value)}}function Gh(n,e){if(n===e.value)return e;for(const t of e.children){const r=Gh(n,t);if(r)return r}return null}function ud(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ud(n,t);if(r.length)return r.unshift(e),r}return[]}class ho{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function hs(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class zh extends xp{constructor(e,t){super(e),this.snapshot=t,Mp(this,e)}toString(){return this.snapshot.toString()}}function fs(n,e){const t=function ja(n,e){const l=new Zh([],{},{},"",{},Mt,e,null,n.root,-1,{});return new Gm("",new ho(l,[]))}(n,e),r=new hr([new ir("",{})]),o=new hr({}),u=new hr({}),l=new hr({}),m=new hr(""),v=new $a(r,o,l,m,u,Mt,e,t.root);return v.snapshot=t.root,new zh(new ho(v,[]),t)}class $a{constructor(e,t,r,o,u,l,m,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=l,this.component=m,this._futureSnapshot=v}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,pt.U)(e=>oo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,pt.U)(e=>oo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function qh(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function cd(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Zh{constructor(e,t,r,o,u,l,m,v,b,A,R,U){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=l,this.component=m,this.routeConfig=v,this._urlSegment=b,this._lastPathIndex=A,this._correctedLastPathIndex=U??A,this._resolve=R}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=oo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=oo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Gm extends xp{constructor(e,t){super(t),this.url=e,Mp(this,t)}toString(){return ld(this._root)}}function Mp(n,e){e.value._routerState=n,e.children.forEach(t=>Mp(n,t))}function ld(n){const e=n.children.length>0?` { ${n.children.map(ld).join(", ")} } `:"";return`${n.value}${e}`}function Vc(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Mr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Mr(e.params,t.params)||n.params.next(t.params),function Nn(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Mr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Mr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Vu(n,e){const t=Mr(n.params,e.params)&&function Zo(n,e){return Bs(n,e)&&n.every((t,r)=>Mr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Vu(n.parent,e.parent))}function dd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function Pp(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return dd(n,r,o);return dd(n,r)})}(n,e,t);return new ho(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(m=>dd(n,m)),l}}const r=function Wh(n){return new $a(new hr(n.url),new hr(n.params),new hr(n.queryParams),new hr(n.fragment),new hr(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>dd(n,u));return new ho(r,o)}}const Bc="ngNavigationCancelingError";function kp(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Ti(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=Np(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function Np(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Bc]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Bu(n){return jc(n)&&Ti(n.url)}function jc(n){return n&&n[Bc]}class zm{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Ha,this.attachRef=null}}let Ha=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new zm,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $c=!1;let Ln=(()=>{class n{constructor(t,r,o,u,l){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=o||Mt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new g.vHH(4012,$c);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new g.vHH(4012,$c);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new g.vHH(4012,$c);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new g.vHH(4013,$c);this._activatedRoute=t;const o=this.location,l=t._futureSnapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,v=new qm(t,m,o.injector);if(r&&function Zm(n){return!!n.resolveComponentFactory}(r)){const b=r.resolveComponentFactory(l);this.activated=o.createComponent(b,o.length,v)}else this.activated=o.createComponent(l,{index:o.length,injector:v,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Ha),g.Y36(g.s_b),g.$8M("name"),g.Y36(g.sBO),g.Y36(g.lqb))},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class qm{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===$a?this.route:e===Ha?this.childContexts:this.parent.get(e,t)}}let hd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},dependencies:[Ln],encapsulation:2}),n})();function Ga(n,e){return n.providers&&!n._injector&&(n._injector=(0,g.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function qa(n){const e=n.children&&n.children.map(qa),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Mt&&(t.component=hd),t}function ii(n){return n.outlet||Mt}function Yh(n,e){const t=n.filter(r=>ii(r)===e);return t.push(...n.filter(r=>ii(r)!==e)),t}function Hc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class si{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Vc(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=hs(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,o[l],r),delete o[l]}),On(o,(u,l)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const l=r.getContext(o.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=hs(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);if(r&&r.outlet){const l=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=hs(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=hs(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new Ap(u.value.snapshot))}),e.children.length&&this.forwardEvent(new _0(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(Vc(o),o===u)if(o.component){const l=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const l=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),l.children.onOutletReAttached(m.contexts),l.attachRef=m.componentRef,l.route=m.route.value,l.outlet&&l.outlet.attach(m.componentRef,m.route.value),Vc(m.route.value),this.activateChildRoutes(e,null,l.children)}else{const m=Hc(o.snapshot),v=m?.get(g._Vd)??null;l.attachRef=null,l.route=o,l.resolver=v,l.injector=m,l.outlet&&l.outlet.activateWith(o,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class Za{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Wa{constructor(e,t){this.component=e,this.route=t}}function b0(n,e,t){const r=n._root;return ju(r,e?e._root:null,t,[r.value])}function Ko(n,e,t){return(Hc(e)??t).get(n)}function ju(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=hs(e);return n.children.forEach(l=>{(function Jh(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const v=function Ka(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Bs(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Bs(n.url,e.url)||!Mr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Vu(n,e)||!Mr(n.queryParams,e.queryParams);default:return!Vu(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);v?o.canActivateChecks.push(new Za(r)):(u.data=l.data,u._resolvedData=l._resolvedData),ju(n,e,u.component?m?m.children:null:t,r,o),v&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new Wa(m.outlet.component,l))}else l&&zi(e,m,o),o.canActivateChecks.push(new Za(r)),ju(n,null,u.component?m?m.children:null:t,r,o)})(l,u[l.value.outlet],t,r.concat([l.value]),o),delete u[l.value.outlet]}),On(u,(l,m)=>zi(l,t.getContext(m),o)),o}function zi(n,e,t){const r=hs(n),o=n.value;On(r,(u,l)=>{zi(u,o.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Wa(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function Yo(n){return"function"==typeof n}function ps(n){return n instanceof ls||"EmptyError"===n?.name}const fo=Symbol("INITIAL_VALUE");function qi(){return $n(n=>Ma(n.map(e=>e.pipe(Ra(1),kc(fo)))).pipe((0,pt.U)(e=>{for(const t of e)if(!0!==t){if(t===fo)return fo;if(!1===t||t instanceof Er)return t}return!0}),ji(e=>e!==fo),Ra(1)))}function p(n){return(0,Su.z)((0,Ir.b)(e=>{if(Ti(e))throw kp(0,e)}),(0,pt.U)(e=>!0===e))}const S={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function P(n,e,t,r,o){const u=q(n,e,t);return u.matched?function w(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?$e(o.map(l=>{const m=n.get(l),v=function pd(n){return n&&Yo(n.canMatch)}(m)?m.canMatch(e,t):m(e,t);return Ii(v)})).pipe(qi(),p()):$e(!0)}(r=Ga(e,r),e,t).pipe((0,pt.U)(l=>!0===l?u:{...S})):$e(u)}function q(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...S}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||qo)(t,n,e);if(!o)return{...S};const u={};On(o.posParams,(m,v)=>{u[v]=m.path});const l=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:l,positionalParamSegments:o.posParams??{}}}function ue(n,e,t,r,o="corrected"){if(t.length>0&&function yt(n,e,t){return t.some(r=>Fn(n,e,r)&&ii(r)!==Mt)}(n,t,r)){const l=new Rt(e,function Qe(n,e,t,r){const o={};o[Mt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&ii(u)!==Mt){const l=new Rt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,o[ii(u)]=l}return o}(n,e,r,new Rt(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function dt(n,e,t){return t.some(r=>Fn(n,e,r))}(n,t,r)){const l=new Rt(n.segments,function Le(n,e,t,r,o,u){const l={};for(const m of r)if(Fn(n,t,m)&&!o[ii(m)]){const v=new Rt([],{});v._sourceSegment=n,v._segmentIndexShift="legacy"===u?n.segments.length:e.length,l[ii(m)]=v}return{...o,...l}}(n,e,t,r,n.children,o));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const u=new Rt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Fn(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Zi(n,e,t,r){return!!(ii(n)===r||r!==Mt&&Fn(e,t,n))&&("**"===n.path||q(e,n,t).matched)}function $u(n,e,t){return 0===e.length&&!n.children[t]}const Hu=!1;class Qo{constructor(e){this.segmentGroup=e||null}}class nf{constructor(e){this.urlTree=e}}function Gu(n){return Go(new Qo(n))}function zu(n){return Go(new nf(n))}class iy{constructor(e,t,r,o,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0}apply(){const e=ue(this.urlTree.root,[],[],this.config).segmentGroup,t=new Rt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Mt).pipe((0,pt.U)(u=>this.createUrlTree(bi(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ds(u=>{if(u instanceof nf)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Qo?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Mt).pipe((0,pt.U)(o=>this.createUrlTree(bi(o),e.queryParams,e.fragment))).pipe(ds(o=>{throw o instanceof Qo?this.noMatchError(o):o}))}noMatchError(e){return new g.vHH(4002,Hu)}createUrlTree(e,t,r){const o=Ua(e);return new Er(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,pt.U)(u=>new Rt([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,qt.D)(o).pipe(Hi(u=>{const l=r.children[u],m=Yh(t,u);return this.expandSegmentGroup(e,m,l,u).pipe((0,pt.U)(v=>({segment:v,outlet:u})))}),pr((u,l)=>(u[l.outlet]=l.segment,u),{}),so())}expandSegment(e,t,r,o,u,l){return(0,qt.D)(r).pipe(Hi(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,l).pipe(ds(b=>{if(b instanceof Qo)return $e(null);throw b}))),$i(m=>!!m),ds((m,v)=>{if(ps(m))return $u(t,o,u)?$e(new Rt([],{})):Gu(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,l,m){return Zi(o,t,u,l)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,l):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l):Gu(t):Gu(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?zu(u):this.lineralizeSegments(r,u).pipe((0,En.z)(l=>{const m=new Rt(l,{});return this.expandSegment(e,m,t,l,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){const{matched:m,consumedSegments:v,remainingSegments:b,positionalParamSegments:A}=q(t,o,u);if(!m)return Gu(t);const R=this.applyRedirectCommands(v,o.redirectTo,A);return o.redirectTo.startsWith("/")?zu(R):this.lineralizeSegments(o,R).pipe((0,En.z)(U=>this.expandSegment(e,t,r,U.concat(b),l,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){return"**"===r.path?(e=Ga(r,e),r.loadChildren?(r._loadedRoutes?$e({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,pt.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new Rt(o,{})))):$e(new Rt(o,{}))):P(t,r,o,e).pipe($n(({matched:l,consumedSegments:m,remainingSegments:v})=>l?this.getChildConfig(e=r._injector??e,r,o).pipe((0,En.z)(A=>{const R=A.injector??e,U=A.routes,{segmentGroup:Y,slicedSegments:te}=ue(t,m,v,U),Se=new Rt(Y.segments,Y.children);if(0===te.length&&Se.hasChildren())return this.expandChildren(R,U,Se).pipe((0,pt.U)(mt=>new Rt(m,mt)));if(0===U.length&&0===te.length)return $e(new Rt(m,{}));const xe=ii(r)===u;return this.expandSegment(R,Se,U,te,xe?Mt:u,!0).pipe((0,pt.U)(wt=>new Rt(m.concat(wt.segments),wt.children)))})):Gu(t)))}getChildConfig(e,t,r){return t.children?$e({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?$e({routes:t._loadedRoutes,injector:t._loadedInjector}):function h(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?$e(!0):$e(o.map(l=>{const m=n.get(l),v=function Qm(n){return n&&Yo(n.canLoad)}(m)?m.canLoad(e,t):m(e,t);return Ii(v)})).pipe(qi(),p())}(e,t,r).pipe((0,En.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,Ir.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function ry(n){return Go(Np(Hu,3))}())):$e({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return $e(r);if(o.numberOfChildren>1||!o.children[Mt])return Go(new g.vHH(4e3,Hu));o=o.children[Mt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Er(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return On(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let l={};return On(t.children,(m,v)=>{l[v]=this.createSegmentGroup(e,m,r,o)}),new Rt(u,l)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new g.vHH(4001,Hu);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}class C0{}class S0{constructor(e,t,r,o,u,l,m,v){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=o,this.url=u,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=m,this.urlSerializer=v}recognize(){const e=ue(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Mt).pipe((0,pt.U)(t=>{if(null===t)return null;const r=new Zh([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Mt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new ho(r,t),u=new Gm(this.url,o);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=qh(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o)}processChildren(e,t,r){return(0,qt.D)(Object.keys(r.children)).pipe(Hi(o=>{const u=r.children[o],l=Yh(t,o);return this.processSegmentGroup(e,l,u,o)}),pr((o,u)=>o&&u?(o.push(...u),o):null),function Pa(n,e=!1){return(0,kn.e)((t,r)=>{let o=0;t.subscribe((0,Pn.x)(r,u=>{const l=n(u,o++);(l||e)&&r.next(u),!l&&r.complete()}))})}(o=>null!==o),Jl(null),so(),(0,pt.U)(o=>{if(null===o)return null;const u=oy(o);return function sy(n){n.sort((e,t)=>e.value.outlet===Mt?-1:t.value.outlet===Mt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,o,u){return(0,qt.D)(t).pipe(Hi(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,o,u)),$i(l=>!!l),ds(l=>{if(ps(l))return $u(r,o,u)?$e([]):$e(null);throw l}))}processSegmentAgainstRoute(e,t,r,o,u){if(t.redirectTo||!Zi(t,r,o,u))return $e(null);let l;if("**"===t.path){const m=o.length>0?ka(o).parameters:{},v=Fp(r)+o.length;l=$e({snapshot:new Zh(o,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,R0(t),ii(t),t.component??t._loadedComponent??null,t,M0(r),v,P0(t),v),consumedSegments:[],remainingSegments:[]})}else l=P(r,t,o,e).pipe((0,pt.U)(({matched:m,consumedSegments:v,remainingSegments:b,parameters:A})=>{if(!m)return null;const R=Fp(r)+v.length;return{snapshot:new Zh(v,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,R0(t),ii(t),t.component??t._loadedComponent??null,t,M0(r),R,P0(t),R),consumedSegments:v,remainingSegments:b}}));return l.pipe($n(m=>{if(null===m)return $e(null);const{snapshot:v,consumedSegments:b,remainingSegments:A}=m;e=t._injector??e;const R=t._loadedInjector??e,U=function A0(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:Y,slicedSegments:te}=ue(r,b,A,U.filter(xe=>void 0===xe.redirectTo),this.relativeLinkResolution);if(0===te.length&&Y.hasChildren())return this.processChildren(R,U,Y).pipe((0,pt.U)(xe=>null===xe?null:[new ho(v,xe)]));if(0===U.length&&0===te.length)return $e([new ho(v,[])]);const Se=ii(t)===u;return this.processSegment(R,U,Y,te,Se?Mt:u).pipe((0,pt.U)(xe=>null===xe?null:[new ho(v,xe)]))}))}}function x0(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function oy(n){const e=[],t=new Set;for(const r of n){if(!x0(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=oy(r.children);e.push(new ho(r.value,o))}return e.filter(r=>!t.has(r))}function M0(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Fp(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function R0(n){return n.data||{}}function P0(n){return n.resolve||{}}const Up=Symbol("RouteTitle");function k0(n){return"string"==typeof n.title||null===n.title}function cy(n){return $n(e=>{const t=n(e);return t?(0,qt.D)(t).pipe((0,pt.U)(()=>e)):$e(e)})}let N0=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===Mt);return r}getResolvedTitleForRoute(t){return t.data[Up]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(ly)},providedIn:"root"}),n})(),ly=(()=>{class n extends N0{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(zl))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class FD{}class Ci extends class UD{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Vp=new g.OlP("",{providedIn:"root",factory:()=>({})}),Rr=new g.OlP("ROUTES");let Zc=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return $e(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ii(t.loadComponent()).pipe((0,Ir.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),zo(()=>{this.componentLoaders.delete(t)})),o=new Oh(r,()=>new wr.x).pipe(Nh());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return $e({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,pt.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let v,b,A=!1;Array.isArray(m)?b=m:(v=m.create(t).injector,b=Nc(v.get(Rr,[],g.XFs.Self|g.XFs.Optional)));return{routes:b.map(qa),injector:v}}),zo(()=>{this.childrenLoaders.delete(r)})),l=new Oh(u,()=>new wr.x).pipe(Nh());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Ii(t()).pipe((0,En.z)(r=>r instanceof g.YKP||Array.isArray(r)?$e(r):(0,qt.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3),g.LFG(g.Sil))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class hy{}class VD{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function O0(n){throw n}function BD(n,e,t){return e.parse("/")}const L0={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},jD={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function U0(){const n=(0,g.f3M)(ku),e=(0,g.f3M)(Ha),t=(0,g.f3M)(Ce),r=(0,g.f3M)(g.zs3),o=(0,g.f3M)(g.Sil),u=(0,g.f3M)(Rr,{optional:!0})??[],l=(0,g.f3M)(Vp,{optional:!0})??{},m=(0,g.f3M)(ly),v=(0,g.f3M)(N0,{optional:!0}),b=(0,g.f3M)(hy,{optional:!0}),A=(0,g.f3M)(FD,{optional:!0}),R=new Si(null,n,e,t,r,o,Nc(u));return b&&(R.urlHandlingStrategy=b),A&&(R.routeReuseStrategy=A),R.titleStrategy=v??m,function F0(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,R),R}let Si=(()=>{class n{constructor(t,r,o,u,l,m,v){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=v,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new wr.x,this.errorHandler=O0,this.malformedUriErrorHandler=BD,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>$e(void 0),this.urlHandlingStrategy=new VD,this.routeReuseStrategy=new Ci,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(Zc),this.configLoader.onLoadEndListener=U=>this.triggerEvent(new jm(U)),this.configLoader.onLoadStartListener=U=>this.triggerEvent(new y0(U)),this.ngModule=l.get(g.h0i),this.console=l.get(g.c2e);const R=l.get(g.R0b);this.isNgZoneEnabled=R instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(v),this.currentUrlTree=function Oa(){return new Er(new Rt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=fs(this.currentUrlTree,this.rootComponentType),this.transitions=new hr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ji(o=>0!==o.id),(0,pt.U)(o=>({...o,extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),$n(o=>{let u=!1,l=!1;return $e(o).pipe((0,Ir.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.rawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),$n(m=>{const v=this.browserUrlTree.toString(),b=!this.navigated||m.extractedUrl.toString()!==v||v!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return V0(m.source)&&(this.browserUrlTree=m.extractedUrl),$e(m).pipe($n(R=>{const U=this.transitions.getValue();return r.next(new ad(R.id,this.serializeUrl(R.extractedUrl),R.source,R.restoredState)),U!==this.transitions.getValue()?Fs.E:Promise.resolve(R)}),function T0(n,e,t,r){return $n(o=>function zc(n,e,t,r,o){return new iy(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,pt.U)(u=>({...o,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ir.b)(R=>{this.currentNavigation={...this.currentNavigation,finalUrl:R.urlAfterRedirects},o.urlAfterRedirects=R.urlAfterRedirects}),function PD(n,e,t,r,o,u){return(0,En.z)(l=>function RD(n,e,t,r,o,u,l="emptyOnly",m="legacy"){return new S0(n,e,t,r,o,l,m,u).recognize().pipe($n(v=>null===v?function fA(n){return new ti.y(e=>e.error(n))}(new C0):$e(v)))}(n,e,t,l.urlAfterRedirects,r.serialize(l.urlAfterRedirects),r,o,u).pipe((0,pt.U)(m=>({...l,targetSnapshot:m}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ir.b)(R=>{if(o.targetSnapshot=R.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!R.extras.skipLocationChange){const Y=this.urlHandlingStrategy.merge(R.urlAfterRedirects,R.rawUrl);this.setBrowserUrl(Y,R)}this.browserUrlTree=R.urlAfterRedirects}const U=new $h(R.id,this.serializeUrl(R.extractedUrl),this.serializeUrl(R.urlAfterRedirects),R.targetSnapshot);r.next(U)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:U,extractedUrl:Y,source:te,restoredState:Se,extras:xe}=m,gt=new ad(U,this.serializeUrl(Y),te,Se);r.next(gt);const wt=fs(Y,this.rootComponentType).snapshot;return $e(o={...m,targetSnapshot:wt,urlAfterRedirects:Y,extras:{...xe,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=m.rawUrl,m.resolve(null),Fs.E}),(0,Ir.b)(m=>{const v=new Bm(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}),(0,pt.U)(m=>o={...m,guards:b0(m.targetSnapshot,m.currentSnapshot,this.rootContexts)}),function Op(n,e){return(0,En.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?$e({...t,guardsResult:!0}):function Xm(n,e,t,r){return(0,qt.D)(n).pipe((0,En.z)(o=>function y(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?$e(u.map(m=>{const v=Ko(m,e,o);return Ii(function Kn(n){return n&&Yo(n.canDeactivate)}(v)?v.canDeactivate(n,e,t,r):v(n,e,t,r)).pipe($i())})).pipe(qi()):$e(!0)}(o.component,o.route,t,e,r)),$i(o=>!0!==o,!0))}(l,r,o,n).pipe((0,En.z)(m=>m&&function fd(n){return"boolean"==typeof n}(m)?function ef(n,e,t,r){return(0,qt.D)(e).pipe(Hi(o=>Ls(function tf(n,e){return null!==n&&e&&e(new $m(n)),$e(!0)}(o.route.parent,r),function ey(n,e){return null!==n&&e&&e(new v0(n)),$e(!0)}(o.route,r),function Lp(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function Qh(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Ho(()=>$e(l.guards.map(v=>{const b=Ko(v,l.node,t);return Ii(function Gc(n){return n&&Yo(n.canActivateChild)}(b)?b.canActivateChild(r,n):b(r,n)).pipe($i())})).pipe(qi())));return $e(u).pipe(qi())}(n,o.path,t),function ty(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return $e(!0);const o=r.map(u=>Ho(()=>{const l=Ko(u,e,t);return Ii(function Xh(n){return n&&Yo(n.canActivate)}(l)?l.canActivate(e,n):l(e,n)).pipe($i())}));return $e(o).pipe(qi())}(n,o.route,t))),$i(o=>!0!==o,!0))}(r,u,n,e):$e(m)),(0,pt.U)(m=>({...t,guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Ir.b)(m=>{if(o.guardsResult=m.guardsResult,Ti(m.guardsResult))throw kp(0,m.guardsResult);const v=new lo(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(v)}),ji(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",3),!1)),cy(m=>{if(m.guards.canActivateChecks.length)return $e(m).pipe((0,Ir.b)(v=>{const b=new Uc(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(b)}),$n(v=>{let b=!1;return $e(v).pipe(function kD(n,e){return(0,En.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return $e(t);let u=0;return(0,qt.D)(o).pipe(Hi(l=>function ND(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!k0(o)&&(u[Up]=o.title),function OD(n,e,t,r){const o=function LD(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return $e({});const u={};return(0,qt.D)(o).pipe((0,En.z)(l=>function uy(n,e,t,r){const o=Ko(n,e,r);return Ii(o.resolve?o.resolve(e,t):o(e,t))}(n[l],e,t,r).pipe($i(),(0,Ir.b)(m=>{u[l]=m}))),Au(1),function xu(n){return(0,pt.U)(()=>n)}(u),ds(l=>ps(l)?Fs.E:Go(l)))}(u,n,e,r).pipe((0,pt.U)(l=>(n._resolvedData=l,n.data=qh(n,t).resolve,o&&k0(o)&&(n.data[Up]=o.title),null)))}(l.route,r,n,e)),(0,Ir.b)(()=>u++),Au(1),(0,En.z)(l=>u===o.length?$e(t):Fs.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ir.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(v),this.cancelNavigationTransition(v,"",2))}}))}),(0,Ir.b)(v=>{const b=new Hh(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(b)}))}),cy(m=>{const v=b=>{const A=[];b.routeConfig?.loadComponent&&!b.routeConfig._loadedComponent&&A.push(this.configLoader.loadComponent(b.routeConfig).pipe((0,Ir.b)(R=>{b.component=R}),(0,pt.U)(()=>{})));for(const R of b.children)A.push(...v(R));return A};return Ma(v(m.targetSnapshot.root)).pipe(Jl(),Ra(1))}),cy(()=>this.afterPreactivation()),(0,pt.U)(m=>{const v=function Rp(n,e,t){const r=dd(n,e._root,t?t._root:void 0);return new zh(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return o={...m,targetRouterState:v}}),(0,Ir.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,pt.U)(r=>(new si(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Ir.b)({next(){u=!0},complete(){u=!0}}),zo(()=>{u||l||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),ds(m=>{if(l=!0,jc(m)){Bu(m)||(this.navigated=!0,this.restoreHistory(o,!0));const v=new Uu(o.id,this.serializeUrl(o.extractedUrl),m.message,m.cancellationCode);if(r.next(v),Bu(m)){const b=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),A={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||V0(o.source)};this.scheduleNavigation(b,"imperative",null,A,{resolve:o.resolve,reject:o.reject,promise:o.promise})}else o.resolve(!1)}else{this.restoreHistory(o,!0);const v=new Sp(o.id,this.serializeUrl(o.extractedUrl),m,o.targetSnapshot??void 0);r.next(v);try{o.resolve(this.errorHandler(m))}catch(b){o.reject(b)}}return Fs.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const o={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const m={...u};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(o.state=m)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,u,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(qa),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:l,queryParamsHandling:m,preserveFragment:v}=r,b=o||this.routerState.root,A=v?this.currentUrlTree.fragment:l;let R=null;switch(m){case"merge":R={...this.currentUrlTree.queryParams,...u};break;case"preserve":R=this.currentUrlTree.queryParams;break;default:R=u||null}return null!==R&&(R=this.removeEmptyProps(R)),Fh(b,this.currentUrlTree,t,R,A??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Ti(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function $D(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new g.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...L0}:!1===r?{...jD}:r,Ti(t))return Ru(this.currentUrlTree,t,o);const u=this.parseUrl(t);return Ru(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Va(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,l){if(this.disposed)return Promise.resolve(!1);let m,v,b;l?(m=l.resolve,v=l.reject,b=l.promise):b=new Promise((U,Y)=>{m=U,v=Y});const A=++this.navigationId;let R;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),R=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):R=0,this.setTransition({id:A,targetPageId:R,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:m,reject:v,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(U=>Promise.reject(U))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===o?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,o){const u=new Uu(t.id,this.serializeUrl(t.extractedUrl),r,o);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:function(){return U0()},providedIn:"root"}),n})();function V0(n){return"imperative"!==n}class B0{}let HD=(()=>{class n{constructor(t,r,o,u,l){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(ji(t=>t instanceof Va),Hi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,g.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,m=u._loadedInjector??l;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?o.push(this.preloadConfig(l,u)):(u.children||u._loadedRoutes)&&o.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,qt.D)(o).pipe((0,ni.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):$e(null);const u=o.pipe((0,En.z)(l=>null===l?$e(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,qt.D)([u,l]).pipe((0,ni.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Si),g.LFG(g.Sil),g.LFG(g.lqb),g.LFG(B0),g.LFG(Zc))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const gy=new g.OlP("");let gA=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ad?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Va&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Hm&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Hm(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const $p=new g.OlP("ROUTER_FORROOT_GUARD"),$0=new g.OlP(""),H0=[Ce,{provide:ku,useClass:Nu},{provide:Si,useFactory:U0},Ha,{provide:$a,useFactory:function GD(n){return n.routerState.root},deps:[Si]},Zc];function rf(){return new g.PXZ("Router",Si)}let G0=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[H0,[],zD(t),{provide:$p,useFactory:q0,deps:[[Si,new g.FiY,new g.tp0]]},{provide:Vp,useValue:r||{}},r?.useHash?{provide:me,useClass:rt}:{provide:me,useClass:Ye},{provide:gy,useFactory:()=>{const n=(0,g.f3M)(Si),e=(0,g.f3M)(Qs),t=(0,g.f3M)(Vp);return t.scrollOffset&&e.setOffset(t.scrollOffset),new gA(n,e,t)}},r?.preloadingStrategy?YD(r.preloadingStrategy):[],{provide:g.PXZ,multi:!0,useFactory:rf},r?.initialNavigation?Z0(r):[],[{provide:Hp,useFactory:_d},{provide:g.tb,multi:!0,useExisting:Hp}]]}}static forChild(t){return{ngModule:n,providers:[zD(t)]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG($p,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function q0(n){return"guarded"}function zD(n){return[{provide:Rr,multi:!0,useValue:n}]}function _d(){const n=(0,g.f3M)(g.zs3);return e=>{const t=n.get(g.z2F);if(e!==t.components[0])return;const r=n.get(Si),o=n.get(Gp);1===n.get(_y)&&r.initialNavigation(),n.get($0,null,g.XFs.Optional)?.setUpPreloading(),n.get(gy,null,g.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.next(),o.complete()}}const Hp=new g.OlP("");function Z0(n){return["disabled"===n.initialNavigation?[{provide:g.ip1,multi:!0,useFactory:()=>{const n=(0,g.f3M)(Si);return()=>{n.setUpLocationChangeListener()}}},{provide:_y,useValue:2}]:[],"enabledBlocking"===n.initialNavigation?[{provide:_y,useValue:0},{provide:g.ip1,multi:!0,deps:[g.zs3],useFactory:n=>{const e=n.get(B,Promise.resolve(null));let t=!1;return()=>e.then(()=>new Promise(o=>{const u=n.get(Si),l=n.get(Gp);(function r(o){n.get(Si).events.pipe(ji(l=>l instanceof Va||l instanceof Uu||l instanceof Sp),(0,pt.U)(l=>l instanceof Va||l instanceof Uu&&(0===l.code||1===l.code)&&null),ji(l=>null!==l),Ra(1)).subscribe(()=>{o()})})(()=>{o(!0),t=!0}),u.afterPreactivation=()=>(o(!0),t||l.closed?$e(void 0):l),u.initialNavigation()}))}}]:[]]}const Gp=new g.OlP("",{factory:()=>new wr.x}),_y=new g.OlP("",{providedIn:"root",factory:()=>1});function YD(n){return[HD,{provide:$0,useExisting:HD},{provide:B0,useExisting:n}]}const W0=[];let vy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[G0.forRoot(W0),G0]}),n})();function K0(n,e){1&n&&(g.TgZ(0,"pre"),g._uU(1,"ng generate component xyz"),g.qZA())}function wy(n,e){1&n&&(g.TgZ(0,"pre"),g._uU(1,"ng add @angular/material"),g.qZA())}function QD(n,e){1&n&&(g.TgZ(0,"pre"),g._uU(1,"ng add @angular/pwa"),g.qZA())}function JD(n,e){1&n&&(g.TgZ(0,"pre"),g._uU(1,"ng add _____"),g.qZA())}function Y0(n,e){1&n&&(g.TgZ(0,"pre"),g._uU(1,"ng test"),g.qZA())}function Q0(n,e){1&n&&(g.TgZ(0,"pre"),g._uU(1,"ng build"),g.qZA())}let Wc=(()=>{class n{constructor(){this.title="vet"}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:152,vars:7,consts:[["role","banner",1,"toolbar"],["width","40","alt","Angular Logo","src","data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNTAgMjUwIj4KICAgIDxwYXRoIGZpbGw9IiNERDAwMzEiIGQ9Ik0xMjUgMzBMMzEuOSA2My4ybDE0LjIgMTIzLjFMMTI1IDIzMGw3OC45LTQzLjcgMTQuMi0xMjMuMXoiIC8+CiAgICA8cGF0aCBmaWxsPSIjQzMwMDJGIiBkPSJNMTI1IDMwdjIyLjItLjFWMjMwbDc4LjktNDMuNyAxNC4yLTEyMy4xTDEyNSAzMHoiIC8+CiAgICA8cGF0aCAgZmlsbD0iI0ZGRkZGRiIgZD0iTTEyNSA1Mi4xTDY2LjggMTgyLjZoMjEuN2wxMS43LTI5LjJoNDkuNGwxMS43IDI5LjJIMTgzTDEyNSA1Mi4xem0xNyA4My4zaC0zNGwxNy00MC45IDE3IDQwLjl6IiAvPgogIDwvc3ZnPg=="],[1,"spacer"],["aria-label","Angular on twitter","target","_blank","rel","noopener","href","https://twitter.com/angular","title","Twitter"],["id","twitter-logo","height","24","data-name","Logo","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 400 400"],["width","400","height","400","fill","none"],["d","M153.62,301.59c94.34,0,145.94-78.16,145.94-145.94,0-2.22,0-4.43-.15-6.63A104.36,104.36,0,0,0,325,122.47a102.38,102.38,0,0,1-29.46,8.07,51.47,51.47,0,0,0,22.55-28.37,102.79,102.79,0,0,1-32.57,12.45,51.34,51.34,0,0,0-87.41,46.78A145.62,145.62,0,0,1,92.4,107.81a51.33,51.33,0,0,0,15.88,68.47A50.91,50.91,0,0,1,85,169.86c0,.21,0,.43,0,.65a51.31,51.31,0,0,0,41.15,50.28,51.21,51.21,0,0,1-23.16.88,51.35,51.35,0,0,0,47.92,35.62,102.92,102.92,0,0,1-63.7,22A104.41,104.41,0,0,1,75,278.55a145.21,145.21,0,0,0,78.62,23","fill","#fff"],["aria-label","Angular on YouTube","target","_blank","rel","noopener","href","https://youtube.com/angular","title","YouTube"],["id","youtube-logo","height","24","width","24","data-name","Logo","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","#fff"],["d","M0 0h24v24H0V0z","fill","none"],["d","M21.58 7.19c-.23-.86-.91-1.54-1.77-1.77C18.25 5 12 5 12 5s-6.25 0-7.81.42c-.86.23-1.54.91-1.77 1.77C2 8.75 2 12 2 12s0 3.25.42 4.81c.23.86.91 1.54 1.77 1.77C5.75 19 12 19 12 19s6.25 0 7.81-.42c.86-.23 1.54-.91 1.77-1.77C22 15.25 22 12 22 12s0-3.25-.42-4.81zM10 15V9l5.2 3-5.2 3z"],["role","main",1,"content"],[1,"card","highlight-card","card-small"],["id","rocket","xmlns","http://www.w3.org/2000/svg","width","101.678","height","101.678","viewBox","0 0 101.678 101.678"],["id","Group_83","data-name","Group 83","transform","translate(-141 -696)"],["id","Ellipse_8","data-name","Ellipse 8","cx","50.839","cy","50.839","r","50.839","transform","translate(141 696)","fill","#dd0031"],["id","Group_47","data-name","Group 47","transform","translate(165.185 720.185)"],["id","Path_33","data-name","Path 33","d","M3.4,42.615a3.084,3.084,0,0,0,3.553,3.553,21.419,21.419,0,0,0,12.215-6.107L9.511,30.4A21.419,21.419,0,0,0,3.4,42.615Z","transform","translate(0.371 3.363)","fill","#fff"],["id","Path_34","data-name","Path 34","d","M53.3,3.221A3.09,3.09,0,0,0,50.081,0,48.227,48.227,0,0,0,18.322,13.437c-6-1.666-14.991-1.221-18.322,7.218A33.892,33.892,0,0,1,9.439,25.1l-.333.666a3.013,3.013,0,0,0,.555,3.553L23.985,43.641a2.9,2.9,0,0,0,3.553.555l.666-.333A33.892,33.892,0,0,1,32.647,53.3c8.55-3.664,8.884-12.326,7.218-18.322A48.227,48.227,0,0,0,53.3,3.221ZM34.424,9.772a6.439,6.439,0,1,1,9.106,9.106,6.368,6.368,0,0,1-9.106,0A6.467,6.467,0,0,1,34.424,9.772Z","transform","translate(0 0.005)","fill","#fff"],["id","rocket-smoke","xmlns","http://www.w3.org/2000/svg","width","516.119","height","1083.632","viewBox","0 0 516.119 1083.632"],["id","Path_40","data-name","Path 40","d","M644.6,141S143.02,215.537,147.049,870.207s342.774,201.755,342.774,201.755S404.659,847.213,388.815,762.2c-27.116-145.51-11.551-384.124,271.9-609.1C671.15,139.365,644.6,141,644.6,141Z","transform","translate(-147.025 -140.939)","fill","#f5f5f5"],[1,"card-container"],["target","_blank","rel","noopener","href","https://angular.io/tutorial",1,"card"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24",1,"material-icons"],["d","M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82zM12 3L1 9l11 6 9-4.91V17h2V9L12 3z"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["target","_blank","rel","noopener","href","https://angular.io/cli",1,"card"],["d","M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"],["target","_blank","rel","noopener","href","https://material.angular.io",1,"card"],["xmlns","http://www.w3.org/2000/svg","width","21.813","height","23.453","viewBox","0 0 179.2 192.7",2,"margin-right","8px"],["fill","#ffa726","d","M89.4 0 0 32l13.5 118.4 75.9 42.3 76-42.3L179.2 32 89.4 0z"],["fill","#fb8c00","d","M89.4 0v192.7l76-42.3L179.2 32 89.4 0z"],["fill","#ffe0b2","d","m102.9 146.3-63.3-30.5 36.3-22.4 63.7 30.6-36.7 22.3z"],["fill","#fff3e0","d","M102.9 122.8 39.6 92.2l36.3-22.3 63.7 30.6-36.7 22.3z"],["fill","#fff","d","M102.9 99.3 39.6 68.7l36.3-22.4 63.7 30.6-36.7 22.4z"],["target","_blank","rel","noopener","href","https://blog.angular.io/",1,"card"],["d","M13.5.67s.74 2.65.74 4.8c0 2.06-1.35 3.73-3.41 3.73-2.07 0-3.63-1.67-3.63-3.73l.03-.36C5.21 7.51 4 10.62 4 14c0 4.42 3.58 8 8 8s8-3.58 8-8C20 8.61 17.41 3.8 13.5.67zM11.71 19c-1.78 0-3.22-1.4-3.22-3.14 0-1.62 1.05-2.76 2.81-3.12 1.77-.36 3.6-1.21 4.62-2.58.39 1.29.59 2.65.59 4.04 0 2.65-2.15 4.8-4.8 4.8z"],["target","_blank","rel","noopener","href","https://angular.io/devtools/",1,"card"],["xmlns","http://www.w3.org/2000/svg","enable-background","new 0 0 24 24","height","24px","viewBox","0 0 24 24","width","24px","fill","#000000",1,"material-icons"],["fill","none","height","24","width","24"],["d","M14.73,13.31C15.52,12.24,16,10.93,16,9.5C16,5.91,13.09,3,9.5,3S3,5.91,3,9.5C3,13.09,5.91,16,9.5,16 c1.43,0,2.74-0.48,3.81-1.27L19.59,21L21,19.59L14.73,13.31z M9.5,14C7.01,14,5,11.99,5,9.5S7.01,5,9.5,5S14,7.01,14,9.5 S11.99,14,9.5,14z"],["points","10.29,8.44 9.5,6 8.71,8.44 6.25,8.44 8.26,10.03 7.49,12.5 9.5,10.97 11.51,12.5 10.74,10.03 12.75,8.44"],["type","hidden"],["selection",""],["tabindex","0",1,"card","card-small",3,"click"],["d","M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"],[1,"terminal",3,"ngSwitch"],[4,"ngSwitchDefault"],[4,"ngSwitchCase"],["title","Find a Local Meetup","href","https://www.meetup.com/find/?keywords=angular","target","_blank","rel","noopener",1,"circle-link"],["xmlns","http://www.w3.org/2000/svg","width","24.607","height","23.447","viewBox","0 0 24.607 23.447"],["id","logo--mSwarm","d","M21.221,14.95A4.393,4.393,0,0,1,17.6,19.281a4.452,4.452,0,0,1-.8.069c-.09,0-.125.035-.154.117a2.939,2.939,0,0,1-2.506,2.091,2.868,2.868,0,0,1-2.248-.624.168.168,0,0,0-.245-.005,3.926,3.926,0,0,1-2.589.741,4.015,4.015,0,0,1-3.7-3.347,2.7,2.7,0,0,1-.043-.38c0-.106-.042-.146-.143-.166a3.524,3.524,0,0,1-1.516-.69A3.623,3.623,0,0,1,2.23,14.557a3.66,3.66,0,0,1,1.077-3.085.138.138,0,0,0,.026-.2,3.348,3.348,0,0,1-.451-1.821,3.46,3.46,0,0,1,2.749-3.28.44.44,0,0,0,.355-.281,5.072,5.072,0,0,1,3.863-3,5.028,5.028,0,0,1,3.555.666.31.31,0,0,0,.271.03A4.5,4.5,0,0,1,18.3,4.7a4.4,4.4,0,0,1,1.334,2.751,3.658,3.658,0,0,1,.022.706.131.131,0,0,0,.1.157,2.432,2.432,0,0,1,1.574,1.645,2.464,2.464,0,0,1-.7,2.616c-.065.064-.051.1-.014.166A4.321,4.321,0,0,1,21.221,14.95ZM13.4,14.607a2.09,2.09,0,0,0,1.409,1.982,4.7,4.7,0,0,0,1.275.221,1.807,1.807,0,0,0,.9-.151.542.542,0,0,0,.321-.545.558.558,0,0,0-.359-.534,1.2,1.2,0,0,0-.254-.078c-.262-.047-.526-.086-.787-.138a.674.674,0,0,1-.617-.75,3.394,3.394,0,0,1,.218-1.109c.217-.658.509-1.286.79-1.918a15.609,15.609,0,0,0,.745-1.86,1.95,1.95,0,0,0,.06-1.073,1.286,1.286,0,0,0-1.051-1.033,1.977,1.977,0,0,0-1.521.2.339.339,0,0,1-.446-.042c-.1-.092-.2-.189-.307-.284a1.214,1.214,0,0,0-1.643-.061,7.563,7.563,0,0,1-.614.512A.588.588,0,0,1,10.883,8c-.215-.115-.437-.215-.659-.316a2.153,2.153,0,0,0-.695-.248A2.091,2.091,0,0,0,7.541,8.562a9.915,9.915,0,0,0-.405.986c-.559,1.545-1.015,3.123-1.487,4.7a1.528,1.528,0,0,0,.634,1.777,1.755,1.755,0,0,0,1.5.211,1.35,1.35,0,0,0,.824-.858c.543-1.281,1.032-2.584,1.55-3.875.142-.355.28-.712.432-1.064a.548.548,0,0,1,.851-.24.622.622,0,0,1,.185.539,2.161,2.161,0,0,1-.181.621c-.337.852-.68,1.7-1.018,2.552a2.564,2.564,0,0,0-.173.528.624.624,0,0,0,.333.71,1.073,1.073,0,0,0,.814.034,1.22,1.22,0,0,0,.657-.655q.758-1.488,1.511-2.978.35-.687.709-1.37a1.073,1.073,0,0,1,.357-.434.43.43,0,0,1,.463-.016.373.373,0,0,1,.153.387.7.7,0,0,1-.057.236c-.065.157-.127.316-.2.469-.42.883-.846,1.763-1.262,2.648A2.463,2.463,0,0,0,13.4,14.607Zm5.888,6.508a1.09,1.09,0,0,0-2.179.006,1.09,1.09,0,0,0,2.179-.006ZM1.028,12.139a1.038,1.038,0,1,0,.01-2.075,1.038,1.038,0,0,0-.01,2.075ZM13.782.528a1.027,1.027,0,1,0-.011,2.055A1.027,1.027,0,0,0,13.782.528ZM22.21,6.95a.882.882,0,0,0-1.763.011A.882.882,0,0,0,22.21,6.95ZM4.153,4.439a.785.785,0,1,0,.787-.78A.766.766,0,0,0,4.153,4.439Zm8.221,18.22a.676.676,0,1,0-.677.666A.671.671,0,0,0,12.374,22.658ZM22.872,12.2a.674.674,0,0,0-.665.665.656.656,0,0,0,.655.643.634.634,0,0,0,.655-.644A.654.654,0,0,0,22.872,12.2ZM7.171-.123A.546.546,0,0,0,6.613.43a.553.553,0,1,0,1.106,0A.539.539,0,0,0,7.171-.123ZM24.119,9.234a.507.507,0,0,0-.493.488.494.494,0,0,0,.494.494.48.48,0,0,0,.487-.483A.491.491,0,0,0,24.119,9.234Zm-19.454,9.7a.5.5,0,0,0-.488-.488.491.491,0,0,0-.487.5.483.483,0,0,0,.491.479A.49.49,0,0,0,4.665,18.936Z","transform","translate(0 0.123)","fill","#f64060"],["title","Join the Conversation on Discord","href","https://discord.gg/angular","target","_blank","rel","noopener",1,"circle-link"],["xmlns","http://www.w3.org/2000/svg","width","26","height","26","viewBox","0 0 245 240"],["d","M104.4 103.9c-5.7 0-10.2 5-10.2 11.1s4.6 11.1 10.2 11.1c5.7 0 10.2-5 10.2-11.1.1-6.1-4.5-11.1-10.2-11.1zM140.9 103.9c-5.7 0-10.2 5-10.2 11.1s4.6 11.1 10.2 11.1c5.7 0 10.2-5 10.2-11.1s-4.5-11.1-10.2-11.1z"],["d","M189.5 20h-134C44.2 20 35 29.2 35 40.6v135.2c0 11.4 9.2 20.6 20.5 20.6h113.4l-5.3-18.5 12.8 11.9 12.1 11.2 21.5 19V40.6c0-11.4-9.2-20.6-20.5-20.6zm-38.6 130.6s-3.6-4.3-6.6-8.1c13.1-3.7 18.1-11.9 18.1-11.9-4.1 2.7-8 4.6-11.5 5.9-5 2.1-9.8 3.5-14.5 4.3-9.6 1.8-18.4 1.3-25.9-.1-5.7-1.1-10.6-2.7-14.7-4.3-2.3-.9-4.8-2-7.3-3.4-.3-.2-.6-.3-.9-.5-.2-.1-.3-.2-.4-.3-1.8-1-2.8-1.7-2.8-1.7s4.8 8 17.5 11.8c-3 3.8-6.7 8.3-6.7 8.3-22.1-.7-30.5-15.2-30.5-15.2 0-32.2 14.4-58.3 14.4-58.3 14.4-10.8 28.1-10.5 28.1-10.5l1 1.2c-18 5.2-26.3 13.1-26.3 13.1s2.2-1.2 5.9-2.9c10.7-4.7 19.2-6 22.7-6.3.6-.1 1.1-.2 1.7-.2 6.1-.8 13-1 20.2-.2 9.5 1.1 19.7 3.9 30.1 9.6 0 0-7.9-7.5-24.9-12.7l1.4-1.6s13.7-.3 28.1 10.5c0 0 14.4 26.1 14.4 58.3 0 0-8.5 14.5-30.6 15.2z"],["href","https://github.com/angular/angular","target","_blank","rel","noopener"],[1,"github-star-badge"],["d","M0 0h24v24H0z","fill","none"],["d","M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z","fill","#1976d2"],["id","clouds","xmlns","http://www.w3.org/2000/svg","width","2611.084","height","485.677","viewBox","0 0 2611.084 485.677"],["id","Path_39","data-name","Path 39","d","M2379.709,863.793c10-93-77-171-168-149-52-114-225-105-264,15-75,3-140,59-152,133-30,2.83-66.725,9.829-93.5,26.25-26.771-16.421-63.5-23.42-93.5-26.25-12-74-77-130-152-133-39-120-212-129-264-15-54.084-13.075-106.753,9.173-138.488,48.9-31.734-39.726-84.4-61.974-138.487-48.9-52-114-225-105-264,15a162.027,162.027,0,0,0-103.147,43.044c-30.633-45.365-87.1-72.091-145.206-58.044-52-114-225-105-264,15-75,3-140,59-152,133-53,5-127,23-130,83-2,42,35,72,70,86,49,20,106,18,157,5a165.625,165.625,0,0,0,120,0c47,94,178,113,251,33,61.112,8.015,113.854-5.72,150.492-29.764a165.62,165.62,0,0,0,110.861-3.236c47,94,178,113,251,33,31.385,4.116,60.563,2.495,86.487-3.311,25.924,5.806,55.1,7.427,86.488,3.311,73,80,204,61,251-33a165.625,165.625,0,0,0,120,0c51,13,108,15,157-5a147.188,147.188,0,0,0,33.5-18.694,147.217,147.217,0,0,0,33.5,18.694c49,20,106,18,157,5a165.625,165.625,0,0,0,120,0c47,94,178,113,251,33C2446.709,1093.793,2554.709,922.793,2379.709,863.793Z","transform","translate(142.69 -634.312)","fill","#eee"]],template:function(t,r){if(1&t){const o=g.EpF();g.TgZ(0,"div",0),g._UZ(1,"img",1),g.TgZ(2,"span"),g._uU(3,"Welcome"),g.qZA(),g._UZ(4,"div",2),g.TgZ(5,"a",3),g.O4$(),g.TgZ(6,"svg",4),g._UZ(7,"rect",5)(8,"path",6),g.qZA()(),g.kcU(),g.TgZ(9,"a",7),g.O4$(),g.TgZ(10,"svg",8),g._UZ(11,"path",9)(12,"path",10),g.qZA()()(),g.kcU(),g.TgZ(13,"div",11)(14,"div",12),g.O4$(),g.TgZ(15,"svg",13)(16,"title"),g._uU(17,"Rocket Ship"),g.qZA(),g.TgZ(18,"g",14),g._UZ(19,"circle",15),g.TgZ(20,"g",16),g._UZ(21,"path",17)(22,"path",18),g.qZA()()(),g.kcU(),g.TgZ(23,"span"),g._uU(24),g.qZA(),g.O4$(),g.TgZ(25,"svg",19)(26,"title"),g._uU(27,"Rocket Ship Smoke"),g.qZA(),g._UZ(28,"path",20),g.qZA()(),g.kcU(),g.TgZ(29,"h2"),g._uU(30,"Resources"),g.qZA(),g.TgZ(31,"p"),g._uU(32,"Here are some links to help you get started:"),g.qZA(),g.TgZ(33,"div",21)(34,"a",22),g.O4$(),g.TgZ(35,"svg",23),g._UZ(36,"path",24),g.qZA(),g.kcU(),g.TgZ(37,"span"),g._uU(38,"Learn Angular"),g.qZA(),g.O4$(),g.TgZ(39,"svg",23),g._UZ(40,"path",25),g.qZA()(),g.kcU(),g.TgZ(41,"a",26),g.O4$(),g.TgZ(42,"svg",23),g._UZ(43,"path",27),g.qZA(),g.kcU(),g.TgZ(44,"span"),g._uU(45,"CLI Documentation"),g.qZA(),g.O4$(),g.TgZ(46,"svg",23),g._UZ(47,"path",25),g.qZA()(),g.kcU(),g.TgZ(48,"a",28),g.O4$(),g.TgZ(49,"svg",29),g._UZ(50,"path",30)(51,"path",31)(52,"path",32)(53,"path",33)(54,"path",34),g.qZA(),g.kcU(),g.TgZ(55,"span"),g._uU(56,"Angular Material"),g.qZA(),g.O4$(),g.TgZ(57,"svg",23),g._UZ(58,"path",25),g.qZA()(),g.kcU(),g.TgZ(59,"a",35),g.O4$(),g.TgZ(60,"svg",23),g._UZ(61,"path",36),g.qZA(),g.kcU(),g.TgZ(62,"span"),g._uU(63,"Angular Blog"),g.qZA(),g.O4$(),g.TgZ(64,"svg",23),g._UZ(65,"path",25),g.qZA()(),g.kcU(),g.TgZ(66,"a",37),g.O4$(),g.TgZ(67,"svg",38)(68,"g"),g._UZ(69,"rect",39),g.qZA(),g.TgZ(70,"g")(71,"g"),g._UZ(72,"path",40)(73,"polygon",41),g.qZA()()(),g.kcU(),g.TgZ(74,"span"),g._uU(75,"Angular DevTools"),g.qZA(),g.O4$(),g.TgZ(76,"svg",23),g._UZ(77,"path",25),g.qZA()()(),g.kcU(),g.TgZ(78,"h2"),g._uU(79,"Next Steps"),g.qZA(),g.TgZ(80,"p"),g._uU(81,"What do you want to do next with your app?"),g.qZA(),g._UZ(82,"input",42,43),g.TgZ(84,"div",21)(85,"button",44),g.NdJ("click",function(){g.CHM(o);const l=g.MAs(83);return g.KtG(l.value="component")}),g.O4$(),g.TgZ(86,"svg",23),g._UZ(87,"path",45),g.qZA(),g.kcU(),g.TgZ(88,"span"),g._uU(89,"New Component"),g.qZA()(),g.TgZ(90,"button",44),g.NdJ("click",function(){g.CHM(o);const l=g.MAs(83);return g.KtG(l.value="material")}),g.O4$(),g.TgZ(91,"svg",23),g._UZ(92,"path",45),g.qZA(),g.kcU(),g.TgZ(93,"span"),g._uU(94,"Angular Material"),g.qZA()(),g.TgZ(95,"button",44),g.NdJ("click",function(){g.CHM(o);const l=g.MAs(83);return g.KtG(l.value="pwa")}),g.O4$(),g.TgZ(96,"svg",23),g._UZ(97,"path",45),g.qZA(),g.kcU(),g.TgZ(98,"span"),g._uU(99,"Add PWA Support"),g.qZA()(),g.TgZ(100,"button",44),g.NdJ("click",function(){g.CHM(o);const l=g.MAs(83);return g.KtG(l.value="dependency")}),g.O4$(),g.TgZ(101,"svg",23),g._UZ(102,"path",45),g.qZA(),g.kcU(),g.TgZ(103,"span"),g._uU(104,"Add Dependency"),g.qZA()(),g.TgZ(105,"button",44),g.NdJ("click",function(){g.CHM(o);const l=g.MAs(83);return g.KtG(l.value="test")}),g.O4$(),g.TgZ(106,"svg",23),g._UZ(107,"path",45),g.qZA(),g.kcU(),g.TgZ(108,"span"),g._uU(109,"Run and Watch Tests"),g.qZA()(),g.TgZ(110,"button",44),g.NdJ("click",function(){g.CHM(o);const l=g.MAs(83);return g.KtG(l.value="build")}),g.O4$(),g.TgZ(111,"svg",23),g._UZ(112,"path",45),g.qZA(),g.kcU(),g.TgZ(113,"span"),g._uU(114,"Build for Production"),g.qZA()()(),g.TgZ(115,"div",46),g.YNc(116,K0,2,0,"pre",47),g.YNc(117,wy,2,0,"pre",48),g.YNc(118,QD,2,0,"pre",48),g.YNc(119,JD,2,0,"pre",48),g.YNc(120,Y0,2,0,"pre",48),g.YNc(121,Q0,2,0,"pre",48),g.qZA(),g.TgZ(122,"div",21)(123,"a",49),g.O4$(),g.TgZ(124,"svg",50)(125,"title"),g._uU(126,"Meetup Logo"),g.qZA(),g._UZ(127,"path",51),g.qZA()(),g.kcU(),g.TgZ(128,"a",52),g.O4$(),g.TgZ(129,"svg",53)(130,"title"),g._uU(131,"Discord Logo"),g.qZA(),g._UZ(132,"path",54)(133,"path",55),g.qZA()()(),g.kcU(),g.TgZ(134,"footer"),g._uU(135," Love Angular?\xa0 "),g.TgZ(136,"a",56),g._uU(137," Give our repo a star. "),g.TgZ(138,"div",57),g.O4$(),g.TgZ(139,"svg",23),g._UZ(140,"path",58)(141,"path",59),g.qZA(),g._uU(142," Star "),g.qZA()(),g.kcU(),g.TgZ(143,"a",56),g.O4$(),g.TgZ(144,"svg",23),g._UZ(145,"path",60)(146,"path",58),g.qZA()()(),g.TgZ(147,"svg",61)(148,"title"),g._uU(149,"Gray Clouds Background"),g.qZA(),g._UZ(150,"path",62),g.qZA()(),g.kcU(),g._UZ(151,"router-outlet")}if(2&t){const o=g.MAs(83);g.xp6(24),g.hij("",r.title," app is running!"),g.xp6(91),g.Q6J("ngSwitch",o.value),g.xp6(2),g.Q6J("ngSwitchCase","material"),g.xp6(1),g.Q6J("ngSwitchCase","pwa"),g.xp6(1),g.Q6J("ngSwitchCase","dependency"),g.xp6(1),g.Q6J("ngSwitchCase","test"),g.xp6(1),g.Q6J("ngSwitchCase","build")}},dependencies:[Ao,jr,Eh,Ln],styles:['[_nghost-%COMP%] {\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n    font-size: 14px;\n    color: #333;\n    box-sizing: border-box;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%] {\n    margin: 8px 0;\n  }\n\n  p[_ngcontent-%COMP%] {\n    margin: 0;\n  }\n\n  .spacer[_ngcontent-%COMP%] {\n    flex: 1;\n  }\n\n  .toolbar[_ngcontent-%COMP%] {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 60px;\n    display: flex;\n    align-items: center;\n    background-color: #1976d2;\n    color: white;\n    font-weight: 600;\n  }\n\n  .toolbar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n    margin: 0 16px;\n  }\n\n  .toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%] {\n    height: 40px;\n    margin: 0 8px;\n  }\n\n  .toolbar[_ngcontent-%COMP%]   #youtube-logo[_ngcontent-%COMP%] {\n    height: 40px;\n    margin: 0 16px;\n  }\n\n  .toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%]:hover, .toolbar[_ngcontent-%COMP%]   #youtube-logo[_ngcontent-%COMP%]:hover {\n    opacity: 0.8;\n  }\n\n  .content[_ngcontent-%COMP%] {\n    display: flex;\n    margin: 82px auto 32px;\n    padding: 0 16px;\n    max-width: 960px;\n    flex-direction: column;\n    align-items: center;\n  }\n\n  svg.material-icons[_ngcontent-%COMP%] {\n    height: 24px;\n    width: auto;\n  }\n\n  svg.material-icons[_ngcontent-%COMP%]:not(:last-child) {\n    margin-right: 8px;\n  }\n\n  .card[_ngcontent-%COMP%]   svg.material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%] {\n    fill: #888;\n  }\n\n  .card-container[_ngcontent-%COMP%] {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n    margin-top: 16px;\n  }\n\n  .card[_ngcontent-%COMP%] {\n    all: unset;\n    border-radius: 4px;\n    border: 1px solid #eee;\n    background-color: #fafafa;\n    height: 40px;\n    width: 200px;\n    margin: 0 8px 16px;\n    padding: 16px;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    transition: all 0.2s ease-in-out;\n    line-height: 24px;\n  }\n\n  .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(:last-child) {\n    margin-right: 0;\n  }\n\n  .card.card-small[_ngcontent-%COMP%] {\n    height: 16px;\n    width: 168px;\n  }\n\n  .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card) {\n    cursor: pointer;\n  }\n\n  .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover {\n    transform: translateY(-3px);\n    box-shadow: 0 4px 17px rgba(0, 0, 0, 0.35);\n  }\n\n  .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover   .material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%] {\n    fill: rgb(105, 103, 103);\n  }\n\n  .card.highlight-card[_ngcontent-%COMP%] {\n    background-color: #1976d2;\n    color: white;\n    font-weight: 600;\n    border: none;\n    width: auto;\n    min-width: 30%;\n    position: relative;\n  }\n\n  .card.card.highlight-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n    margin-left: 60px;\n  }\n\n  svg#rocket[_ngcontent-%COMP%] {\n    width: 80px;\n    position: absolute;\n    left: -10px;\n    top: -24px;\n  }\n\n  svg#rocket-smoke[_ngcontent-%COMP%] {\n    height: calc(100vh - 95px);\n    position: absolute;\n    top: 10px;\n    right: 180px;\n    z-index: -10;\n  }\n\n  a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:visited, a[_ngcontent-%COMP%]:hover {\n    color: #1976d2;\n    text-decoration: none;\n  }\n\n  a[_ngcontent-%COMP%]:hover {\n    color: #125699;\n  }\n\n  .terminal[_ngcontent-%COMP%] {\n    position: relative;\n    width: 80%;\n    max-width: 600px;\n    border-radius: 6px;\n    padding-top: 45px;\n    margin-top: 8px;\n    overflow: hidden;\n    background-color: rgb(15, 15, 16);\n  }\n\n  .terminal[_ngcontent-%COMP%]::before {\n    content: "\\2022 \\2022 \\2022";\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 4px;\n    background: rgb(58, 58, 58);\n    color: #c2c3c4;\n    width: 100%;\n    font-size: 2rem;\n    line-height: 0;\n    padding: 14px 0;\n    text-indent: 4px;\n  }\n\n  .terminal[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%] {\n    font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;\n    color: white;\n    padding: 0 1rem 1rem;\n    margin: 0;\n  }\n\n  .circle-link[_ngcontent-%COMP%] {\n    height: 40px;\n    width: 40px;\n    border-radius: 40px;\n    margin: 8px;\n    background-color: white;\n    border: 1px solid #eeeeee;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n    transition: 1s ease-out;\n  }\n\n  .circle-link[_ngcontent-%COMP%]:hover {\n    transform: translateY(-0.25rem);\n    box-shadow: 0px 3px 15px rgba(0, 0, 0, 0.2);\n  }\n\n  footer[_ngcontent-%COMP%] {\n    margin-top: 8px;\n    display: flex;\n    align-items: center;\n    line-height: 20px;\n  }\n\n  footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\n    display: flex;\n    align-items: center;\n  }\n\n  .github-star-badge[_ngcontent-%COMP%] {\n    color: #24292e;\n    display: flex;\n    align-items: center;\n    font-size: 12px;\n    padding: 3px 10px;\n    border: 1px solid rgba(27,31,35,.2);\n    border-radius: 3px;\n    background-image: linear-gradient(-180deg,#fafbfc,#eff3f6 90%);\n    margin-left: 4px;\n    font-weight: 600;\n  }\n\n  .github-star-badge[_ngcontent-%COMP%]:hover {\n    background-image: linear-gradient(-180deg,#f0f3f6,#e6ebf1 90%);\n    border-color: rgba(27,31,35,.35);\n    background-position: -.5em;\n  }\n\n  .github-star-badge[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%] {\n    height: 16px;\n    width: 16px;\n    margin-right: 4px;\n  }\n\n  svg#clouds[_ngcontent-%COMP%] {\n    position: fixed;\n    bottom: -160px;\n    left: -230px;\n    z-index: -10;\n    width: 1920px;\n  }\n\n  \n  @media screen and (max-width: 767px) {\n    .card-container[_ngcontent-%COMP%]    > *[_ngcontent-%COMP%]:not(.circle-link), .terminal[_ngcontent-%COMP%] {\n      width: 100%;\n    }\n\n    .card[_ngcontent-%COMP%]:not(.highlight-card) {\n      height: 16px;\n      margin: 8px 0;\n    }\n\n    .card.highlight-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n      margin-left: 72px;\n    }\n\n    svg#rocket-smoke[_ngcontent-%COMP%] {\n      right: 120px;\n      transform: rotate(-5deg);\n    }\n  }\n\n  @media screen and (max-width: 575px) {\n    svg#rocket-smoke[_ngcontent-%COMP%] {\n      display: none;\n      visibility: hidden;\n    }\n  }']}),n})();var oi=O(2011),J0=O(6451),zp=O(5363),yA=O(6063);class qp extends wr.x{constructor(e=1/0,t=1/0,r=yA.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!o&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const l=t.now();let m=0;for(let v=1;v<r.length&&r[v]<=l;v+=2)m=v;m&&r.splice(0,m+1)}}}var XD=O(3099);function Iy(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,XD.B)({connector:()=>new qp(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function Ey(n,e){return(0,ri.m)(e)?$n(()=>n,e):$n(()=>n)}var Zp=O(9468),_n=O(5813);O(5867);var ye=O(5861),po=O(9681),vd=O(4859),lt=O(2090),qu=O(1877);const Ty=new Map,sb={activated:!1,tokenObservers:[]},ob={initialized:!1,enabled:!1};function Pr(n){return Ty.get(n)||sb}function go(n,e){Ty.set(n,e)}function sf(){return ob}class rw{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new lt.BH,yield function cb(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new lt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ai=new lt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ay(n){if(!Pr(n).activated)throw ai.create("use-before-activation",{appName:n.name})}function iw(n,e){return Xp.apply(this,arguments)}function Xp(){return(Xp=(0,ye.Z)(function*({url:n,body:e},t){var r,o;const u={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const Y=yield l.getHeartbeatsHeader();Y&&(u["X-Firebase-Client"]=Y)}const m={method:"POST",body:JSON.stringify(e),headers:u};let v,b;try{v=yield fetch(n,m)}catch(Y){throw ai.create("fetch-network-error",{originalErrorMessage:null===(r=Y)||void 0===r?void 0:r.message})}if(200!==v.status)throw ai.create("fetch-status-error",{httpStatus:v.status});try{b=yield v.json()}catch(Y){throw ai.create("fetch-parse-error",{originalErrorMessage:null===(o=Y)||void 0===o?void 0:o.message})}const A=b.ttl.match(/^([\d.]+)(s)$/);if(!A||!A[2]||isNaN(Number(A[1])))throw ai.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${b.ttl}`});const R=1e3*Number(A[1]),U=Date.now();return{token:b.token,expireTimeMillis:U+R,issuedAtTimeMillis:U}})).apply(this,arguments)}function db(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const af="firebase-app-check-store";let Py=null;function fb(){return Py||(Py=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=o=>{n(o.target.result)},r.onerror=o=>{var u;e(ai.create("storage-open",{originalErrorMessage:null===(u=o.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=o=>{0===o.oldVersion&&o.target.result.createObjectStore(af,{keyPath:"compositeKey"})}}catch(r){e(ai.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Py)}function ky(){return(ky=(0,ye.Z)(function*(n,e){const r=(yield fb()).transaction(af,"readwrite"),u=r.objectStore(af).put({compositeKey:n,value:e});return new Promise((l,m)=>{u.onsuccess=v=>{l()},r.onerror=v=>{var b;m(ai.create("storage-set",{originalErrorMessage:null===(b=v.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const Id=new qu.Yd("@firebase/app-check");function uw(n,e){return(0,lt.hl)()?function ow(n,e){return function Qc(n,e){return ky.apply(this,arguments)}(function aw(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Id.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Fy(){return sf().enabled}function cw(){return eg.apply(this,arguments)}function eg(){return(eg=(0,ye.Z)(function*(){const n=sf();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Uy={error:"UNKNOWN_ERROR"};function EA(n){return lt.US.encodeString(JSON.stringify(n),!1)}function Ed(n){return Vy.apply(this,arguments)}function Vy(){return(Vy=(0,ye.Z)(function*(n,e=!1){const t=n.app;Ay(t);const r=Pr(t);let u,o=r.token;if(!o){const v=yield r.cachedTokenPromise;v&&Wi(v)&&(o=v)}if(!e&&o&&Wi(o))return{token:o.token};let m,l=!1;if(Fy()){r.exchangeTokenPromise||(r.exchangeTokenPromise=iw(db(t,yield cw()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),l=!0);const v=yield r.exchangeTokenPromise;return yield uw(t,v),go(t,Object.assign(Object.assign({},r),{token:v})),{token:v.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(v=>(r.exchangeTokenPromise=void 0,v)),l=!0),o=yield r.exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?Id.warn(v.message):Id.error(v),u=v}return o?(m={token:o.token},go(t,Object.assign(Object.assign({},r),{token:o})),yield uw(t,o)):m=fw(u),l&&uf(t,m),m})).apply(this,arguments)}function Zu(n,e){const t=Pr(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),go(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function By(n){const{app:e}=n,t=Pr(e);let r=t.tokenRefresher;r||(r=function hw(n){const{app:e}=n;return new rw((0,ye.Z)(function*(){let r;if(r=Pr(e).token?yield Ed(n,!0):yield Ed(n),r.error)throw r.error}),()=>!0,()=>{const t=Pr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),go(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function uf(n,e){const t=Pr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Wi(n){return n.expireTimeMillis-Date.now()>0}function fw(n){return{token:EA(Uy),error:n}}class _b{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Pr(this.app);for(const t of e)Zu(this.app,t.next);return Promise.resolve()}}const Db="app-check-internal";!function xA(){(0,po._registerComponent)(new vd.wA("app-check",n=>function jy(n,e){return new _b(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Db).initialize()})),(0,po._registerComponent)(new vd.wA(Db,n=>function Qa(n){return{getToken:e=>Ed(n,e),addTokenListener:e=>function dw(n,e,t,r){const{app:o}=n,u=Pr(o),l={next:t,error:r,type:e};if(go(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,l]})),u.token&&Wi(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),By(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>By(n))}(n,"INTERNAL",e),removeTokenListener:e=>Zu(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,po.registerVersion)("@firebase/app-check","0.5.12")}();class Zy{constructor(){return(0,_n.vb)("app-check")}}typeof window<"u"&&window;var df=O(127);const Ky=new g.OlP("angularfire2.auth.use-emulator"),Tw=new g.OlP("angularfire2.auth.settings"),Cw=new g.OlP("angularfire2.auth.tenant-id"),hf=new g.OlP("angularfire2.auth.langugage-code"),tl=new g.OlP("angularfire2.auth.use-device-language"),ng=new g.OlP("angularfire.auth.persistence"),nl=(n,e,t,r,o,u,l,m)=>(0,oi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=o,u&&v.useDeviceLanguage(),l)for(const[b,A]of Object.entries(l))v.settings[b]=A;return m&&v.setPersistence(m),v},[t,r,o,u,l,m]);let Dd=(()=>{class n{constructor(t,r,o,u,l,m,v,b,A,R,U,Y){const te=new wr.x,Se=$e(void 0).pipe((0,zp.Q)(l.outsideAngular),$n(()=>u.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,1451)))),(0,pt.U)(()=>(0,oi.on)(t,u,r)),(0,pt.U)(xe=>nl(xe,u,m,b,A,R,v,U)),Iy({bufferSize:1,refCount:!1}));if($r(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=$e(null);else{Se.pipe($i()).subscribe();const gt=Se.pipe($n(it=>it.getRedirectResult().then(bt=>bt,()=>null)),_n.iC,Iy({bufferSize:1,refCount:!1})),wt=Se.pipe($n(it=>new ti.y(bt=>({unsubscribe:u.runOutsideAngular(()=>it.onAuthStateChanged(Ut=>bt.next(Ut),Ut=>bt.error(Ut),()=>bt.complete()))})))),mt=Se.pipe($n(it=>new ti.y(bt=>({unsubscribe:u.runOutsideAngular(()=>it.onIdTokenChanged(Ut=>bt.next(Ut),Ut=>bt.error(Ut),()=>bt.complete()))}))));this.authState=gt.pipe(Ey(wt),(0,Zp.R)(l.outsideAngular),(0,zp.Q)(l.insideAngular)),this.user=gt.pipe(Ey(mt),(0,Zp.R)(l.outsideAngular),(0,zp.Q)(l.insideAngular)),this.idToken=this.user.pipe($n(it=>it?(0,qt.D)(it.getIdToken()):$e(null))),this.idTokenResult=this.user.pipe($n(it=>it?(0,qt.D)(it.getIdTokenResult()):$e(null))),this.credential=(0,J0.T)(gt,te,this.authState.pipe(ji(it=>!it))).pipe((0,pt.U)(it=>it?.user?it:null),(0,Zp.R)(l.outsideAngular),(0,zp.Q)(l.insideAngular))}return(0,oi.pX)(this,Se,u,{spy:{apply:(xe,gt,wt)=>{(xe.startsWith("signIn")||xe.startsWith("createUser"))&&wt.then(mt=>te.next(mt))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(oi.Dh),g.LFG(oi.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(_n.HU),g.LFG(Ky,8),g.LFG(Tw,8),g.LFG(Cw,8),g.LFG(hf,8),g.LFG(tl,8),g.LFG(ng,8),g.LFG(Zy,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),ff=(()=>{class n{constructor(){df.Z.registerVersion("angularfire",_n.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[Dd]}),n})();var Sw=O(4986),Yy=O(3942);const rg="firebasestorage.googleapis.com",ig="storageBucket";class Yn extends lt.ZR{constructor(e,t){super(Mw(e),`Firebase Storage: ${t} (${Mw(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Yn.prototype)}_codeEquals(e){return Mw(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Mw(n){return"storage/"+n}function Jy(){return new Yn("unknown","An unknown error occurred, please check the error payload for server response.")}function Xy(){return new Yn("canceled","User canceled the upload/download.")}function sg(){return new Yn("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function bd(n){return new Yn("invalid-argument",n)}function Ow(){return new Yn("app-deleted","The Firebase app was deleted.")}function e_(n){return new Yn("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function pf(n,e){return new Yn("invalid-format","String does not match format '"+n+"': "+e)}function Td(n){throw new Yn("internal-error","Internal error: "+n)}class ui{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ui.makeFromUrl(e,t)}catch{return new ui(e,"")}if(""===r.path)return r;throw function kA(n){return new Yn("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const o="([A-Za-z0-9.\\-_]+)",m=new RegExp("^gs://"+o+"(/(.*))?$","i");function b(it){it.path_=decodeURIComponent(it.path)}const R=t.replace(/[.]/g,"\\."),mt=[{regex:m,indices:{bucket:1,path:3},postModify:function u(it){"/"===it.path.charAt(it.path.length-1)&&(it.path_=it.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${R}/v[A-Za-z0-9_]+/b/${o}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:b},{regex:new RegExp(`^https?://${t===rg?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${o}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:b}];for(let it=0;it<mt.length;it++){const bt=mt[it],Ut=bt.regex.exec(e);if(Ut){let fu=Ut[bt.indices.path];fu||(fu=""),r=new ui(Ut[bt.indices.bucket],fu),bt.postModify(r);break}}if(null==r)throw function Rb(n){return new Yn("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class Nb{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function og(n){return"string"==typeof n||n instanceof String}function Uw(n){return Vw()&&n instanceof Blob}function Vw(){return typeof Blob<"u"}function ag(n,e,t,r){if(r<e)throw bd(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw bd(`Invalid value for '${n}'. Expected ${t} or less.`)}function Ja(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Bw(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Wu=(()=>{return(n=Wu||(Wu={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Wu;var n})();class n_{constructor(e,t,r,o,u,l,m,v,b,A,R){this.url_=e,this.method_=t,this.headers_=r,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=l,this.callback_=m,this.errorCallback_=v,this.timeout_=b,this.progressCallback_=A,this.connectionFactory_=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((U,Y)=>{this.resolve_=U,this.reject_=Y,this.start_()})}start_(){const t=(r,o)=>{const u=this.resolve_,l=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const v=this.callback_(m,m.getResponse());!function Ob(n){return void 0!==n}(v)?u():u(v)}catch(v){l(v)}else if(null!==m){const v=Jy();v.serverResponse=m.getErrorText(),l(this.errorCallback_?this.errorCallback_(m,v):v)}else l(o.canceled?this.appDelete_?Ow():Xy():function gs(){return new Yn("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new ug(!1,null,!0)):this.backoffId_=function Lw(n,e,t){let r=1,o=null,u=null,l=!1,m=0;function v(){return 2===m}let b=!1;function A(...xe){b||(b=!0,e.apply(null,xe))}function R(xe){o=setTimeout(()=>{o=null,n(Y,v())},xe)}function U(){u&&clearTimeout(u)}function Y(xe,...gt){if(b)return void U();if(xe)return U(),void A.call(null,xe,...gt);if(v()||l)return U(),void A.call(null,xe,...gt);let mt;r<64&&(r*=2),1===m?(m=2,mt=0):mt=1e3*(r+Math.random()),R(mt)}let te=!1;function Se(xe){te||(te=!0,U(),!b&&(null!==o?(xe||(m=2),clearTimeout(o),R(0)):xe||(m=1)))}return R(0),u=setTimeout(()=>{l=!0,Se(!0)},t),Se}((r,o)=>{if(o)return void r(!1,new ug(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const l=m=>{null!==this.progressCallback_&&this.progressCallback_(m.loaded,m.lengthComputable?m.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(l),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(l),this.pendingConnection_=null;const m=u.getErrorCode()===Wu.NO_ERROR,v=u.getStatus();if(!m||this.isRetryStatusCode_(v)){const A=u.getErrorCode()===Wu.ABORT;return void r(!1,new ug(!1,null,A))}const b=-1!==this.successCodes_.indexOf(v);r(!0,new ug(b,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Fw(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,o=-1!==[408,429].indexOf(e),u=-1!==this.additionalRetryCodes_.indexOf(e);return t||o||u}}class ug{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function $w(...n){const e=function i_(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(Vw())return new Blob(n);throw new Yn("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Ai={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Hw{constructor(e,t){this.data=e,this.contentType=t||null}}function s_(n,e){switch(n){case Ai.RAW:return new Hw(o_(e));case Ai.BASE64:case Ai.BASE64URL:return new Hw(a_(n,e));case Ai.DATA_URL:return new Hw(function c_(n){const e=new u_(n);return e.base64?a_(Ai.BASE64,e.rest):function Gw(n){let e;try{e=decodeURIComponent(n)}catch{throw pf(Ai.DATA_URL,"Malformed data URL.")}return o_(e)}(e.rest)}(e),function Xa(n){return new u_(n).contentType}(e))}throw Jy()}function o_(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function a_(n,e){switch(n){case Ai.BASE64:{const o=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(o||u)throw pf(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Ai.BASE64URL:{const o=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(o||u)throw pf(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function OA(n){return atob(n)}(e)}catch{throw pf(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}class u_{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw pf(Ai.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function lg(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class ms{constructor(e,t){let r=0,o="";Uw(e)?(this.data_=e,r=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(Uw(this.data_)){const o=function NA(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===o?null:new ms(o)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ms(r,!0)}}static getBlob(...e){if(Vw()){const t=e.map(r=>r instanceof ms?r.data_:r);return new ms($w.apply(null,t))}{const t=e.map(l=>og(l)?s_(Ai.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const o=new Uint8Array(r);let u=0;return t.forEach(l=>{for(let m=0;m<l.length;m++)o[u++]=l[m]}),new ms(o,!0)}}uploadData(){return this.data_}}function rl(n){let e;try{e=JSON.parse(n)}catch{return null}return function t_(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function d_(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Vb(n,e){return e}class xi{constructor(e,t,r,o){this.server=e,this.local=t||e,this.writable=!!r,this.xform=o||Vb}}let Ku=null;function dg(){if(Ku)return Ku;const n=[];n.push(new xi("bucket")),n.push(new xi("generation")),n.push(new xi("metageneration")),n.push(new xi("name","fullPath",!0));const t=new xi("name");t.xform=function e(u,l){return function Bb(n){return!og(n)||n.length<2?n:d_(n)}(l)},n.push(t);const o=new xi("size");return o.xform=function r(u,l){return void 0!==l?Number(l):l},n.push(o),n.push(new xi("timeCreated")),n.push(new xi("updated")),n.push(new xi("md5Hash",null,!0)),n.push(new xi("cacheControl",null,!0)),n.push(new xi("contentDisposition",null,!0)),n.push(new xi("contentEncoding",null,!0)),n.push(new xi("contentLanguage",null,!0)),n.push(new xi("contentType",null,!0)),n.push(new xi("metadata","customMetadata",!0)),Ku=n,Ku}function zw(n,e,t){const r=rl(e);return null===r?null:function LA(n,e,t){const r={type:"file"},o=t.length;for(let u=0;u<o;u++){const l=t[u];r[l.local]=l.xform(r,e[l.server])}return function jb(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new ui(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function h_(n,e){const t={},r=e.length;for(let o=0;o<r;o++){const u=e[o];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const qw="prefixes";class Xo{constructor(e,t,r,o){this.url=e,this.method=t,this.handler=r,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function $s(n){if(!n)throw Jy()}function hg(n,e){return function t(r,o){const u=zw(n,o,e);return $s(null!==u),u}}function Cd(n){return function e(t,r){let o;return o=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function kw(){return new Yn("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Pw(){return new Yn("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function xb(n){return new Yn("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function Mb(n){return new Yn("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,o.serverResponse=r.serverResponse,o}}function gf(n){const e=Cd(n);return function t(r,o){let u=e(r,o);return 404===r.getStatus()&&(u=function Rw(n){return new Yn("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=o.serverResponse,u}}function Kw(n,e,t){const o=Ja(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,m=new Xo(o,"GET",hg(n,t),l);return m.errorHandler=gf(e),m}function fg(n,e,t,r,o){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),o&&(u.maxResults=o);const m=Ja(e.bucketOnlyServerUrl(),n.host,n._protocol),b=n.maxOperationRetryTime,A=new Xo(m,"GET",function Gb(n,e){return function t(r,o){const u=function Ww(n,e,t){const r=rl(t);return null===r?null:function Zw(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[qw])for(const o of t[qw]){const u=o.replace(/\/$/,""),l=n._makeStorageReference(new ui(e,u));r.prefixes.push(l)}if(t.items)for(const o of t.items){const u=n._makeStorageReference(new ui(e,o.name));r.items.push(u)}return r}(n,e,r)}(n,e,o);return $s(null!==u),u}}(n,e.bucket),b);return A.urlParams=u,A.errorHandler=Cd(e),A}function pg(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function Zb(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class ys{constructor(e,t,r,o){this.current=e,this.total=t,this.finalized=!!r,this.metadata=o||null}}function il(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{$s(!1)}return $s(!!t&&-1!==(e||["active"]).indexOf(t)),t}const f_={STATE_CHANGED:"state_changed"},gr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Qu(n){switch(n){case"running":case"pausing":case"canceling":return gr.RUNNING;case"paused":return gr.PAUSED;case"success":return gr.SUCCESS;case"canceled":return gr.CANCELED;default:return gr.ERROR}}class Sd{constructor(e,t,r){if(function Jo(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function mo(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class xd extends class Ad{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Wu.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Wu.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Wu.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,o){if(this.sent_)throw Td("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==o)for(const u in o)o.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,o[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Td("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Td("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Td("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Td("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function li(){return new xd}class p_{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=dg(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=o=>{this._request=void 0,this._chunkMultiplier=1,o._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=o,this._transition("error"))},this._metadataErrorHandler=o=>{this._request=void 0,o._codeEquals("canceled")?this.completeTransitions_():(this._error=o,this._transition("error"))},this._promise=new Promise((o,u)=>{this._resolve=o,this._reject=u,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function ci(n,e,t,r,o){const u=e.bucketOnlyServerUrl(),l=pg(e,r,o),m={name:l.fullPath},v=Ja(u,n.host,n._protocol),A={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},R=h_(l,t),te=new Xo(v,"POST",function Y(Se){let xe;il(Se);try{xe=Se.getResponseHeader("X-Goog-Upload-URL")}catch{$s(!1)}return $s(og(xe)),xe},n.maxUploadRetryTime);return te.urlParams=m,te.headers=A,te.body=R,te.errorHandler=Cd(e),te}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,li,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const o=function sl(n,e,t,r){const v=new Xo(t,"POST",function u(b){const A=il(b,["active","final"]);let R=null;try{R=b.getResponseHeader("X-Goog-Upload-Size-Received")}catch{$s(!1)}R||$s(!1);const U=Number(R);return $s(!isNaN(U)),new ys(U,r.size(),"final"===A)},n.maxUploadRetryTime);return v.headers={"X-Goog-Upload-Command":"query"},v.errorHandler=Cd(e),v}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(o,li,t,r);this._request=u,u.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new ys(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((o,u)=>{let l;try{l=function Hs(n,e,t,r,o,u,l,m){const v=new ys(0,0);if(l?(v.current=l.current,v.total=l.total):(v.current=0,v.total=r.size()),r.size()!==v.total)throw function Nw(){return new Yn("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const b=v.total-v.current;let A=b;o>0&&(A=Math.min(A,o));const R=v.current,te={"X-Goog-Upload-Command":A===b?"upload, finalize":"upload","X-Goog-Upload-Offset":`${v.current}`},Se=r.slice(R,R+A);if(null===Se)throw sg();const mt=new Xo(t,"POST",function xe(it,bt){const Ut=il(it,["active","final"]),or=v.current+A,fu=r.size();let hA;return hA="final"===Ut?hg(e,u)(it,bt):null,new ys(or,fu,"final"===Ut,hA)},e.maxUploadRetryTime);return mt.headers=te,mt.body=Se.uploadData(),mt.progressCallback=m||null,mt.errorHandler=Cd(n),mt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(v){return this._error=v,void this._transition("error")}const m=this._ref.storage._makeRequest(l,li,o,u);this._request=m,m.getPromise().then(v=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(v.current),v.finalized?(this._metadata=v.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=Kw(this._ref.storage,this._ref._location,this._mappings),o=this._ref.storage._makeRequest(r,li,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function Yw(n,e,t,r,o){const u=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},v=function m(){let mt="";for(let it=0;it<2;it++)mt+=Math.random().toString().slice(2);return mt}();l["Content-Type"]="multipart/related; boundary="+v;const b=pg(e,r,o),A=h_(b,t),Y=ms.getBlob("--"+v+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+A+"\r\n--"+v+"\r\nContent-Type: "+b.contentType+"\r\n\r\n",r,"\r\n--"+v+"--");if(null===Y)throw sg();const te={name:b.fullPath},Se=Ja(u,n.host,n._protocol),gt=n.maxUploadRetryTime,wt=new Xo(Se,"POST",hg(n,t),gt);return wt.urlParams=te,wt.headers=l,wt.body=Y.uploadData(),wt.errorHandler=Cd(e),wt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,li,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Xy(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Qu(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,o){const u=new Sd(t||void 0,r||void 0,o||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Qu(this._state)){case gr.SUCCESS:mo(this._resolve.bind(null,this.snapshot))();break;case gr.CANCELED:case gr.ERROR:mo(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Qu(this._state)){case gr.RUNNING:case gr.PAUSED:e.next&&mo(e.next.bind(e,this.snapshot))();break;case gr.SUCCESS:e.complete&&mo(e.complete.bind(e))();break;default:e.error&&mo(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Ju{constructor(e,t){this._service=e,this._location=t instanceof ui?t:ui.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ju(e,t)}get root(){const e=new ui(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return d_(this._location.path)}get storage(){return this._service}get parent(){const e=function Ub(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ui(this._location.bucket,e);return new Ju(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw e_(e)}}function rI(n,e,t){return gg.apply(this,arguments)}function gg(){return(gg=(0,ye.Z)(function*(n,e,t){const o=yield iI(n,{pageToken:t});e.prefixes.push(...o.prefixes),e.items.push(...o.items),null!=o.nextPageToken&&(yield rI(n,e,o.nextPageToken))})).apply(this,arguments)}function iI(n,e){null!=e&&"number"==typeof e.maxResults&&ag("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=fg(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,li)}function y_(n){n._throwIfRoot("getDownloadURL");const e=function FA(n,e,t){const o=Ja(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,m=new Xo(o,"GET",function zb(n,e){return function t(r,o){const u=zw(n,o,e);return $s(null!==u),function $b(n,e,t,r){const o=rl(e);if(null===o||!og(o.downloadTokens))return null;const u=o.downloadTokens;if(0===u.length)return null;const l=encodeURIComponent;return u.split(",").map(b=>{const R=n.fullPath;return Ja("/b/"+l(n.bucket)+"/o/"+l(R),t,r)+Bw({alt:"media",token:b})})[0]}(u,o,n.host,n._protocol)}}(n,t),l);return m.errorHandler=gf(e),m}(n.storage,n._location,dg());return n.storage.makeRequestWithTokens(e,li).then(t=>{if(null===t)throw function kb(){return new Yn("no-download-url","The given file does not have any download URLs.")}();return t})}function _f(n,e){const t=function l_(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ui(n._location.bucket,t);return new Ju(n.storage,r)}function oI(n,e){if(n instanceof _g){const t=n;if(null==t._bucket)throw function Pb(){return new Yn("no-default-bucket","No default bucket found. Did you set the '"+ig+"' property when initializing the app?")}();const r=new Ju(t,t._bucket);return null!=e?oI(r,e):r}return void 0!==e?_f(n,e):n}function v_(n,e){if(e&&function mg(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof _g)return function __(n,e){return new Ju(n,e)}(n,e);throw bd("To use ref(service, url), the first argument must be a Storage instance.")}return oI(n,e)}function yg(n,e){const t=e?.[ig];return null==t?null:ui.makeFromBucketSpec(t,n)}class _g{constructor(e,t,r,o,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=o,this._firebaseVersion=u,this._bucket=null,this._host=rg,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=o?ui.makeFromBucketSpec(o,this._host):yg(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ui.makeFromBucketSpec(this._url,e):yg(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ag("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ag("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ye.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ye.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ju(this,e)}_makeRequest(e,t,r,o){if(this._deleted)return new Nb(Ow());{const u=function jw(n,e,t,r,o,u){const l=Bw(n.urlParams),m=n.url+l,v=Object.assign({},n.headers);return function r_(n,e){e&&(n["X-Firebase-GMPID"]=e)}(v,e),function Lb(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(v,t),function cg(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(v,u),function Fb(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(v,r),new n_(m,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o)}(e,this._appId,r,o,t,this._firebaseVersion);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,ye.Z)(function*(){const[o,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,o,u).getPromise()})()}}const vg="@firebase/storage";function E_(n,e){return v_(n=(0,lt.m9)(n),e)}function fI(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new _g(t,r,o,e,po.SDK_VERSION)}!function pI(){(0,po._registerComponent)(new vd.wA("storage",fI,"PUBLIC").setMultipleInstances(!0)),(0,po.registerVersion)(vg,"0.9.9",""),(0,po.registerVersion)(vg,"0.9.9","esm2017")}();class vf{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class b_{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new vf(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new vf(r,this,this._ref))},t)}on(e,t,r,o){let u;return t&&(u="function"==typeof t?l=>t(new vf(l,this,this._ref)):{next:t.next?l=>t.next(new vf(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,o||void 0)}}class sT{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new eu(e,this._service))}get items(){return this._delegate.items.map(e=>new eu(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class eu{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function D_(n,e){return _f(n,e)}(this._delegate,e);return new eu(t,this.storage)}get root(){return new eu(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new eu(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new b_(function cI(n,e,t){return function nI(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new p_(n,new ms(e),t)}(n=(0,lt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Ai.RAW,r){this._throwIfRoot("putString");const o=s_(t,e),u=Object.assign({},r);return null==u.contentType&&null!=o.contentType&&(u.contentType=o.contentType),new b_(new p_(this._delegate,new ms(o.data,!0),u),this)}listAll(){return function Xb(n){return function Kb(n){const e={prefixes:[],items:[]};return rI(n,e).then(()=>e)}(n=(0,lt.m9)(n))}(this._delegate).then(e=>new sT(e,this.storage))}list(e){return function Jb(n,e){return iI(n=(0,lt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new sT(t,this.storage))}getMetadata(){return function lI(n){return function sI(n){n._throwIfRoot("getMetadata");const e=Kw(n.storage,n._location,dg());return n.storage.makeRequestWithTokens(e,li)}(n=(0,lt.m9)(n))}(this._delegate)}updateMetadata(e){return function dI(n,e){return function m_(n,e){n._throwIfRoot("updateMetadata");const t=function mf(n,e,t,r){const u=Ja(e.fullServerUrl(),n.host,n._protocol),m=h_(t,r),b=n.maxOperationRetryTime,A=new Xo(u,"PATCH",hg(n,r),b);return A.headers={"Content-Type":"application/json; charset=utf-8"},A.body=m,A.errorHandler=gf(e),A}(n.storage,n._location,e,dg());return n.storage.makeRequestWithTokens(t,li)}(n=(0,lt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function eT(n){return y_(n=(0,lt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function tT(n){return function Yb(n){n._throwIfRoot("deleteObject");const e=function qb(n,e){const r=Ja(e.fullServerUrl(),n.host,n._protocol),m=new Xo(r,"DELETE",function l(v,b){},n.maxOperationRetryTime);return m.successCodes=[200,204],m.errorHandler=gf(e),m}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,li)}(n=(0,lt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw e_(e)}}class gI{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(T_(e))throw bd("ref() expected a child path but got a URL, use refFromURL instead.");return new eu(E_(this._delegate,e),this)}refFromURL(e){if(!T_(e))throw bd("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ui.makeFromUrl(e,this._delegate.host)}catch{throw bd("refFromUrl() expected a valid full URL but got an invalid one.")}return new eu(E_(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function hI(n,e,t,r={}){!function aI(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken="string"==typeof o?o:(0,lt.Sg)(o,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function T_(n){return/^[A-Za-z]+:\/\//.test(n)}function aT(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new gI(t,r)}function _I(n){const e=function yI(n){return new ti.y(e=>{const t=l=>e.next(l);t(n.snapshot);const u=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){u()}}).pipe(function Aw(n,e=Sw.z){return(0,kn.e)((t,r)=>{let o=null,u=null,l=null;const m=()=>{if(o){o.unsubscribe(),o=null;const b=u;u=null,r.next(b)}};function v(){const b=l+n,A=e.now();if(A<b)return o=this.schedule(void 0,b-A),void r.add(o);m()}t.subscribe((0,Pn.x)(r,b=>{u=b,l=e.now(),o||(o=e.schedule(v,n),r.add(o))},()=>{m(),r.complete()},void 0,()=>{u=o=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,pt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function wf(n){return{getDownloadURL:()=>$e(void 0).pipe(_n.fc,$n(()=>n.getDownloadURL()),_n.iC),getMetadata:()=>$e(void 0).pipe(_n.fc,$n(()=>n.getMetadata()),_n.iC),delete:()=>(0,qt.D)(n.delete()),child:e=>wf(n.child(e)),updateMetadata:e=>(0,qt.D)(n.updateMetadata(e)),put:(e,t)=>_I(n.put(e,t)),putString:(e,t,r)=>_I(n.putString(e,t,r)),list:e=>(0,qt.D)(n.list(e)),listAll:()=>(0,qt.D)(n.listAll())}}!function uT(n){const e={TaskState:gr,TaskEvent:f_,StringFormat:Ai,Storage:gI,Reference:eu};n.INTERNAL.registerComponent(new vd.wA("storage-compat",aT,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.17")}(Yy.Z);const vI=new g.OlP("angularfire2.storageBucket"),Rd=new g.OlP("angularfire2.storage.maxUploadRetryTime"),cT=new g.OlP("angularfire2.storage.maxOperationRetryTime"),lT=new g.OlP("angularfire2.storage.use-emulator");let wI=(()=>{class n{constructor(t,r,o,u,l,m,v,b,A,R){const U=(0,oi.on)(t,l,r);this.storage=(0,oi.cc)(`${U.name}.storage.${o}`,"AngularFireStorage",U.name,()=>{const Y=l.runOutsideAngular(()=>U.storage(o||void 0)),te=A;return te&&Y.useEmulator(...te),v&&Y.setMaxUploadRetryTime(v),b&&Y.setMaxOperationRetryTime(b),Y},[v,b])}ref(t){return wf(this.storage.ref(t))}refFromURL(t){return wf(this.storage.refFromURL(t))}upload(t,r,o){return wf(this.storage.ref(t)).put(r,o)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(oi.Dh),g.LFG(oi.xv,8),g.LFG(vI,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(_n.HU),g.LFG(Rd,8),g.LFG(cT,8),g.LFG(lT,8),g.LFG(Zy,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),II=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})(),BA=(()=>{class n{constructor(){df.Z.registerVersion("angularfire",_n.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[wI],imports:[II]}),n})();function wg(){return(0,kn.e)((n,e)=>{let t,r=!1;n.subscribe((0,Pn.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function ea(n,e){return n===e}O(1451);var Ze,dT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},kr={},_s=_s||{},xt=dT||self;function If(){}function C_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ef(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var S_="closure_uid_"+(1e9*Math.random()>>>0),A_=0;function Df(n,e,t){return n.call.apply(n.bind,arguments)}function fT(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Nr(n,e,t){return(Nr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Df:fT).apply(null,arguments)}function Ig(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Or(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var l=Array(arguments.length-2),m=2;m<arguments.length;m++)l[m-2]=arguments[m];return e.prototype[o].apply(r,l)}}function tu(){this.s=this.s,this.o=this.o}var pT={};tu.prototype.s=!1,tu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function hT(n){return Object.prototype.hasOwnProperty.call(n,S_)&&n[S_]||(n[S_]=++A_)}(this);delete pT[n]}},tu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const x_=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},M_=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function bf(n){return Array.prototype.concat.apply([],arguments)}function Dg(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Tf(n){return/^[\s\xa0]*$/.test(n)}var hi,R_=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function di(n,e){return-1!=n.indexOf(e)}function bg(n,e){return n<e?-1:n>e?1:0}e:{var P_=xt.navigator;if(P_){var k_=P_.userAgent;if(k_){hi=k_;break e}}hi=""}function N_(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function bI(n){const e={};for(const t in n)e[t]=n[t];return e}var TI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function CI(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<TI.length;u++)t=TI[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function O_(n){return O_[" "](n),n}O_[" "]=If;var Tg,n,mT=di(hi,"Opera"),Pd=di(hi,"Trident")||di(hi,"MSIE"),SI=di(hi,"Edge"),L_=SI||Pd,AI=di(hi,"Gecko")&&!(di(hi.toLowerCase(),"webkit")&&!di(hi,"Edge"))&&!(di(hi,"Trident")||di(hi,"MSIE"))&&!di(hi,"Edge"),yT=di(hi.toLowerCase(),"webkit")&&!di(hi,"Edge");function xI(){var n=xt.document;return n?n.documentMode:void 0}e:{var F_="",U_=(n=hi,AI?/rv:([^\);]+)(\)|;)/.exec(n):SI?/Edge\/([\d\.]+)/.exec(n):Pd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):yT?/WebKit\/(\S+)/.exec(n):mT?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(U_&&(F_=U_?U_[1]:""),Pd){var V_=xI();if(null!=V_&&V_>parseFloat(F_)){Tg=String(V_);break e}}Tg=F_}var _T={};var RI=xt.document&&Pd&&(xI()||parseInt(Tg,10))||void 0,PI=function(){if(!xt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{xt.addEventListener("test",If,e),xt.removeEventListener("test",If,e)}catch{}return n}();function qr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function kd(n,e){if(qr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(AI){e:{try{O_(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:kI[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&kd.Z.h.call(this)}}qr.prototype.h=function(){this.defaultPrevented=!0},Or(kd,qr);var kI={2:"touch",3:"pen",4:"mouse"};kd.prototype.h=function(){kd.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Nd="closure_listenable_"+(1e6*Math.random()|0),NI=0;function OI(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++NI,this.ca=this.fa=!1}function ta(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Sg(n){this.src=n,this.g={},this.h=0}function j_(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=x_(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(ta(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Xu(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}Sg.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=Xu(n,e,r,o);return-1<l?(e=n[l],t||(e.fa=!1)):((e=new OI(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var LI="closure_lm_"+(1e6*Math.random()|0),Cf={};function vT(n,e,t,r,o){if(r&&r.once)return wT(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)vT(n,e[u],t,r,o);return null}return t=Od(t),n&&n[Nd]?n.N(e,t,Ef(r)?!!r.capture:!!r,o):$_(n,e,t,!1,r,o)}function $_(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var l=Ef(o)?!!o.capture:!!o,m=ec(n);if(m||(n[LI]=m=new Sg(n)),(t=m.add(e,t,r,l,u)).proxy)return t;if(r=function FI(){var e=IT;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)PI||(o=l),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(UI(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function wT(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)wT(n,e[u],t,r,o);return null}return t=Od(t),n&&n[Nd]?n.O(e,t,Ef(r)?!!r.capture:!!r,o):$_(n,e,t,!0,r,o)}function vt(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)vt(n,e[u],t,r,o);else r=Ef(r)?!!r.capture:!!r,t=Od(t),n&&n[Nd]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Xu(u=n.g[e],t,r,o))&&(ta(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=ec(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Xu(e,t,r,o)),(t=-1<n?e[n]:null)&&H_(t))}function H_(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Nd])j_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(UI(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=ec(e))?(j_(t,n),0==t.h&&(t.src=null,e[LI]=null)):ta(n)}}}function UI(n){return n in Cf?Cf[n]:Cf[n]="on"+n}function IT(n,e){if(n.ca)n=!0;else{e=new kd(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&H_(n),n=t.call(r,e)}return n}function ec(n){return(n=n[LI])instanceof Sg?n:null}var G_="__closure_events_fn_"+(1e9*Math.random()>>>0);function Od(n){return"function"==typeof n?n:(n[G_]||(n[G_]=function(e){return n.handleEvent(e)}),n[G_])}function sr(){tu.call(this),this.i=new Sg(this),this.P=this,this.I=null}function Gt(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new qr(e,n);else if(e instanceof qr)e.target=e.target||n;else{var o=e;CI(e=new qr(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];o=z_(l,r,!0,e)&&o}if(o=z_(l=e.g=n,r,!0,e)&&o,o=z_(l,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=z_(l=e.g=t[u],r,!1,e)&&o}function z_(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.ca&&l.capture==t){var m=l.listener,v=l.ia||l.src;l.fa&&j_(n.i,l),o=!1!==m.call(v,r)&&o}}return o&&!r.defaultPrevented}Or(sr,tu),sr.prototype[Nd]=!0,sr.prototype.removeEventListener=function(n,e,t,r){vt(this,n,e,t,r)},sr.prototype.M=function(){if(sr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)ta(t[r]);delete n.g[e],n.h--}}this.I=null},sr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},sr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Ag=xt.JSON.stringify;function VI(){var n=Ld;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Z_,q_=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new BI,n=>n.reset());class BI{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function jI(n){xt.setTimeout(()=>{throw n},0)}function xg(n,e){Z_||function DT(){var n=xt.Promise.resolve(void 0);Z_=function(){n.then(bT)}}(),W_||(Z_(),W_=!0),Ld.add(n,e)}var W_=!1,Ld=new class ET{constructor(){this.h=this.g=null}add(e,t){const r=q_.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function bT(){for(var n;n=VI();){try{n.h.call(n.g)}catch(t){jI(t)}var e=q_;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}W_=!1}function Mg(n,e){sr.call(this),this.h=n||1,this.g=e||xt,this.j=Nr(this.kb,this),this.l=Date.now()}function K_(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Fd(n,e,t){if("function"==typeof n)t&&(n=Nr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Nr(n.handleEvent,n)}return 2147483647<Number(e)?-1:xt.setTimeout(n,e||0)}function Y_(n){n.g=Fd(()=>{n.g=null,n.i&&(n.i=!1,Y_(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Or(Mg,sr),(Ze=Mg.prototype).da=!1,Ze.S=null,Ze.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Gt(this,"tick"),this.da&&(K_(this),this.start()))}},Ze.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ze.M=function(){Mg.Z.M.call(this),K_(this),delete this.g};class $I extends tu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Y_(this)}M(){super.M(),this.g&&(xt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ud(n){tu.call(this),this.h=n,this.g={}}Or(Ud,tu);var HI=[];function Vd(n,e,t,r){Array.isArray(t)||(t&&(HI[0]=t.toString()),t=HI);for(var o=0;o<t.length;o++){var u=vT(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Bd(n){N_(n.g,function(e,t){this.g.hasOwnProperty(t)&&H_(e)},n),n.g={}}function Rg(){this.g=!0}function al(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function zI(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<o.length;l++)o[l]=""}}}return Ag(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Ud.prototype.M=function(){Ud.Z.M.call(this),Bd(this)},Ud.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Rg.prototype.Aa=function(){this.g=!1},Rg.prototype.info=function(){};var ul={},Q_=null;function Pg(){return Q_=Q_||new sr}function qI(n){qr.call(this,ul.Ma,n)}function kg(n){const e=Pg();Gt(e,new qI(e,n))}function ST(n,e){qr.call(this,ul.STAT_EVENT,n),this.stat=e}function Ki(n){const e=Pg();Gt(e,new ST(e,n))}function AT(n,e){qr.call(this,ul.Na,n),this.size=e}function jd(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return xt.setTimeout(function(){n()},e)}ul.Ma="serverreachability",Or(qI,qr),ul.STAT_EVENT="statevent",Or(ST,qr),ul.Na="timingevent",Or(AT,qr);var cl={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ZI={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function J_(){}function $d(){}J_.prototype.h=null;var nv,Sf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ev(){qr.call(this,"d")}function tv(){qr.call(this,"c")}function Ng(){}function Hd(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Ud(this),this.P=xT,this.W=new Mg(n=L_?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new WI}function WI(){this.i=null,this.g="",this.h=!1}Or(ev,qr),Or(tv,qr),Or(Ng,J_),Ng.prototype.g=function(){return new XMLHttpRequest},Ng.prototype.i=function(){return{}},nv=new Ng;var xT=45e3,tc={},Og={};function Lg(n,e,t){n.K=1,n.v=xf(nu(e)),n.s=t,n.U=!0,KI(n,null)}function KI(n,e){n.F=Date.now(),Af(n),n.A=nu(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),rE(t.h,"t",r),n.C=0,t=n.l.H,n.h=new WI,n.g=_E(n.l,t?e:null,!n.s),0<n.O&&(n.L=new $I(Nr(n.Ia,n,n.g),n.O)),Vd(n.V,n.g,"readystatechange",n.gb),e=n.H?bI(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),kg(1),function TT(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var l="",m=u.split("&"),v=0;v<m.length;v++){var b=m[v].split("=");if(1<b.length){var A=b[0];b=b[1];var R=A.split("_");l=2<=R.length&&"type"==R[1]?l+(A+"=")+b+"&":l+(A+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.X,n.s)}function rv(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function YI(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=QI(n,t),o==Og){4==e&&(n.o=4,Ki(14),r=!1),al(n.j,n.m,null,"[Incomplete Response]");break}if(o==tc){n.o=4,Ki(15),al(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}al(n.j,n.m,o,null),iv(n,o)}rv(n)&&o!=Og&&o!=tc&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ki(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),yv(e),e.L=!0,Ki(11))):(al(n.j,n.m,t,"[Invalid Chunked Response]"),nc(n),Gd(n))}function QI(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Og:(t=Number(e.substring(t,r)),isNaN(t)?tc:(r+=1)+t>e.length?Og:(e=e.substr(r,t),n.C=r+t,e))}function Af(n){n.Y=Date.now()+n.P,Fg(n,n.P)}function Fg(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=jd(Nr(n.eb,n),e)}function Ug(n){n.B&&(xt.clearTimeout(n.B),n.B=null)}function Gd(n){0==n.l.G||n.I||em(n.l,n)}function nc(n){Ug(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,K_(n.W),Bd(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function iv(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Pf(t.i,n)))if(t.I=n.N,!n.J&&Pf(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Xg(t),Nf(t)}mv(t),Ki(18)}}else t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=jd(Nr(t.ab,t),6e3));if(1>=oE(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else dl(t,11)}else if((n.J||t.g==n)&&Xg(t),!Tf(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let b=o[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const A=b[3];null!=A&&(t.ma=A,t.h.info("VER="+t.ma));const R=b[4];null!=R&&(t.za=R,t.h.info("SVER="+t.za));const U=b[5];null!=U&&"number"==typeof U&&0<U&&(t.K=r=1.5*U,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const Y=n.g;if(Y){const te=Y.g?Y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(te){var u=r.i;!u.g&&(di(te,"spdy")||di(te,"quic")||di(te,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(lv(u,u.h),u.h=null))}if(r.D){const Se=Y.g?Y.g.getResponseHeader("X-HTTP-Session-Id"):null;Se&&(r.sa=Se,Dn(r.F,r.D,Se))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var l=n;if((r=t).oa=Wd(r,r.H?r.la:null,r.W),l.J){aE(r.i,l);var m=l,v=r.K;v&&m.setTimeout(v),m.B&&(Ug(m),Af(m)),r.g=l}else yE(r);0<t.l.length&&Jg(t)}else"stop"!=b[0]&&"close"!=b[0]||dl(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?dl(t,7):Yg(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}kg(4)}catch{}}function sv(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(C_(n)||"string"==typeof n)M_(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(C_(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function MT(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(C_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function rc(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof rc)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function ov(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];ic(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)ic(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function ic(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Ze=Hd.prototype).setTimeout=function(n){this.P=n},Ze.gb=function(n){n=n.target;const e=this.L;e&&3==ru(n)?e.l():this.Ia(n)},Ze.Ia=function(n){try{if(n==this.g)e:{const A=ru(this.g);var e=this.g.Da();const R=this.g.ba();if(!(3>A)&&(3!=A||L_||this.g&&(this.h.h||this.g.ga()||gE(this.g)))){this.I||4!=A||7==e||kg(8==e||0>=R?3:2),Ug(this);var t=this.g.ba();this.N=t;t:if(rv(this)){var r=gE(this.g);n="";var o=r.length,u=4==ru(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){nc(this),Gd(this);var l="";break t}this.h.i=new xt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==t,function CT(n,e,t,r,o,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.X,A,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,v=this.g;if((m=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Tf(m)){var b=m;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Ki(12),nc(this),Gd(this);break e}al(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,iv(this,t)}this.U?(YI(this,A,l),L_&&this.i&&3==A&&(Vd(this.V,this.W,"tick",this.fb),this.W.start())):(al(this.j,this.m,l,null),iv(this,l)),4==A&&nc(this),this.i&&!this.I&&(4==A?em(this.l,this):(this.i=!1,Af(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Ki(12)):(this.o=0,Ki(13)),nc(this),Gd(this)}}}catch{}},Ze.fb=function(){if(this.g){var n=ru(this.g),e=this.g.ga();this.C<e.length&&(Ug(this),YI(this,n,e),this.i&&4!=n&&Af(this))}},Ze.cancel=function(){this.I=!0,nc(this)},Ze.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function GI(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(kg(3),Ki(17)),nc(this),this.o=2,Gd(this)):Fg(this,this.Y-n)},(Ze=rc.prototype).R=function(){ov(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Ze.T=function(){return ov(this),this.g.concat()},Ze.get=function(n,e){return ic(this.h,n)?this.h[n]:e},Ze.set=function(n,e){ic(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Ze.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var JI=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ll(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof ll){this.g=void 0!==e?e:n.g,Vg(this,n.j),this.s=n.s,Bg(this,n.i),jg(this,n.m),this.l=n.l,e=n.h;var t=new Rf;t.i=e.i,e.g&&(t.g=new rc(e.g),t.h=e.h),XI(this,t),this.o=n.o}else n&&(t=String(n).match(JI))?(this.g=!!e,Vg(this,t[1]||"",!0),this.s=zd(t[2]||""),Bg(this,t[3]||"",!0),jg(this,t[4]),this.l=zd(t[5]||"",!0),XI(this,t[6]||"",!0),this.o=zd(t[7]||"")):(this.g=!!e,this.h=new Rf(null,this.g))}function nu(n){return new ll(n)}function Vg(n,e,t){n.j=t?zd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Bg(n,e,t){n.i=t?zd(e,!0):e}function jg(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function XI(n,e,t){e instanceof Rf?(n.h=e,function iE(n,e){e&&!n.j&&(sc(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&($g(this,r),rE(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Mf(e,tE)),n.h=new Rf(e,n.g))}function Dn(n,e,t){n.h.set(e,t)}function xf(n){return Dn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function zd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Mf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,NT),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function NT(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ll.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Mf(e,eE,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Mf(e,eE,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Mf(t,"/"==t.charAt(0)?uv:av,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Mf(t,cv)),n.join("")};var eE=/[#\/\?@]/g,av=/[#\?:]/g,uv=/[#\?]/g,tE=/[#\?@]/g,cv=/#/g;function Rf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function sc(n){n.g||(n.g=new rc,n.h=0,n.i&&function RT(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function $g(n,e){sc(n),e=yo(n,e),ic(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,ic((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&ov(n)))}function nE(n,e){return sc(n),e=yo(n,e),ic(n.g.h,e)}function rE(n,e,t){$g(n,e),0<t.length&&(n.i=null,n.g.set(yo(n,e),Dg(t)),n.h+=t.length)}function yo(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function LT(n){this.l=n||sE,n=xt.PerformanceNavigationTiming?0<(n=xt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(xt.g&&xt.g.Ea&&xt.g.Ea()&&xt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ze=Rf.prototype).add=function(n,e){sc(this),this.i=null,n=yo(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ze.forEach=function(n,e){sc(this),this.g.forEach(function(t,r){M_(t,function(o){n.call(e,o,r,this)},this)},this)},Ze.T=function(){sc(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},Ze.R=function(n){sc(this);var e=[];if("string"==typeof n)nE(this,n)&&(e=bf(e,this.g.get(yo(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=bf(e,n[t])}return e},Ze.set=function(n,e){return sc(this),this.i=null,nE(this,n=yo(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ze.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Ze.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var l=o;""!==r[u]&&(l+="="+encodeURIComponent(String(r[u]))),n.push(l)}}return this.i=n.join("&")};var sE=10;function Hg(n){return!!n.h||!!n.g&&n.g.size>=n.j}function oE(n){return n.h?1:n.g?n.g.size:0}function Pf(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function lv(n,e){n.g?n.g.add(e):n.h=e}function aE(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Gg(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Dg(n.i)}function zg(){}function uE(){this.g=new zg}function cE(n,e,t){const r=t||"";try{sv(n,function(o,u){let l=o;Ef(o)&&(l=Ag(o)),e.push(r+u+"="+encodeURIComponent(l))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function qg(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function kf(n){this.l=n.$b||null,this.j=n.ib||!1}function Zg(n,e){sr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=dv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}LT.prototype.cancel=function(){if(this.i=Gg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},zg.prototype.stringify=function(n){return xt.JSON.stringify(n,void 0)},zg.prototype.parse=function(n){return xt.JSON.parse(n,void 0)},Or(kf,J_),kf.prototype.g=function(){return new Zg(this.l,this.j)},kf.prototype.i=function(n){return function(){return n}}({}),Or(Zg,sr);var dv=0;function hv(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Wg(n){n.readyState=4,n.l=null,n.j=null,n.A=null,qd(n)}function qd(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ze=Zg.prototype).open=function(n,e){if(this.readyState!=dv)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,qd(this)},Ze.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||xt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ze.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Wg(this)),this.readyState=dv},Ze.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,qd(this)),this.g&&(this.readyState=3,qd(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof xt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;hv(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Ze.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Wg(this):qd(this),3==this.readyState&&hv(this)}},Ze.Ua=function(n){this.g&&(this.response=this.responseText=n,Wg(this))},Ze.Ta=function(n){this.g&&(this.response=n,Wg(this))},Ze.ha=function(){this.g&&Wg(this)},Ze.setRequestHeader=function(n,e){this.v.append(n,e)},Ze.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ze.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Zg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var FT=xt.JSON.parse;function mr(n){sr.call(this),this.headers=new rc,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=UT,this.K=this.L=!1}Or(mr,sr);var UT="",$A=/^https?$/i,VT=["POST","PUT"];function jT(n){return"content-type"==n.toLowerCase()}function dE(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,hE(n),Kg(n)}function hE(n){n.D||(n.D=!0,Gt(n,"complete"),Gt(n,"error"))}function fE(n){if(n.h&&typeof _s<"u"&&(!n.C[1]||4!=ru(n)||2!=n.ba()))if(n.v&&4==ru(n))Fd(n.Fa,0,n);else if(Gt(n,"readystatechange"),4==ru(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(JI)[1]||null;if(!o&&xt.self&&xt.self.location){var u=xt.self.location.protocol;o=u.substr(0,u.length-1)}r=!$A.test(o?o.toLowerCase():"")}t=r}if(t)Gt(n,"complete"),Gt(n,"success");else{n.m=6;try{var l=2<ru(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.ba()+"]",hE(n)}}finally{Kg(n)}}}function Kg(n,e){if(n.g){pE(n);const t=n.g,r=n.C[0]?If:null;n.g=null,n.C=null,e||Gt(n,"ready");try{t.onreadystatechange=r}catch{}}}function pE(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(xt.clearTimeout(n.A),n.A=null)}function ru(n){return n.g?n.g.readyState:0}function gE(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case UT:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function fv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function $T(n){let e="";return N_(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Dn(n,e,t))}function iu(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function pv(n){this.za=0,this.l=[],this.h=new Rg,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=iu("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=iu("baseRetryDelayMs",5e3,n),this.$a=iu("retryDelaySeedMs",1e4,n),this.Ya=iu("forwardChannelMaxRetries",2,n),this.ra=iu("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new LT(n&&n.concurrentRequestLimit),this.Ca=new uE,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Yg(n){if(gv(n),3==n.G){var e=n.V++,t=nu(n.F);Dn(t,"SID",n.J),Dn(t,"RID",e),Dn(t,"TYPE","terminate"),Of(n,t),(e=new Hd(n,n.h,e,void 0)).K=2,e.v=xf(nu(t)),t=!1,xt.navigator&&xt.navigator.sendBeacon&&(t=xt.navigator.sendBeacon(e.v.toString(),"")),!t&&xt.Image&&((new Image).src=e.v,t=!0),t||(e.g=_E(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Af(e)}tm(n)}function Nf(n){n.g&&(yv(n),n.g.cancel(),n.g=null)}function gv(n){Nf(n),n.u&&(xt.clearTimeout(n.u),n.u=null),Xg(n),n.i.cancel(),n.m&&("number"==typeof n.m&&xt.clearTimeout(n.m),n.m=null)}function Qg(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Jg(n)}function Jg(n){Hg(n.i)||n.m||(n.m=!0,xg(n.Ha,n),n.C=0)}function GT(n,e){var t;t=e?e.m:n.V++;const r=nu(n.F);Dn(r,"SID",n.J),Dn(r,"RID",t),Dn(r,"AID",n.U),Of(n,r),n.o&&n.s&&fv(r,n.o,n.s),t=new Hd(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=mE(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),lv(n.i,t),Lg(t,r,e)}function Of(n,e){n.j&&sv({},function(t,r){Dn(e,r,t)})}function mE(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Nr(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=o[0].h,l.push("ofs="+u)):u=0:l.push("ofs="+u);let m=!0;for(let v=0;v<t;v++){let b=o[v].h;const A=o[v].g;if(b-=u,0>b)u=Math.max(0,o[v].h-100),m=!1;else try{cE(A,l,"req"+b+"_")}catch{r&&r(A)}}if(m){r=l.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function yE(n){n.g||n.u||(n.Y=1,xg(n.Ga,n),n.A=0)}function mv(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=jd(Nr(n.Ga,n),_o(n,n.A)),n.A++,0))}function yv(n){null!=n.B&&(xt.clearTimeout(n.B),n.B=null)}function Zd(n){n.g=new Hd(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=nu(n.oa);Dn(e,"RID","rpc"),Dn(e,"SID",n.J),Dn(e,"CI",n.N?"0":"1"),Dn(e,"AID",n.U),Of(n,e),Dn(e,"TYPE","xmlhttp"),n.o&&n.s&&fv(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=xf(nu(e)),t.s=null,t.U=!0,KI(t,n)}function Xg(n){null!=n.v&&(xt.clearTimeout(n.v),n.v=null)}function em(n,e){var t=null;if(n.g==e){Xg(n),yv(n),n.g=null;var r=2}else{if(!Pf(n.i,e))return;t=e.D,aE(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Gt(r=Pg(),new AT(r,t,e,o)),Jg(n)}else yE(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function HT(n,e){return!(oE(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=jd(Nr(n.Ha,n,e),_o(n,n.C)),n.C++,0)))}(n,e)||2==r&&mv(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:dl(n,5);break;case 4:dl(n,10);break;case 3:dl(n,6);break;default:dl(n,2)}}function _o(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function dl(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Nr(n.jb,n);t||(t=new ll("//www.google.com/images/cleardot.gif"),xt.location&&"http"==xt.location.protocol||Vg(t,"https"),xf(t)),function lE(n,e){const t=new Rg;if(xt.Image){const r=new Image;r.onload=Ig(qg,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Ig(qg,t,r,"TestLoadImage: error",!1,e),r.onabort=Ig(qg,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ig(qg,t,r,"TestLoadImage: timeout",!1,e),xt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ki(2);n.G=0,n.j&&n.j.va(e),tm(n),gv(n)}function tm(n){n.G=0,n.I=-1,n.j&&((0!=Gg(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Dg(n.l),n.l.length=0),n.j.ua())}function Wd(n,e,t){let r=function PT(n){return n instanceof ll?nu(n):new ll(n,void 0)}(t);if(""!=r.i)e&&Bg(r,e+"."+r.i),jg(r,r.m);else{const o=xt.location;r=function kT(n,e,t,r){var o=new ll(null,void 0);return n&&Vg(o,n),e&&Bg(o,e),t&&jg(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&N_(n.aa,function(o,u){Dn(r,u,o)}),t=n.sa,(e=n.D)&&t&&Dn(r,e,t),Dn(r,"VER",n.ma),Of(n,r),r}function _E(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new mr(t&&n.Ba&&!n.qa?new kf({ib:!0}):n.qa)).L=n.H,e}function vE(){}function nm(){if(Pd&&!(10<=Number(RI)))throw Error("Environmental error: no available transport.")}function fi(n,e){sr.call(this),this.g=new pv(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Tf(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Tf(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Kd(this)}function Lf(n){ev.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function wE(){tv.call(this),this.status=1}function Kd(n){this.g=n}(Ze=mr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():nv.g(),this.C=function X_(n){return n.h||(n.h=n.i())}(this.u?this.u:nv),this.g.onreadystatechange=Nr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void dE(this,u)}n=t||"";const o=new rc(this.headers);r&&sv(r,function(u,l){o.set(l,u)}),r=function DI(n){e:{var e=jT;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=xt.FormData&&n instanceof xt.FormData,!(0<=x_(VT,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,l){this.g.setRequestHeader(l,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{pE(this),0<this.B&&((this.K=function BT(n){return Pd&&function MI(){return function gT(n){var e=_T;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=R_(String(Tg)).split("."),t=R_("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var o=e[l]||"",u=t[l]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=bg(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||bg(0==o[2].length,0==u[2].length)||bg(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Nr(this.pa,this)):this.A=Fd(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){dE(this,u)}},Ze.pa=function(){typeof _s<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Gt(this,"timeout"),this.abort(8))},Ze.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Gt(this,"complete"),Gt(this,"abort"),Kg(this))},Ze.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Kg(this,!0)),mr.Z.M.call(this)},Ze.Fa=function(){this.s||(this.F||this.v||this.l?fE(this):this.cb())},Ze.cb=function(){fE(this)},Ze.ba=function(){try{return 2<ru(this)?this.g.status:-1}catch{return-1}},Ze.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ze.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),FT(e)}},Ze.Da=function(){return this.m},Ze.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ze=pv.prototype).ma=8,Ze.G=1,Ze.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},Ze.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new Hd(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=bI(u),CI(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=mE(this,o,e),Dn(t=nu(this.F),"RID",n),Dn(t,"CVER",22),this.D&&Dn(t,"X-HTTP-Session-Id",this.D),Of(this,t),this.o&&u&&fv(t,this.o,u),lv(this.i,o),this.Ra&&Dn(t,"TYPE","init"),this.ja?(Dn(t,"$req",e),Dn(t,"SID","null"),o.$=!0,Lg(o,t,null)):Lg(o,t,e),this.G=2}}else 3==this.G&&(n?GT(this,n):0==this.l.length||Hg(this.i)||GT(this))},Ze.Ga=function(){if(this.u=null,Zd(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=jd(Nr(this.bb,this),n)}},Ze.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ki(10),Nf(this),Zd(this))},Ze.ab=function(){null!=this.v&&(this.v=null,Nf(this),mv(this),Ki(19))},Ze.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Ki(2)):(this.h.info("Failed to ping google.com"),Ki(1))},(Ze=vE.prototype).xa=function(){},Ze.wa=function(){},Ze.va=function(){},Ze.ua=function(){},Ze.Oa=function(){},nm.prototype.g=function(n,e){return new fi(n,e)},Or(fi,sr),fi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),xg(Nr(n.hb,n,e))),Ki(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Wd(n,null,n.W),Jg(n)},fi.prototype.close=function(){Yg(this.g)},fi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Qg(this.g,e)}else this.v?((e={}).__data__=Ag(n),Qg(this.g,e)):Qg(this.g,n)},fi.prototype.M=function(){this.g.j=null,delete this.j,Yg(this.g),delete this.g,fi.Z.M.call(this)},Or(Lf,ev),Or(wE,tv),Or(Kd,vE),Kd.prototype.xa=function(){Gt(this.g,"a")},Kd.prototype.wa=function(n){Gt(this.g,new Lf(n))},Kd.prototype.va=function(n){Gt(this.g,new wE(n))},Kd.prototype.ua=function(){Gt(this.g,"b")},nm.prototype.createWebChannel=nm.prototype.g,fi.prototype.send=fi.prototype.u,fi.prototype.open=fi.prototype.m,fi.prototype.close=fi.prototype.close,cl.NO_ERROR=0,cl.TIMEOUT=8,cl.HTTP_ERROR=6,ZI.COMPLETE="complete",$d.EventType=Sf,Sf.OPEN="a",Sf.CLOSE="b",Sf.ERROR="c",Sf.MESSAGE="d",sr.prototype.listen=sr.prototype.N,mr.prototype.listenOnce=mr.prototype.O,mr.prototype.getLastError=mr.prototype.La,mr.prototype.getLastErrorCode=mr.prototype.Da,mr.prototype.getStatus=mr.prototype.ba,mr.prototype.getResponseJson=mr.prototype.Qa,mr.prototype.getResponseText=mr.prototype.ga,mr.prototype.send=mr.prototype.ea;var IE=kr.createWebChannelTransport=function(){return new nm},EE=kr.getStatEventTarget=function(){return Pg()},Ff=kr.ErrorCode=cl,DE=kr.EventType=ZI,zT=kr.Event=ul,bE=kr.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},HA=kr.FetchXmlHttpFactory=kf,Yd=kr.WebChannel=$d,_v=kr.XhrIo=mr;const vv="@firebase/firestore";class yr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yr.UNAUTHENTICATED=new yr(null),yr.GOOGLE_CREDENTIALS=new yr("google-credentials-uid"),yr.FIRST_PARTY=new yr("first-party-uid"),yr.MOCK_USER=new yr("mock-user");let oc="9.9.2";const ac=new qu.Yd("@firebase/firestore");function wv(){return ac.logLevel}function Ne(n,...e){if(ac.logLevel<=qu.in.DEBUG){const t=e.map(rm);ac.debug(`Firestore (${oc}): ${n}`,...t)}}function Qn(n,...e){if(ac.logLevel<=qu.in.ERROR){const t=e.map(rm);ac.error(`Firestore (${oc}): ${n}`,...t)}}function su(n,...e){if(ac.logLevel<=qu.in.WARN){const t=e.map(rm);ac.warn(`Firestore (${oc}): ${n}`,...t)}}function rm(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function nt(n="Unexpected state"){const e=`FIRESTORE (${oc}) INTERNAL ASSERTION FAILED: `+n;throw Qn(e),new Error(e)}function Ct(n,e){n||nt()}function We(n,e){return n}const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends lt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Lr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Iv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ZT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yr.UNAUTHENTICATED))}shutdown(){}}class Mi{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Qd{constructor(e){this.t=e,this.currentUser=yr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=b=>this.i!==o?(o=this.i,t(b)):Promise.resolve();let l=new Lr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Lr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const b=l;e.enqueueRetryable((0,ye.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},v=b=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(b=>v(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?v(b):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Lr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ct("string"==typeof r.accessToken),new Iv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ct(null===e||"string"==typeof e),new yr(e)}}class WT{constructor(e,t,r){this.type="FirstParty",this.user=yr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class KT{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new WT(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(yr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class YT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class GA{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.p;return this.p=u.token,Ne("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ct("string"==typeof t.token),this.p=t.token,new YT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function CE(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Jd{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=CE(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Pt(n,e){return n<e?-1:n>e?1:0}function uc(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function SE(n){return n+"\0"}class bn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return bn.fromMillis(Date.now())}static fromDate(e){return bn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new bn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Pt(this.nanoseconds,e.nanoseconds):Pt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class St{constructor(e){this.timestamp=e}static fromTimestamp(e){return new St(e)}static min(){return new St(new bn(0,0))}static max(){return new St(new bn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Uf{constructor(e,t,r){void 0===t?t=0:t>e.length&&nt(),void 0===r?r=e.length-t:r>e.length-t&&nt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Uf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Uf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),l=t.get(o);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ht extends Uf{construct(e,t,r){return new Ht(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Ht(t)}static emptyPath(){return new Ht([])}}const JT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Un extends Uf{construct(e,t,r){return new Un(e,t,r)}static isValidIdentifier(e){return JT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Un.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Un(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Re(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Re(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[o+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new Re(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,o+=2}else"`"===m?(l=!l,o++):"."!==m||l?(r+=m,o++):(u(),o++)}if(u(),l)throw new Re(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Un(t)}static emptyPath(){return new Un([])}}class He{constructor(e){this.path=e}static fromPath(e){return new He(Ht.fromString(e))}static fromName(e){return new He(Ht.fromString(e).popFirst(5))}static empty(){return new He(Ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ht.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new He(new Ht(e.slice()))}}class Vf{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function Xd(n){return n.fields.find(e=>2===e.kind)}function ou(n){return n.fields.filter(e=>2!==e.kind)}Vf.UNKNOWN_ID=-1;class Bf{constructor(e,t){this.fieldPath=e,this.kind=t}}class eh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new eh(0,Yi.min())}}function hl(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=St.fromTimestamp(1e9===r?new bn(t+1,0):new bn(t,r));return new Yi(o,He.empty(),e)}function AE(n){return new Yi(n.readTime,n.key,-1)}class Yi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Yi(St.min(),He.empty(),-1)}static max(){return new Yi(St.max(),He.empty(),-1)}}function jf(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=He.comparator(n.documentKey,e.documentKey),0!==t?t:Pt(n.largestBatchId,e.largestBatchId))}const eC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function fl(n){return Ev.apply(this,arguments)}function Ev(){return Ev=(0,ye.Z)(function*(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==eC)throw n;Ne("LocalStore","Unexpectedly lost primary lease")}),Ev.apply(this,arguments)}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&nt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,r)=>{t(e)})}static reject(e){return new oe((t,r)=>{r(e)})}static waitFor(e){return new oe((t,r)=>{let o=0,u=0,l=!1;e.forEach(m=>{++o,m.next(()=>{++u,l&&u===o&&t()},v=>r(v))}),l=!0,u===o&&t()})}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next(o=>o?oe.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new oe((r,o)=>{const u=e.length,l=new Array(u);let m=0;for(let v=0;v<u;v++){const b=v;t(e[b]).next(A=>{l[b]=A,++m,m===u&&r(l)},A=>o(A))}})}static doWhile(e,t){return new oe((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class im{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new Lr,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new $f(e,t.error)):this.T.resolve()},this.transaction.onerror=r=>{const o=sm(r.target.error);this.T.reject(new $f(e,o))}}static open(e,t,r,o){try{return new im(t,e.transaction(o,r))}catch(u){throw new $f(t,u)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(Ne("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new RE(t)}}class Gs{constructor(e,t,r){this.name=e,this.version=t,this.P=r,12.2===Gs.v((0,lt.z$)())&&Qn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ne("SimpleDb","Removing database:",e),pl(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,lt.hl)())return!1;if(Gs.S())return!0;const e=(0,lt.z$)(),t=Gs.v(e),r=0<t&&t<10,o=Gs.D(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static S(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(e){var t=this;return(0,ye.Z)(function*(){return t.db||(Ne("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{o(new $f(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const m=l.target.error;o("VersionError"===m.name?new Re(le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Re(le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new $f(e,m))},u.onupgradeneeded=l=>{Ne("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.P.M(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Ne("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.O&&(t.db.onversionchange=r=>t.O(r)),t.db})()}F(e){this.O=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,ye.Z)(function*(){const l="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.k(e);const v=im.open(u.db,e,l?"readonly":"readwrite",r),b=o(v).next(A=>(v.R(),A)).catch(A=>(v.abort(A),oe.reject(A))).toPromise();return b.catch(()=>{}),yield v.A,b}catch(v){const b=v,A="FirebaseError"!==b.name&&m<3;if(Ne("SimpleDb","Transaction failed with error:",b.message,"Retrying:",A),u.close(),!A)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ME{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return pl(this.$.delete())}}class $f extends Re{constructor(e,t){super(le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function au(n){return"IndexedDbTransactionError"===n.name}class RE{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ne("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ne("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),pl(r)}add(e){return Ne("SimpleDb","ADD",this.store.name,e,e),pl(this.store.add(e))}get(e){return pl(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ne("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ne("SimpleDb","DELETE",this.store.name,e),pl(this.store.delete(e))}count(){return Ne("SimpleDb","COUNT",this.store.name),pl(this.store.count())}K(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.G(o,(l,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new oe((u,l)=>{o.onerror=m=>{l(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new oe((o,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{o(l.target.result)}})}W(e,t){Ne("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const o=this.cursor(r);return this.G(o,(u,l,m)=>m.delete())}J(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.G(o,t)}Y(e){const t=this.cursor({});return new oe((r,o)=>{t.onerror=u=>{const l=sm(u.target.error);o(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(m=>{m?l.continue():r()}):r()}})}G(e,t){const r=[];return new oe((o,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const m=l.target.result;if(!m)return void o();const v=new ME(m),b=t(m.primaryKey,m.value,v);if(b instanceof oe){const A=b.catch(R=>(v.done(),oe.reject(R)));r.push(A)}v.isDone?o():null===v.U?m.continue():m.continue(v.U)}}).next(()=>oe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function pl(n){return new oe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=sm(r.target.error);t(o)}})}let PE=!1;function sm(n){const e=Gs.v((0,lt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return PE||(PE=!0,setTimeout(()=>{throw r},0)),r}}return n}class tC{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.Z(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;Ne("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ye.Z)(function*(){t.task=null;try{Ne("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(r){au(r)?Ne("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield fl(r)}yield t.Z(1)}))}}class kE{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,ye.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.et(r,e))})()}et(e,t){const r=new Set;let o=t,u=!0;return oe.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Ne("IndexBackiller",`Processing collection: ${l}`),this.nt(e,l,o).next(m=>{o-=m,r.add(l)});u=!1})).next(()=>t-o)}nt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.st(o,u)).next(m=>(Ne("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>l.size)}))}st(e,t){let r=e;return t.changes.forEach((o,u)=>{const l=AE(u);jf(l,r)>0&&(r=l)}),new Yi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ri{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function Dv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function cc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function NE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Ri.ot=-1;class Jn{constructor(e,t){this.comparator=e,this.root=t||Fr.EMPTY}insert(e,t){return new Jn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Fr.BLACK,null,null))}remove(e){return new Jn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bv(this.root,e,this.comparator,!1)}getReverseIterator(){return new bv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bv(this.root,e,this.comparator,!0)}}class bv{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Fr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??Fr.RED,this.left=o??Fr.EMPTY,this.right=u??Fr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Fr(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Fr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Fr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Fr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Fr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nt();const e=this.left.check();if(e!==this.right.check())throw nt();return e+(this.isRed()?0:1)}}Fr.EMPTY=null,Fr.RED=!0,Fr.BLACK=!1,Fr.EMPTY=new class{constructor(){this.size=0}get key(){throw nt()}get value(){throw nt()}get color(){throw nt()}get left(){throw nt()}get right(){throw nt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Fr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class hn{constructor(e){this.comparator=e,this.data=new Jn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new nC(this.data.getIterator())}getIteratorFrom(e){return new nC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof hn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new hn(this.comparator);return t.data=e,t}}class nC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Hf(n){return n.hasNext()?n.getNext():void 0}class zs{constructor(e){this.fields=e,e.sort(Un.comparator)}static empty(){return new zs([])}unionWith(e){let t=new hn(Un.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new zs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return uc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ur{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ur(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Ur(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ur.EMPTY_BYTE_STRING=new Ur("");const ZA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gl(n){if(Ct(!!n),"string"==typeof n){let e=0;const t=ZA.exec(n);if(Ct(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tn(n.seconds),nanos:Tn(n.nanos)}}function Tn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function th(n){return"string"==typeof n?Ur.fromBase64String(n):Ur.fromUint8Array(n)}function om(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Gf(n){const e=n.mapValue.fields.__previous_value__;return om(e)?Gf(e):e}function nh(n){const e=gl(n.mapValue.fields.__local_write_time__.timestampValue);return new bn(e.seconds,e.nanos)}class OE{constructor(e,t,r,o,u,l,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=m,this.useFetchStreams=v}}class lc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new lc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof lc&&e.projectId===this.projectId&&e.database===this.database}}function ml(n){return null==n}function rh(n){return 0===n&&1/n==-1/0}function LE(n){return"number"==typeof n&&Number.isInteger(n)&&!rh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const uu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Tv={nullValue:"NULL_VALUE"};function ih(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?om(n)?4:Sv(n)?9007199254740991:10:nt()}function na(n,e){if(n===e)return!0;const t=ih(n);if(t!==ih(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return nh(n).isEqual(nh(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=gl(r.timestampValue),l=gl(o.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,th(n.bytesValue).isEqual(th(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Tn(r.geoPointValue.latitude)===Tn(o.geoPointValue.latitude)&&Tn(r.geoPointValue.longitude)===Tn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Tn(r.integerValue)===Tn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Tn(r.doubleValue),l=Tn(o.doubleValue);return u===l?rh(u)===rh(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return uc(n.arrayValue.values||[],e.arrayValue.values||[],na);case 10:return function(r,o){const u=r.mapValue.fields||{},l=o.mapValue.fields||{};if(Dv(u)!==Dv(l))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===l[m]||!na(u[m],l[m])))return!1;return!0}(n,e);default:return nt()}var o}function zf(n,e){return void 0!==(n.values||[]).find(t=>na(t,e))}function vo(n,e){if(n===e)return 0;const t=ih(n),r=ih(e);if(t!==r)return Pt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const l=Tn(o.integerValue||o.doubleValue),m=Tn(u.integerValue||u.doubleValue);return l<m?-1:l>m?1:l===m?0:isNaN(l)?isNaN(m)?0:-1:1}(n,e);case 3:return FE(n.timestampValue,e.timestampValue);case 4:return FE(nh(n),nh(e));case 5:return Pt(n.stringValue,e.stringValue);case 6:return function(o,u){const l=th(o),m=th(u);return l.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const l=o.split("/"),m=u.split("/");for(let v=0;v<l.length&&v<m.length;v++){const b=Pt(l[v],m[v]);if(0!==b)return b}return Pt(l.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const l=Pt(Tn(o.latitude),Tn(u.latitude));return 0!==l?l:Pt(Tn(o.longitude),Tn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const l=o.values||[],m=u.values||[];for(let v=0;v<l.length&&v<m.length;++v){const b=vo(l[v],m[v]);if(b)return b}return Pt(l.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===uu.mapValue&&u===uu.mapValue)return 0;if(o===uu.mapValue)return 1;if(u===uu.mapValue)return-1;const l=o.fields||{},m=Object.keys(l),v=u.fields||{},b=Object.keys(v);m.sort(),b.sort();for(let A=0;A<m.length&&A<b.length;++A){const R=Pt(m[A],b[A]);if(0!==R)return R;const U=vo(l[m[A]],v[b[A]]);if(0!==U)return U}return Pt(m.length,b.length)}(n.mapValue,e.mapValue);default:throw nt()}}function FE(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Pt(n,e);const t=gl(n),r=gl(e),o=Pt(t.seconds,r.seconds);return 0!==o?o:Pt(t.nanos,r.nanos)}function qf(n){return UE(n)}function UE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=gl(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?th(n.bytesValue).toBase64():"referenceValue"in n?He.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const l of r.values||[])u?u=!1:o+=",",o+=UE(l);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const m of o)l?l=!1:u+=",",u+=`${m}:${UE(r.fields[m])}`;return u+"}"}(n.mapValue):nt();var e}function sh(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Cv(n){return!!n&&"integerValue"in n}function Zf(n){return!!n&&"arrayValue"in n}function VE(n){return!!n&&"nullValue"in n}function rC(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function am(n){return!!n&&"mapValue"in n}function oh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return cc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=oh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=oh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Sv(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function WA(n){return"nullValue"in n?Tv:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?sh(lc.empty(),He.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:nt()}function wo(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?sh(lc.empty(),He.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?uu:nt()}function BE(n,e){const t=vo(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function um(n,e){const t=vo(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Zr{constructor(e){this.value=e}static empty(){return new Zr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!am(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=oh(t)}setAll(e){let t=Un.emptyPath(),r={},o=[];e.forEach((l,m)=>{if(!t.isImmediateParentOf(m)){const v=this.getFieldsMap(t);this.applyChanges(v,r,o),r={},o=[],t=m.popLast()}l?r[m.lastSegment()]=oh(l):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());am(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return na(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];am(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){cc(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Zr(oh(this.value))}}function Qi(n){const e=[];return cc(n.fields,(t,r)=>{const o=new Un([t]);if(am(r)){const u=Qi(r.mapValue).fields;if(0===u.length)e.push(o);else for(const l of u)e.push(o.child(l))}else e.push(o)}),new zs(e)}class vn{constructor(e,t,r,o,u,l){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=l}static newInvalidDocument(e){return new vn(e,0,St.min(),St.min(),Zr.empty(),0)}static newFoundDocument(e,t,r){return new vn(e,1,t,St.min(),r,0)}static newNoDocument(e,t){return new vn(e,2,t,St.min(),Zr.empty(),0)}static newUnknownDocument(e,t){return new vn(e,3,t,St.min(),Zr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=St.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Av{constructor(e,t=null,r=[],o=[],u=null,l=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=l,this.endAt=m,this.ut=null}}function jE(n,e=null,t=[],r=[],o=null,u=null,l=null){return new Av(n,e,t,r,o,u,l)}function yl(n){const e=We(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+qf(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),ml(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>qf(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>qf(r)).join(",")),e.ut=t}return e.ut}function ah(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!oC(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!na(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!zE(n.startAt,e.startAt)&&zE(n.endAt,e.endAt)}function Wf(n){return He.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function cm(n,e){return n.filters.filter(t=>t instanceof Wr&&t.field.isEqual(e))}function Mv(n,e,t){let r=Tv,o=!0;for(const u of cm(n,e)){let l=Tv,m=!0;switch(u.op){case"<":case"<=":l=WA(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,m=!1;break;case"!=":case"not-in":l=Tv}BE({value:r,inclusive:o},{value:l,inclusive:m})<0&&(r=l,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];BE({value:r,inclusive:o},{value:l,inclusive:t.inclusive})<0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}function Rv(n,e,t){let r=uu,o=!0;for(const u of cm(n,e)){let l=uu,m=!0;switch(u.op){case">=":case">":l=wo(u.value),m=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,m=!1;break;case"!=":case"not-in":l=uu}um({value:r,inclusive:o},{value:l,inclusive:m})>0&&(r=l,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];um({value:r,inclusive:o},{value:l,inclusive:t.inclusive})>0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}class Wr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new $E(e,t,r):"array-contains"===t?new HE(e,r):"in"===t?new kv(e,r):"not-in"===t?new lu(e,r):"array-contains-any"===t?new sC(e,r):new Wr(e,t,r)}static ct(e,t,r){return"in"===t?new iC(e,r):new Pv(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(vo(t,this.value)):null!==t&&ih(this.value)===ih(t)&&this.at(vo(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return nt()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class $E extends Wr{constructor(e,t,r){super(e,t,r),this.key=He.fromName(r.referenceValue)}matches(e){const t=He.comparator(e.key,this.key);return this.at(t)}}class iC extends Wr{constructor(e,t){super(e,"in",t),this.keys=cu(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Pv extends Wr{constructor(e,t){super(e,"not-in",t),this.keys=cu(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function cu(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>He.fromName(r.referenceValue))}class HE extends Wr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Zf(t)&&zf(t.arrayValue,this.value)}}class kv extends Wr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&zf(this.value.arrayValue,t)}}class lu extends Wr{constructor(e,t){super(e,"not-in",t)}matches(e){if(zf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!zf(this.value.arrayValue,t)}}class sC extends Wr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Zf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>zf(this.value.arrayValue,r))}}class _l{constructor(e,t){this.position=e,this.inclusive=t}}class uh{constructor(e,t="asc"){this.field=e,this.dir=t}}function oC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function GE(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],l=n.position[o];if(r=u.field.isKeyField()?He.comparator(He.fromName(l.referenceValue),t.key):vo(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function zE(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!na(n.position[t],e.position[t]))return!1;return!0}class ra{constructor(e,t=null,r=[],o=[],u=null,l="F",m=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=l,this.startAt=m,this.endAt=v,this.lt=null,this.ft=null}}function aC(n,e,t,r,o,u,l,m){return new ra(n,e,t,r,o,u,l,m)}function vl(n){return new ra(n)}function qE(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function lm(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function ZE(n){for(const e of n.filters)if(e.ht())return e.field;return null}function Kf(n){return null!==n.collectionGroup}function wl(n){const e=We(n);if(null===e.lt){e.lt=[];const t=ZE(e),r=lm(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new uh(t)),e.lt.push(new uh(Un.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.lt.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new uh(Un.keyField(),u))}}}return e.lt}function Pi(n){const e=We(n);if(!e.ft)if("F"===e.limitType)e.ft=jE(e.path,e.collectionGroup,wl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of wl(e))t.push(new uh(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new _l(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new _l(e.startAt.position,e.startAt.inclusive):null;e.ft=jE(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.ft}function dm(n,e,t){return new ra(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ch(n,e){return ah(Pi(n),Pi(e))&&n.limitType===e.limitType}function Nv(n){return`${yl(Pi(n))}|lt:${n.limitType}`}function lh(n){return`Query(target=${function xv(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${qf(r.value)}`;var r}).join(", ")}]`),ml(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>qf(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>qf(t)).join(",")),`Target(${e})`}(Pi(n))}; limitType=${n.limitType})`}function dh(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):He.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,l){const m=GE(o,u,l);return o.inclusive?m<=0:m<0}(t.startAt,wl(t),r)||t.endAt&&!function(o,u,l){const m=GE(o,u,l);return o.inclusive?m>=0:m>0}(t.endAt,wl(t),r)));var t,r}function Ov(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function WE(n){return(e,t)=>{let r=!1;for(const o of wl(n)){const u=KE(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function KE(n,e,t){const r=n.field.isKeyField()?He.comparator(e.key,t.key):function(o,u,l){const m=u.data.field(o),v=l.data.field(o);return null!==m&&null!==v?vo(m,v):nt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return nt()}}function Lv(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rh(e)?"-0":e}}function YE(n){return{integerValue:""+n}}function QE(n,e){return LE(e)?YE(e):Lv(n,e)}class Fv{constructor(){this._=void 0}}function KA(n,e,t){return n instanceof hh?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Il?uC(n,e):n instanceof fh?cC(n,e):function(r,o){const u=XE(r,o),l=lC(u)+lC(r._t);return Cv(u)&&Cv(r._t)?YE(l):Lv(r.wt,l)}(n,e)}function JE(n,e,t){return n instanceof Il?uC(n,e):n instanceof fh?cC(n,e):t}function XE(n,e){return n instanceof Yf?Cv(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class hh extends Fv{}class Il extends Fv{constructor(e){super(),this.elements=e}}function uC(n,e){const t=eD(e);for(const r of n.elements)t.some(o=>na(o,r))||t.push(r);return{arrayValue:{values:t}}}class fh extends Fv{constructor(e){super(),this.elements=e}}function cC(n,e){let t=eD(e);for(const r of n.elements)t=t.filter(o=>!na(o,r));return{arrayValue:{values:t}}}class Yf extends Fv{constructor(e,t){super(),this.wt=e,this._t=t}}function lC(n){return Tn(n.integerValue||n.doubleValue)}function eD(n){return Zf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class dc{constructor(e,t){this.field=e,this.transform=t}}class hC{constructor(e,t){this.version=e,this.transformResults=t}}class Vn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Vn}static exists(e){return new Vn(void 0,e)}static updateTime(e){return new Vn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ia(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Qf{}function hm(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new El(n.key,Vn.none()):new du(n.key,n.data,Vn.none());{const t=n.data,r=Zr.empty();let o=new hn(Un.comparator);for(let u of e.fields)if(!o.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),o=o.add(u)}return new hc(n.key,r,new zs(o.toArray()),Vn.none())}}function Uv(n,e,t){n instanceof du?function(r,o,u){const l=r.value.clone(),m=pC(r.fieldTransforms,o,u.transformResults);l.setAll(m),o.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof hc?function(r,o,u){if(!ia(r.precondition,o))return void o.convertToUnknownDocument(u.version);const l=pC(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(fC(r)),m.setAll(l),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Jf(n,e,t,r){return n instanceof du?function(o,u,l,m){if(!ia(o.precondition,u))return l;const v=o.value.clone(),b=gC(o.fieldTransforms,m,u);return v.setAll(b),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),null}(n,e,t,r):n instanceof hc?function(o,u,l,m){if(!ia(o.precondition,u))return l;const v=gC(o.fieldTransforms,m,u),b=u.data;return b.setAll(fC(o)),b.setAll(v),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===l?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(A=>A.field))}(n,e,t,r):(l=t,ia(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function Vv(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=XE(r.transform,o||null);null!=u&&(null===t&&(t=Zr.empty()),t.set(r.field,u))}return t||null}function fm(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&uc(t,r,(o,u)=>function dC(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Il&&r instanceof Il||t instanceof fh&&r instanceof fh?uc(t.elements,r.elements,na):t instanceof Yf&&r instanceof Yf?na(t._t,r._t):t instanceof hh&&r instanceof hh);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class du extends Qf{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class hc extends Qf{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function fC(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function pC(n,e,t){const r=new Map;Ct(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],l=u.transform,m=e.data.field(u.field);r.set(u.field,JE(l,m,t[o]))}return r}function gC(n,e,t){const r=new Map;for(const o of n){const u=o.transform,l=t.data.field(o.field);r.set(o.field,KA(u,l,e))}return r}class El extends Qf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Bv extends Qf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class mC{constructor(e){this.count=e}}var _r,Jt;function jv(n){switch(n){default:return nt();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function $v(n){if(void 0===n)return Qn("GRPC error has no .code"),le.UNKNOWN;switch(n){case _r.OK:return le.OK;case _r.CANCELLED:return le.CANCELLED;case _r.UNKNOWN:return le.UNKNOWN;case _r.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case _r.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case _r.INTERNAL:return le.INTERNAL;case _r.UNAVAILABLE:return le.UNAVAILABLE;case _r.UNAUTHENTICATED:return le.UNAUTHENTICATED;case _r.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case _r.NOT_FOUND:return le.NOT_FOUND;case _r.ALREADY_EXISTS:return le.ALREADY_EXISTS;case _r.PERMISSION_DENIED:return le.PERMISSION_DENIED;case _r.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case _r.ABORTED:return le.ABORTED;case _r.OUT_OF_RANGE:return le.OUT_OF_RANGE;case _r.UNIMPLEMENTED:return le.UNIMPLEMENTED;case _r.DATA_LOSS:return le.DATA_LOSS;default:return nt()}}(Jt=_r||(_r={}))[Jt.OK=0]="OK",Jt[Jt.CANCELLED=1]="CANCELLED",Jt[Jt.UNKNOWN=2]="UNKNOWN",Jt[Jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jt[Jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jt[Jt.NOT_FOUND=5]="NOT_FOUND",Jt[Jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jt[Jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jt[Jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jt[Jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jt[Jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jt[Jt.ABORTED=10]="ABORTED",Jt[Jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jt[Jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jt[Jt.INTERNAL=13]="INTERNAL",Jt[Jt.UNAVAILABLE=14]="UNAVAILABLE",Jt[Jt.DATA_LOSS=15]="DATA_LOSS";class hu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){cc(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return NE(this.inner)}size(){return this.innerSize}}const yC=new Jn(He.comparator);function Ji(){return yC}const Hv=new Jn(He.comparator);function Dl(...n){let e=Hv;for(const t of n)e=e.insert(t.key,t);return e}function _C(n){let e=Hv;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Io(){return Xf()}function pm(){return Xf()}function Xf(){return new hu(n=>n.toString(),(n,e)=>n.isEqual(e))}const vC=new Jn(He.comparator),YA=new hn(He.comparator);function Bt(...n){let e=YA;for(const t of n)e=e.add(t);return e}const wC=new hn(Pt);function gm(){return wC}class ep{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,mm.createSynthesizedTargetChangeForCurrentChange(e,t)),new ep(St.min(),r,gm(),Ji(),Bt())}}class mm{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new mm(Ur.EMPTY_BYTE_STRING,t,Bt(),Bt(),Bt())}}class Gv{constructor(e,t,r,o){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=o}}class IC{constructor(e,t){this.targetId=e,this.It=t}}class EC{constructor(e,t,r=Ur.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class DC{constructor(){this.Tt=0,this.Et=CC(),this.At=Ur.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Bt(),t=Bt(),r=Bt();return this.Et.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:nt()}}),new mm(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=CC()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Mt(){this.bt=!0,this.Rt=!0}}class bC{constructor(e){this.Ot=e,this.Ft=new Map,this.$t=Ji(),this.Bt=TC(),this.Lt=new hn(Pt)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Mt(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:nt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,o)=>{this.jt(o)&&t(o)})}zt(e){const t=e.targetId,r=e.It.count,o=this.Ht(t);if(o){const u=o.target;if(Wf(u))if(0===r){const l=new He(u.path);this.Kt(t,l,vn.newNoDocument(l,St.min()))}else Ct(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((u,l)=>{const m=this.Ht(l);if(m){if(u.current&&Wf(m.target)){const v=new He(m.target.path);null!==this.$t.get(v)||this.Xt(l,v)||this.Kt(l,v,vn.newNoDocument(v,e))}u.vt&&(t.set(l,u.St()),u.Dt())}});let r=Bt();this.Bt.forEach((u,l)=>{let m=!0;l.forEachWhile(v=>{const b=this.Ht(v);return!b||2===b.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.$t.forEach((u,l)=>l.setReadTime(e));const o=new ep(e,t,this.Lt,this.$t,r);return this.$t=Ji(),this.Bt=TC(),this.Lt=new hn(Pt),o}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const o=this.Qt(e);this.Xt(e,t)?o.Ct(t,1):o.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Ot.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new DC,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new hn(Pt),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||Ne("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Ot.te(e)}Wt(e){this.Ft.set(e,new DC),this.Ot.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Ot.getRemoteKeysForTarget(e).has(t)}}function TC(){return new Jn(He.comparator)}function CC(){return new Jn(He.comparator)}const QA={asc:"ASCENDING",desc:"DESCENDING"},JA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class XA{constructor(e,t){this.databaseId=e,this.dt=t}}function ym(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function i(n,e){return n.dt?e.toBase64():e.toUint8Array()}function s(n,e){return ym(n,e.toTimestamp())}function a(n){return Ct(!!n),St.fromTimestamp(function(e){const t=gl(e);return new bn(t.seconds,t.nanos)}(n))}function c(n,e){return(t=n,new Ht(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function d(n){const e=Ht.fromString(n);return Ct(_m(e)),e}function f(n,e){return c(n.databaseId,e.path)}function _(n,e){const t=d(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new He(M(t))}function I(n,e){return c(n.databaseId,e)}function E(n){const e=d(n);return 4===e.length?Ht.emptyPath():M(e)}function C(n){return new Ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function M(n){return Ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function N(n,e,t){return{name:f(n,e),fields:t.value.mapValue.fields}}function G(n,e,t){const r=_(n,e.name),o=a(e.updateTime),u=new Zr({mapValue:{fields:e.fields}}),l=vn.newFoundDocument(r,o,u);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function Pe(n,e){let t;if(e instanceof du)t={update:N(n,e.key,e.value)};else if(e instanceof El)t={delete:f(n,e.key)};else if(e instanceof hc)t={update:N(n,e.key,e.data),updateMask:Wv(e.fieldMask)};else{if(!(e instanceof Bv))return nt();t={verify:f(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const l=u.transform;if(l instanceof hh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Il)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof fh)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Yf)return{fieldPath:u.field.canonicalString(),increment:l._t};throw nt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:s(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:nt()),t;var o}function Ge(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Vn.updateTime(a(o.updateTime)):void 0!==o.exists?Vn.exists(o.exists):Vn.none():Vn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,l){let m=null;"setToServerValue"in l?(Ct("REQUEST_TIME"===l.setToServerValue),m=new hh):"appendMissingElements"in l?m=new Il(l.appendMissingElements.values||[]):"removeAllFromArray"in l?m=new fh(l.removeAllFromArray.values||[]):"increment"in l?m=new Yf(u,l.increment):nt();const v=Un.fromServerFormat(l.fieldPath);return new dc(v,m)}(n,o)):[];var o;if(e.update){const o=_(n,e.update.name),u=new Zr({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new zs((e.updateMask.fieldPaths||[]).map(b=>Un.fromServerFormat(b)));return new hc(o,u,l,t,r)}return new du(o,u,t,r)}if(e.delete){const o=_(n,e.delete);return new El(o,t)}if(e.verify){const o=_(n,e.verify);return new Bv(o,t)}return nt()}function Et(n,e){return{documents:[I(n,e.path)]}}function Me(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=I(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=I(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(v){if(0===v.length)return;const b=v.map(A=>function(R){if("=="===R.op){if(rC(R.value))return{unaryFilter:{field:fc(R.field),op:"IS_NAN"}};if(VE(R.value))return{unaryFilter:{field:fc(R.field),op:"IS_NULL"}}}else if("!="===R.op){if(rC(R.value))return{unaryFilter:{field:fc(R.field),op:"IS_NOT_NAN"}};if(VE(R.value))return{unaryFilter:{field:fc(R.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fc(R.field),op:zv(R.op),value:R.value}}}(A));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(v){if(0!==v.length)return v.map(b=>{return{field:fc((A=b).field),direction:bl(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=(b=e.limit,n.dt||ml(b)?b:{value:b});var b,m,v;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(v=e.endAt).inclusive,values:v.position}),t}function ft(n){let e=E(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Ct(1===r);const A=t.from[0];A.allDescendants?o=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=wn(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(A=>{return new uh(pc((R=A).field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction));var R}));let m=null;t.limit&&(m=function(A){let R;return R="object"==typeof A?A.value:A,ml(R)?null:R}(t.limit));let v=null;var A;t.startAt&&(v=new _l((A=t.startAt).values||[],!!A.before));let b=null;return t.endAt&&(b=function(A){return new _l(A.values||[],!A.before)}(t.endAt)),aC(e,o,l,u,m,"F",v,b)}function wn(n){return n?void 0!==n.unaryFilter?[Zv(n)]:void 0!==n.fieldFilter?[qv(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>wn(e)).reduce((e,t)=>e.concat(t)):nt():[]}function bl(n){return QA[n]}function zv(n){return JA[n]}function fc(n){return{fieldPath:n.canonicalString()}}function pc(n){return Un.fromServerFormat(n.fieldPath)}function qv(n){return Wr.create(pc(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return nt()}}(n.fieldFilter.op),n.fieldFilter.value)}function Zv(n){switch(n.unaryFilter.op){case"IS_NAN":const e=pc(n.unaryFilter.field);return Wr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=pc(n.unaryFilter.field);return Wr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=pc(n.unaryFilter.field);return Wr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=pc(n.unaryFilter.field);return Wr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return nt()}}function Wv(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function _m(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Kr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=e1(e)),e=Kv(n.get(t),e);return e1(e)}function Kv(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function e1(n){return n+"\x01\x01"}function gc(n){const e=n.length;if(Ct(e>=2),2===e)return Ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Ht.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&nt(),n.charAt(l+1)){case"\x01":const m=n.substring(u,l);let v;0===o.length?v=m:(o+=m,v=o,o=""),r.push(v);break;case"\x10":o+=n.substring(u,l),o+="\0";break;case"\x11":o+=n.substring(u,l+1);break;default:nt()}u=l+2}return new Ht(r)}const t1=["userId","batchId"];function tD(n,e){return[n,Kr(e)]}function n1(n,e,t){return[n,Kr(e),t]}const gM={},mM=["prefixPath","collectionGroup","readTime","documentId"],yM=["prefixPath","collectionGroup","documentId"],_M=["collectionGroup","readTime","prefixPath","documentId"],vM=["canonicalId","targetId"],wM=["targetId","path"],IM=["path","targetId"],EM=["collectionId","parent"],DM=["indexId","uid"],bM=["uid","sequenceNumber"],TM=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],CM=["indexId","uid","orderedDocumentKey"],SM=["userId","collectionPath","documentId"],AM=["userId","collectionPath","largestBatchId"],xM=["userId","collectionGroup","largestBatchId"],r1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],MM=[...r1,"documentOverlays"],i1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],s1=i1,RM=[...s1,"indexConfiguration","indexState","indexEntries"];class SC extends xE{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function pi(n,e){const t=We(n);return Gs.N(t.ee,e)}class AC{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&Uv(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Jf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Jf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=pm();return this.mutations.forEach(o=>{const u=e.get(o.key),l=u.overlayedDocument;let m=this.applyToLocalView(l,u.mutatedFields);m=t.has(o.key)?null:m;const v=hm(l,m);null!==v&&r.set(o.key,v),l.isValidDocument()||l.convertToNoDocument(St.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Bt())}isEqual(e){return this.batchId===e.batchId&&uc(this.mutations,e.mutations,(t,r)=>fm(t,r))&&uc(this.baseMutations,e.baseMutations,(t,r)=>fm(t,r))}}class xC{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Ct(e.mutations.length===r.length);let o=vC;const u=e.mutations;for(let l=0;l<u.length;l++)o=o.insert(u[l].key,r[l].version);return new xC(e,t,r,o)}}class MC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ph{constructor(e,t,r,o,u=St.min(),l=St.min(),m=Ur.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=m}withSequenceNumber(e){return new ph(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ph(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ph(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class o1{constructor(e){this.ne=e}}function a1(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:nD(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:f(o=n.ne,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:ym(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:tp(e.version)};else{if(!e.isUnknownDocument())return nt();r.unknownDocument={path:t.path.toArray(),version:tp(e.version)}}var o,u;return r}function nD(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function tp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function np(n){const e=new bn(n.seconds,n.nanoseconds);return St.fromTimestamp(e)}function rp(n,e){const t=(e.baseMutations||[]).map(u=>Ge(n.ne,u));for(let u=0;u<e.mutations.length-1;++u){const l=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(l.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Ge(n.ne,u)),o=bn.fromMillis(e.localWriteTimeMs);return new AC(e.batchId,o,t,r)}function Yv(n){const e=np(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?np(n.lastLimboFreeSnapshotVersion):St.min();let r;var o;return void 0!==n.query.documents?(Ct(1===(o=n.query).documents.length),r=Pi(vl(E(o.documents[0])))):r=Pi(ft(n.query)),new ph(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Ur.fromBase64String(n.resumeToken))}function u1(n,e){const t=tp(e.snapshotVersion),r=tp(e.lastLimboFreeSnapshotVersion);let o;o=Wf(e.target)?Et(n.ne,e.target):Me(n.ne,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:yl(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function RC(n){const e=ft({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?dm(e,e.limit,"L"):e}function PC(n,e){return new MC(e.largestBatchId,Ge(n.ne,e.overlayMutation))}function c1(n,e){const t=e.path.lastSegment();return[n,Kr(e.path.popLast()),t]}function l1(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:tp(r.readTime),documentKey:Kr(r.documentKey.path),largestBatchId:r.largestBatchId}}class kM{getBundleMetadata(e,t){return d1(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:np(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return d1(e).put({bundleId:(r=t).id,createTime:tp(a(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return h1(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:RC(o.bundledQuery),readTime:np(o.readTime)};var o})}saveNamedQuery(e,t){return h1(e).put({name:(r=t).name,readTime:tp(a(r.readTime)),bundledQuery:r.bundledQuery});var r}}function d1(n){return pi(n,"bundles")}function h1(n){return pi(n,"namedQueries")}class rD{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new rD(e,t.uid||"")}getOverlay(e,t){return Qv(e).get(c1(this.userId,t)).next(r=>r?PC(this.wt,r):null)}getOverlays(e,t){const r=Io();return oe.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,l)=>{const m=new MC(t,l);o.push(this.ie(e,m))}),oe.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(l=>o.add(Kr(l.getCollectionPath())));const u=[];return o.forEach(l=>{const m=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(Qv(e).W("collectionPathOverlayIndex",m))}),oe.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Io(),u=Kr(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Qv(e).K("collectionPathOverlayIndex",l).next(m=>{for(const v of m){const b=PC(this.wt,v);o.set(b.getKey(),b)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Io();let l;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Qv(e).J({index:"collectionGroupOverlayIndex",range:m},(v,b,A)=>{const R=PC(this.wt,b);u.size()<o||R.largestBatchId===l?(u.set(R.getKey(),R),l=R.largestBatchId):A.done()}).next(()=>u)}ie(e,t){return Qv(e).put(function(r,o,u){const[l,m,v]=c1(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:v,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Pe(r.ne,u.mutation)}}(this.wt,this.userId,t))}}function Qv(n){return pi(n,"documentOverlays")}class ip{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(Tn(e.integerValue));else if("doubleValue"in e){const r=Tn(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),rh(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(th(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?Sv(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):nt()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const o of Object.keys(r))this.le(o,t),this.oe(r[o],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const o of r)this.oe(o,t)}_e(e,t){this.ce(t,37),He.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function NM(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function f1(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=NM(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}ip.ye=new ip;class OM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ie(r.value),r=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const o=t.codePointAt(0);this.Ie(240|o>>>18),this.Ie(128|63&o>>>12),this.Ie(128|63&o>>>6),this.Ie(128|63&o)}}this.Te()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const o=t.codePointAt(0);this.Ae(240|o>>>18),this.Ae(128|63&o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o)}}this.Re()}ve(e){const t=this.Ve(e),r=f1(t);this.Se(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}De(e){const t=this.Ve(e),r=f1(t);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Me(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class LM{constructor(e){this.Oe=e}de(e){this.Oe.pe(e)}he(e){this.Oe.be(e)}ae(e){this.Oe.ve(e)}ue(){this.Oe.Ce()}}class FM{constructor(e){this.Oe=e}de(e){this.Oe.Ee(e)}he(e){this.Oe.Pe(e)}ae(e){this.Oe.De(e)}ue(){this.Oe.Ne()}}class Jv{constructor(){this.Oe=new OM,this.Fe=new LM(this.Oe),this.$e=new FM(this.Oe)}seed(e){this.Oe.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Me(){return this.Oe.Me()}reset(){this.Oe.reset()}}class sp{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new sp(this.indexId,this.documentKey,this.arrayValue,r)}}function op(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=p1(n.arrayValue,e.arrayValue),0!==t?t:(t=p1(n.directionalValue,e.directionalValue),0!==t?t:He.comparator(n.documentKey,e.documentKey)))}function p1(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class UM{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const r=t;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const t=Xd(e);if(void 0!==t&&!this.Qe(t))return!1;const r=ou(e);let o=0,u=0;for(;o<r.length&&this.Qe(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Ke){const l=r[o];if(!this.je(this.Ke,l)||!this.We(this.Ue[u++],l))return!1;++o}for(;o<r.length;++o){const l=r[o];if(u>=this.Ue.length||!this.We(this.Ue[u++],l))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class VM{constructor(){this.ze=new kC}addToCollectionParentIndex(e,t){return this.ze.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(Yi.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(Yi.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class kC{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new hn(Ht.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new hn(Ht.comparator)).toArray()}}const iD=new Uint8Array(0);class BM{constructor(e,t){this.user=e,this.databaseId=t,this.He=new kC,this.Je=new hu(r=>yl(r),(r,o)=>ah(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const u={collectionId:r,parent:Kr(o)};return g1(e).put(u)}return oe.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[SE(t),""],!1,!0);return g1(e).K(o).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(gc(l.parent))}return r})}addFieldIndex(e,t){const r=sD(e),o={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var l;delete o.indexId;const u=r.add(o);if(t.indexState){const l=e0(e);return u.next(m=>{l.put(l1(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=sD(e),o=e0(e),u=Xv(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Xv(e);let o=!0;const u=new Map;return oe.forEach(this.Ye(t),l=>this.Xe(e,l).next(m=>{o&&(o=!!m),u.set(l,m)})).next(()=>{if(o){let l=Bt();const m=[];return oe.forEach(u,(v,b)=>{var A;Ne("IndexedDbIndexManager",`Using index ${A=v,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(mt=>`${mt.fieldPath}:${mt.kind}`).join(",")}`} to execute ${yl(t)}`);const R=function(mt,it){const bt=Xd(it);if(void 0===bt)return null;for(const Ut of cm(mt,bt.fieldPath))switch(Ut.op){case"array-contains-any":return Ut.value.arrayValue.values||[];case"array-contains":return[Ut.value]}return null}(b,v),U=function(mt,it){const bt=new Map;for(const Ut of ou(it))for(const or of cm(mt,Ut.fieldPath))switch(or.op){case"==":case"in":bt.set(Ut.fieldPath.canonicalString(),or.value);break;case"not-in":case"!=":return bt.set(Ut.fieldPath.canonicalString(),or.value),Array.from(bt.values())}return null}(b,v),Y=function(mt,it){const bt=[];let Ut=!0;for(const or of ou(it)){const fu=0===or.kind?Mv(mt,or.fieldPath,mt.startAt):Rv(mt,or.fieldPath,mt.startAt);bt.push(fu.value),Ut&&(Ut=fu.inclusive)}return new _l(bt,Ut)}(b,v),te=function(mt,it){const bt=[];let Ut=!0;for(const or of ou(it)){const fu=0===or.kind?Rv(mt,or.fieldPath,mt.endAt):Mv(mt,or.fieldPath,mt.endAt);bt.push(fu.value),Ut&&(Ut=fu.inclusive)}return new _l(bt,Ut)}(b,v),Se=this.Ze(v,b,Y),xe=this.Ze(v,b,te),gt=this.tn(v,b,U),wt=this.en(v.indexId,R,Se,Y.inclusive,xe,te.inclusive,gt);return oe.forEach(wt,mt=>r.j(mt,t.limit).next(it=>{it.forEach(bt=>{const Ut=He.fromSegments(bt.documentKey);l.has(Ut)||(l=l.add(Ut),m.push(Ut))})}))}).next(()=>m)}return oe.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,r,o,u,l,m){const v=(null!=t?t.length:1)*Math.max(r.length,u.length),b=v/(null!=t?t.length:1),A=[];for(let R=0;R<v;++R){const U=t?this.nn(t[R/b]):iD,Y=this.sn(e,U,r[R%b],o),te=this.rn(e,U,u[R%b],l),Se=m.map(xe=>this.sn(e,U,xe,!0));A.push(...this.createRange(Y,te,Se))}return A}sn(e,t,r,o){const u=new sp(e,He.empty(),t,r);return o?u:u.Le()}rn(e,t,r,o){const u=new sp(e,He.empty(),t,r);return o?u.Le():u}Xe(e,t){const r=new UM(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let l=null;for(const m of u)r.Ge(m)&&(!l||m.fields.length>l.fields.length)&&(l=m);return l})}getIndexType(e,t){let r=2;return oe.forEach(this.Ye(t),o=>this.Xe(e,o).next(u=>{u?0!==r&&u.fields.length<function(l){let m=new hn(Un.comparator),v=!1;for(const b of l.filters){const A=b;A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?v=!0:m=m.add(A.field))}for(const b of l.orderBy)b.field.isKeyField()||(m=m.add(b.field));return m.size+(v?1:0)}(o)&&(r=1):r=0})).next(()=>r)}on(e,t){const r=new Jv;for(const o of ou(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const l=r.Be(o.kind);ip.ye.re(u,l)}return r.Me()}nn(e){const t=new Jv;return ip.ye.re(e,t.Be(0)),t.Me()}un(e,t){const r=new Jv;return ip.ye.re(sh(this.databaseId,t),r.Be(function(o){const u=ou(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Me()}tn(e,t,r){if(null===r)return[];let o=[];o.push(new Jv);let u=0;for(const l of ou(e)){const m=r[u++];for(const v of o)if(this.cn(t,l.fieldPath)&&Zf(m))o=this.an(o,l,m);else{const b=v.Be(l.kind);ip.ye.re(m,b)}}return this.hn(o)}Ze(e,t,r){return this.tn(e,t,r.position)}hn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Me();return t}an(e,t,r){const o=[...e],u=[];for(const l of r.arrayValue.values||[])for(const m of o){const v=new Jv;v.seed(m.Me()),ip.ye.re(l,v.Be(t.kind)),u.push(v)}return u}cn(e,t){return!!e.filters.find(r=>r instanceof Wr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=sD(e),o=e0(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next(u=>{const l=[];return oe.forEach(u,m=>o.get([m.indexId,this.uid]).next(v=>{l.push(function(b,A){const R=A?new eh(A.sequenceNumber,new Yi(np(A.readTime),new He(gc(A.documentKey)),A.largestBatchId)):eh.empty(),U=b.fields.map(([Y,te])=>new Bf(Un.fromServerFormat(Y),te));return new Vf(b.indexId,b.collectionGroup,U,R)}(m,v))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Pt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=sD(e),u=e0(e);return this.ln(e).next(l=>o.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>oe.forEach(m,v=>u.put(l1(v.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return oe.forEach(t,(o,u)=>{const l=r.get(o.collectionGroup);return(l?oe.resolve(l):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),oe.forEach(m,v=>this.fn(e,o,v).next(b=>{const A=this.dn(u,v);return b.isEqual(A)?oe.resolve():this._n(e,u,v,b,A)}))))})}wn(e,t,r,o){return Xv(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.un(r,t.key),documentKey:t.key.path.toArray()})}mn(e,t,r,o){return Xv(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.un(r,t.key),t.key.path.toArray()])}fn(e,t,r){const o=Xv(e);let u=new hn(op);return o.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,t)])},(l,m)=>{u=u.add(new sp(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}dn(e,t){let r=new hn(op);const o=this.on(t,e);if(null==o)return r;const u=Xd(t);if(null!=u){const l=e.data.field(u.fieldPath);if(Zf(l))for(const m of l.arrayValue.values||[])r=r.add(new sp(t.indexId,e.key,this.nn(m),o))}else r=r.add(new sp(t.indexId,e.key,iD,o));return r}_n(e,t,r,o,u){Ne("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(m,v,b,A,R){const U=m.getIterator(),Y=v.getIterator();let te=Hf(U),Se=Hf(Y);for(;te||Se;){let xe=!1,gt=!1;if(te&&Se){const wt=b(te,Se);wt<0?gt=!0:wt>0&&(xe=!0)}else null!=te?gt=!0:xe=!0;xe?(A(Se),Se=Hf(Y)):gt?(R(te),te=Hf(U)):(te=Hf(U),Se=Hf(Y))}}(o,u,op,m=>{l.push(this.wn(e,t,r,m))},m=>{l.push(this.mn(e,t,r,m))}),oe.waitFor(l)}ln(e){let t=1;return e0(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,m)=>op(l,m)).filter((l,m,v)=>!m||0!==op(l,v[m-1]));const o=[];o.push(e);for(const l of r){const m=op(l,e),v=op(l,t);if(0===m)o[0]=e.Le();else if(m>0&&v<0)o.push(l),o.push(l.Le());else if(v>0)break}o.push(t);const u=[];for(let l=0;l<o.length;l+=2)u.push(IDBKeyRange.bound([o[l].indexId,this.uid,o[l].arrayValue,o[l].directionalValue,iD,[]],[o[l+1].indexId,this.uid,o[l+1].arrayValue,o[l+1].directionalValue,iD,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(m1)}getMinOffset(e,t){return oe.mapArray(this.Ye(t),r=>this.Xe(e,r).next(o=>o||nt())).next(m1)}}function g1(n){return pi(n,"collectionParents")}function Xv(n){return pi(n,"indexEntries")}function sD(n){return pi(n,"indexConfiguration")}function e0(n){return pi(n,"indexState")}function m1(n){Ct(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;jf(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new Yi(e.readTime,e.documentKey,t)}const y1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class qs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new qs(e,qs.DEFAULT_COLLECTION_PERCENTILE,qs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function _1(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let m=0;const v=r.J({range:l},(A,R,U)=>(m++,U.delete()));u.push(v.next(()=>{Ct(1===m)}));const b=[];for(const A of t.mutations){const R=n1(e,A.key.path,t.batchId);u.push(o.delete(R)),b.push(A.key)}return oe.waitFor(u).next(()=>b)}function oD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw nt();e=n.noDocument}return JSON.stringify(e).length}qs.DEFAULT_COLLECTION_PERCENTILE=10,qs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qs.DEFAULT=new qs(41943040,qs.DEFAULT_COLLECTION_PERCENTILE,qs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qs.DISABLED=new qs(-1,0,0);class aD{constructor(e,t,r,o){this.userId=e,this.wt=t,this.indexManager=r,this.referenceDelegate=o,this.gn={}}static se(e,t,r,o){Ct(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new aD(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return gh(e).J({index:"userMutationsIndex",range:r},(o,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=vm(e),l=gh(e);return l.add({}).next(m=>{Ct("number"==typeof m);const v=new AC(m,t,r,o),b=function(U,Y,te){const Se=te.baseMutations.map(gt=>Pe(U.ne,gt)),xe=te.mutations.map(gt=>Pe(U.ne,gt));return{userId:Y,batchId:te.batchId,localWriteTimeMs:te.localWriteTime.toMillis(),baseMutations:Se,mutations:xe}}(this.wt,this.userId,v),A=[];let R=new hn((U,Y)=>Pt(U.canonicalString(),Y.canonicalString()));for(const U of o){const Y=n1(this.userId,U.key.path,m);R=R.add(U.key.path.popLast()),A.push(l.put(b)),A.push(u.put(Y,gM))}return R.forEach(U=>{A.push(this.indexManager.addToCollectionParentIndex(e,U))}),e.addOnCommittedListener(()=>{this.gn[m]=v.keys()}),oe.waitFor(A).next(()=>v)})}lookupMutationBatch(e,t){return gh(e).get(t).next(r=>r?(Ct(r.userId===this.userId),rp(this.wt,r)):null)}yn(e,t){return this.gn[t]?oe.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.gn[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return gh(e).J({index:"userMutationsIndex",range:o},(l,m,v)=>{m.userId===this.userId&&(Ct(m.batchId>=r),u=rp(this.wt,m)),v.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return gh(e).J({index:"userMutationsIndex",range:t,reverse:!0},(o,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return gh(e).K("userMutationsIndex",t).next(r=>r.map(o=>rp(this.wt,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=tD(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return vm(e).J({range:o},(l,m,v)=>{const[b,A,R]=l,U=gc(A);if(b===this.userId&&t.path.isEqual(U))return gh(e).get(R).next(Y=>{if(!Y)throw nt();Ct(Y.userId===this.userId),u.push(rp(this.wt,Y))});v.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new hn(Pt);const o=[];return t.forEach(u=>{const l=tD(this.userId,u.path),m=IDBKeyRange.lowerBound(l),v=vm(e).J({range:m},(b,A,R)=>{const[U,Y,te]=b,Se=gc(Y);U===this.userId&&u.path.isEqual(Se)?r=r.add(te):R.done()});o.push(v)}),oe.waitFor(o).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=tD(this.userId,r),l=IDBKeyRange.lowerBound(u);let m=new hn(Pt);return vm(e).J({range:l},(v,b,A)=>{const[R,U,Y]=v,te=gc(U);R===this.userId&&r.isPrefixOf(te)?te.length===o&&(m=m.add(Y)):A.done()}).next(()=>this.pn(e,m))}pn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(gh(e).get(u).next(l=>{if(null===l)throw nt();Ct(l.userId===this.userId),r.push(rp(this.wt,l))}))}),oe.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return _1(e.ee,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),oe.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return oe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return vm(e).J({range:r},(u,l,m)=>{if(u[0]===this.userId){const v=gc(u[1]);o.push(v)}else m.done()}).next(()=>{Ct(0===o.length)})})}containsKey(e,t){return v1(e,this.userId,t)}Tn(e){return w1(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function v1(n,e,t){const r=tD(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return vm(n).J({range:u,H:!0},(m,v,b)=>{const[A,R,U]=m;A===e&&R===o&&(l=!0),b.done()}).next(()=>l)}function gh(n){return pi(n,"mutations")}function vm(n){return pi(n,"documentMutations")}function w1(n){return pi(n,"mutationQueues")}class ap{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new ap(0)}static Rn(){return new ap(-1)}}class jM{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const r=new ap(t.highestTargetId);return t.highestTargetId=r.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>St.fromTimestamp(new bn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.bn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Pn(e,o)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(t,r),this.Pn(e,r))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>wm(e).delete(t.targetId)).next(()=>this.bn(e)).next(r=>(Ct(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return wm(e).J((l,m)=>{const v=Yv(m);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(o++,u.push(this.removeTargetData(e,v)))}).next(()=>oe.waitFor(u)).next(()=>o)}forEachTarget(e,t){return wm(e).J((r,o)=>{const u=Yv(o);t(u)})}bn(e){return I1(e).get("targetGlobalKey").next(t=>(Ct(null!==t),t))}Pn(e,t){return I1(e).put("targetGlobalKey",t)}vn(e,t){return wm(e).put(u1(this.wt,t))}Vn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=yl(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return wm(e).J({range:o,index:"queryTargetsIndex"},(l,m,v)=>{const b=Yv(m);ah(t,b.target)&&(u=b,v.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=mh(e);return t.forEach(l=>{const m=Kr(l.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,l))}),oe.waitFor(o)}removeMatchingKeys(e,t,r){const o=mh(e);return oe.forEach(t,u=>{const l=Kr(u.path);return oe.waitFor([o.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=mh(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=mh(e);let u=Bt();return o.J({range:r,H:!0},(l,m,v)=>{const b=gc(l[1]),A=new He(b);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=Kr(t.path),o=IDBKeyRange.bound([r],[SE(r)],!1,!0);let u=0;return mh(e).J({index:"documentTargetsIndex",H:!0,range:o},([l,m],v,b)=>{0!==l&&(u++,b.done())}).next(()=>u>0)}te(e,t){return wm(e).get(t).next(r=>r?Yv(r):null)}}function wm(n){return pi(n,"targets")}function I1(n){return pi(n,"targetGlobal")}function mh(n){return pi(n,"targetDocuments")}function E1([n,e],[t,r]){const o=Pt(n,t);return 0===o?Pt(e,r):o}class $M{constructor(e){this.Sn=e,this.buffer=new hn(E1),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();E1(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class HM{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;Ne("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ye.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){au(r)?Ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield fl(r)}yield t.kn(3e5)}))}}class GM{constructor(e,t){this.Mn=e,this.params=t}calculateTargetCount(e,t){return this.Mn.On(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return oe.resolve(Ri.ot);const r=new $M(t);return this.Mn.forEachTarget(e,o=>r.xn(o.sequenceNumber)).next(()=>this.Mn.Fn(e,o=>r.xn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Mn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Mn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(y1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),y1):this.$n(e,t))}getCacheSize(e){return this.Mn.getCacheSize(e)}$n(e,t){let r,o,u,l,m,v,b;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),o=this.params.maximumSequenceNumbersToCollect):o=R,l=Date.now(),this.nthSequenceNumber(e,o))).next(R=>(r=R,m=Date.now(),this.removeTargets(e,r,t))).next(R=>(u=R,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(R=>(b=Date.now(),wv()<=qu.in.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-A}ms\n\tDetermined least recently used ${o} in `+(m-l)+`ms\n\tRemoved ${u} targets in `+(v-m)+`ms\n\tRemoved ${R} documents in `+(b-v)+`ms\nTotal Duration: ${b-A}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:R})))}}class zM{constructor(e,t){this.db=e,this.garbageCollector=new GM(this,t)}On(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Bn(e){let t=0;return this.Fn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(r,o)=>t(o))}addReference(e,t,r){return uD(e,r)}removeReference(e,t,r){return uD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return uD(e,t)}Un(e,t){return function(r,o){let u=!1;return w1(r).Y(l=>v1(r,l,o).next(m=>(m&&(u=!0),oe.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Ln(e,(l,m)=>{if(m<=t){const v=this.Un(e,l).next(b=>{if(!b)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,St.min()),mh(e).delete([0,Kr(l.path)])))});o.push(v)}}).next(()=>oe.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return uD(e,t)}Ln(e,t){const r=mh(e);let o,u=Ri.ot;return r.J({index:"documentTargetsIndex"},([l,m],{path:v,sequenceNumber:b})=>{0===l?(u!==Ri.ot&&t(new He(gc(o)),u),u=b,o=v):u=Ri.ot}).next(()=>{u!==Ri.ot&&t(new He(gc(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function uD(n,e){return mh(n).put((r=n.currentSequenceNumber,{targetId:0,path:Kr(e.path),sequenceNumber:r}));var r}class D1{constructor(){this.changes=new hu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class qM{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return up(e).put(r)}removeEntry(e,t,r){return up(e).delete(function(o,u){const l=o.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],nD(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.qn(e,r)))}getEntry(e,t){let r=vn.newInvalidDocument(t);return up(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(t0(t))},(o,u)=>{r=this.Kn(t,u)}).next(()=>r)}Gn(e,t){let r={size:0,document:vn.newInvalidDocument(t)};return up(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(t0(t))},(o,u)=>{r={document:this.Kn(t,u),size:oD(u)}}).next(()=>r)}getEntries(e,t){let r=Ji();return this.Qn(e,t,(o,u)=>{const l=this.Kn(o,u);r=r.insert(o,l)}).next(()=>r)}jn(e,t){let r=Ji(),o=new Jn(He.comparator);return this.Qn(e,t,(u,l)=>{const m=this.Kn(u,l);r=r.insert(u,m),o=o.insert(u,oD(l))}).next(()=>({documents:r,Wn:o}))}Qn(e,t,r){if(t.isEmpty())return oe.resolve();let o=new hn(S1);t.forEach(v=>o=o.add(v));const u=IDBKeyRange.bound(t0(o.first()),t0(o.last())),l=o.getIterator();let m=l.getNext();return up(e).J({index:"documentKeyIndex",range:u},(v,b,A)=>{const R=He.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;m&&S1(m,R)<0;)r(m,null),m=l.getNext();m&&m.isEqual(R)&&(r(m,b),m=l.hasNext()?l.getNext():null),m?A.q(t0(m)):A.done()}).next(()=>{for(;m;)r(m,null),m=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),nD(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return up(e).K(IDBKeyRange.bound(o,u,!0)).next(l=>{let m=Ji();for(const v of l){const b=this.Kn(He.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);m=m.insert(b.key,b)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=Ji();const l=C1(t,r),m=C1(t,Yi.max());return up(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,m,!0)},(v,b,A)=>{const R=this.Kn(He.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(R.key,R),u.size===o&&A.done()}).next(()=>u)}newChangeBuffer(e){return new ZM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return T1(e).get("remoteDocumentGlobalKey").next(t=>(Ct(!!t),t))}qn(e,t){return T1(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const r=function PM(n,e){let t;if(e.document)t=G(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=He.fromSegments(e.noDocument.path),o=np(e.noDocument.readTime);t=vn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return nt();{const r=He.fromSegments(e.unknownDocument.path),o=np(e.unknownDocument.version);t=vn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new bn(r[0],r[1]);return St.fromTimestamp(o)}(e.readTime)),t}(this.wt,t);if(!r.isNoDocument()||!r.version.isEqual(St.min()))return r}return vn.newInvalidDocument(e)}}function b1(n){return new qM(n)}class ZM extends D1{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new hu(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new hn((u,l)=>Pt(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const m=this.Hn.get(u);if(t.push(this.zn.removeEntry(e,u,m.readTime)),l.isValidDocument()){const v=a1(this.zn.wt,l);o=o.add(u.path.popLast()),r+=oD(v)-m.size,t.push(this.zn.addEntry(e,u,v))}else if(r-=m.size,this.trackRemovals){const v=a1(this.zn.wt,l.convertToNoDocument(St.min()));t.push(this.zn.addEntry(e,u,v))}}),o.forEach(u=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.zn.updateMetadata(e,r)),oe.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(r=>(this.Hn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:r,Wn:o})=>(o.forEach((u,l)=>{this.Hn.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function T1(n){return pi(n,"remoteDocumentGlobal")}function up(n){return pi(n,"remoteDocumentsV14")}function t0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function C1(n,e){const t=e.documentKey.path.toArray();return[n,nD(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function S1(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Pt(t[u],r[u]),o)return o;return o=Pt(t.length,r.length),o||(o=Pt(t[t.length-2],r[r.length-2]),o||Pt(t[t.length-1],r[r.length-1]))}class WM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class A1{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.getBaseDocument(e,t,r))).next(o=>(null!==r&&Jf(r.mutation,o,zs.empty(),bn.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Bt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Bt()){const o=Io();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let l=Dl();return u.forEach((m,v)=>{l=l.insert(m,v.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Io();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Bt()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((l,m)=>{t.set(l,m)})})}computeViews(e,t,r,o){let u=Ji();const l=Xf(),m=Xf();return t.forEach((v,b)=>{const A=r.get(b.key);o.has(b.key)&&(void 0===A||A.mutation instanceof hc)?u=u.insert(b.key,b):void 0!==A&&(l.set(b.key,A.mutation.getFieldMask()),Jf(A.mutation,b,A.mutation.getFieldMask(),bn.now()))}),this.recalculateAndSaveOverlays(e,u).next(v=>(v.forEach((b,A)=>l.set(b,A)),t.forEach((b,A)=>{var R;return m.set(b,new WM(A,null!==(R=l.get(b))&&void 0!==R?R:null))}),m))}recalculateAndSaveOverlays(e,t){const r=Xf();let o=new Jn((l,m)=>l-m),u=Bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const m of l)m.keys().forEach(v=>{const b=t.get(v);if(null===b)return;let A=r.get(v)||zs.empty();A=m.applyToLocalView(b,A),r.set(v,A);const R=(o.get(m.batchId)||Bt()).add(v);o=o.insert(m.batchId,R)})}).next(()=>{const l=[],m=o.getReverseIterator();for(;m.hasNext();){const v=m.getNext(),b=v.key,A=v.value,R=pm();A.forEach(U=>{if(!u.has(U)){const Y=hm(t.get(U),r.get(U));null!==Y&&R.set(U,Y),u=u.add(U)}}),l.push(this.documentOverlayCache.saveOverlays(e,b,R))}return oe.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return He.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Kf(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const l=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):oe.resolve(Io());let m=-1,v=u;return l.next(b=>oe.forEach(b,(A,R)=>(m<R.largestBatchId&&(m=R.largestBatchId),u.get(A)?oe.resolve():this.getBaseDocument(e,A,R).next(U=>{v=v.insert(A,U)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,v,b,Bt())).next(A=>({batchId:m,changes:_C(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new He(t)).next(r=>{let o=Dl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=Dl();return this.indexManager.getCollectionParents(e,o).next(l=>oe.forEach(l,m=>{const v=(b=t,A=m.child(o),new ra(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,A;return this.getDocumentsMatchingCollectionQuery(e,v,r).next(b=>{b.forEach((A,R)=>{u=u.insert(A,R)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((m,v)=>{const b=v.getKey();null===o.get(b)&&(o=o.insert(b,vn.newInvalidDocument(b)))});let l=Dl();return o.forEach((m,v)=>{const b=u.get(m);void 0!==b&&Jf(b.mutation,v,zs.empty(),bn.now()),dh(t,v)&&(l=l.insert(m,v))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):oe.resolve(vn.newInvalidDocument(t))}}class KM{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return oe.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:a(r.createTime)}),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:RC(r.bundledQuery),readTime:a(r.readTime)}),oe.resolve();var r}}class YM{constructor(){this.overlays=new Jn(He.comparator),this.Xn=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Io();return oe.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.ie(e,t,u)}),oe.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Xn.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Xn.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const o=Io(),u=t.length+1,l=new He(t.child("")),m=this.overlays.getIteratorFrom(l);for(;m.hasNext();){const v=m.getNext().value,b=v.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&v.largestBatchId>r&&o.set(v.getKey(),v)}return oe.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Jn((b,A)=>b-A);const l=this.overlays.getIterator();for(;l.hasNext();){const b=l.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let A=u.get(b.largestBatchId);null===A&&(A=Io(),u=u.insert(b.largestBatchId,A)),A.set(b.getKey(),b)}}const m=Io(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((b,A)=>m.set(b,A)),!(m.size()>=o)););return oe.resolve(m)}ie(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const l=this.Xn.get(o.largestBatchId).delete(r.key);this.Xn.set(o.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new MC(t,r));let u=this.Xn.get(t);void 0===u&&(u=Bt(),this.Xn.set(t,u)),this.Xn.set(t,u.add(r.key))}}class NC{constructor(){this.Zn=new hn(gi.ts),this.es=new hn(gi.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new gi(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new gi(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new He(new Ht([])),r=new gi(t,e),o=new gi(t,e+1),u=[];return this.es.forEachInRange([r,o],l=>{this.rs(l),u.push(l.key)}),u}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new He(new Ht([])),r=new gi(t,e),o=new gi(t,e+1);let u=Bt();return this.es.forEachInRange([r,o],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new gi(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class gi{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return He.comparator(e.key,t.key)||Pt(e.ls,t.ls)}static ns(e,t){return Pt(e.ls,t.ls)||He.comparator(e.key,t.key)}}class QM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new hn(gi.ts)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.fs;this.fs++;const l=new AC(u,t,r,o);this.mutationQueue.push(l);for(const m of o)this.ds=this.ds.add(new gi(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return oe.resolve(l)}lookupMutationBatch(e,t){return oe.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.ws(t+1),u=o<0?0:o;return oe.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new gi(t,0),o=new gi(t,Number.POSITIVE_INFINITY),u=[];return this.ds.forEachInRange([r,o],l=>{const m=this._s(l.ls);u.push(m)}),oe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new hn(Pt);return t.forEach(o=>{const u=new gi(o,0),l=new gi(o,Number.POSITIVE_INFINITY);this.ds.forEachInRange([u,l],m=>{r=r.add(m.ls)})}),oe.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;He.isDocumentKey(u)||(u=u.child(""));const l=new gi(new He(u),0);let m=new hn(Pt);return this.ds.forEachWhile(v=>{const b=v.key.path;return!!r.isPrefixOf(b)&&(b.length===o&&(m=m.add(v.ls)),!0)},l),oe.resolve(this.gs(m))}gs(e){const t=[];return e.forEach(r=>{const o=this._s(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){Ct(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return oe.forEach(t.mutations,o=>{const u=new gi(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new gi(t,0),o=this.ds.firstAfterOrEqual(r);return oe.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return oe.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class JM{constructor(e){this.ps=e,this.docs=new Jn(He.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,l=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():vn.newInvalidDocument(t))}getEntries(e,t){let r=Ji();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():vn.newInvalidDocument(o))}),oe.resolve(r)}getAllFromCollection(e,t,r){let o=Ji();const u=new He(t.child("")),l=this.docs.getIteratorFrom(u);for(;l.hasNext();){const{key:m,value:{document:v}}=l.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||jf(AE(v),r)<=0||(o=o.insert(v.key,v.mutableCopy()))}return oe.resolve(o)}getAllFromCollectionGroup(e,t,r,o){nt()}Is(e,t){return oe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new XM(this)}getSize(e){return oe.resolve(this.size)}}class XM extends D1{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.zn.addEntry(e,o)):this.zn.removeEntry(r)}),oe.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class eR{constructor(e){this.persistence=e,this.Ts=new hu(t=>yl(t),ah),this.lastRemoteSnapshotVersion=St.min(),this.highestTargetId=0,this.Es=0,this.As=new NC,this.targetCount=0,this.Rs=ap.An()}forEachTarget(e,t){return this.Ts.forEach((r,o)=>t(o)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),oe.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new ap(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.vn(t),oe.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Ts.forEach((l,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Ts.delete(l),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),oe.waitFor(u).next(()=>o)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(l=>{u.push(o.markPotentiallyOrphaned(e,l))}),oe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.As.containsKey(t))}}class x1{constructor(e,t){this.bs={},this.overlays={},this.Ps=new Ri(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new eR(this),this.indexManager=new VM,this.remoteDocumentCache=new JM(r=>this.referenceDelegate.Ss(r)),this.wt=new o1(t),this.Ds=new KM(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new YM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new QM(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){Ne("MemoryPersistence","Starting transaction:",e);const o=new tR(this.Ps.next());return this.referenceDelegate.Cs(),r(o).next(u=>this.referenceDelegate.xs(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ns(e,t){return oe.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class tR extends xE{constructor(e){super(),this.currentSequenceNumber=e}}class cD{constructor(e){this.persistence=e,this.ks=new NC,this.Ms=null}static Os(e){return new cD(e)}get Fs(){if(this.Ms)return this.Ms;throw nt()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),oe.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(o=>this.Fs.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Fs.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Ms=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Fs,r=>{const o=He.fromPath(r);return this.$s(e,o).next(u=>{u||t.removeEntry(o,St.min())})}).next(()=>(this.Ms=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return oe.or([()=>oe.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class nR{constructor(e){this.wt=e}M(e,t,r,o){const u=new im("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",t1,{unique:!0}),m.createObjectStore("documentMutations"),M1(e),function(m){m.createObjectStore("remoteDocuments")}(e));let l=oe.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),M1(e)),l=l.next(()=>function(m){const v=m.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:St.min().toTimestamp(),targetCount:0};return v.put("targetGlobalKey",b)}(u))),r<4&&o>=4&&(0!==r&&(l=l.next(()=>function(m,v){return v.store("mutations").K().next(b=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",t1,{unique:!0});const A=v.store("mutations"),R=b.map(U=>A.put(U));return oe.waitFor(R)})}(e,u))),l=l.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(l=l.next(()=>this.Bs(u))),r<6&&o>=6&&(l=l.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(u)))),r<7&&o>=7&&(l=l.next(()=>this.Us(u))),r<8&&o>=8&&(l=l.next(()=>this.qs(e,u))),r<9&&o>=9&&(l=l.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(l=l.next(()=>this.Ks(u))),r<11&&o>=11&&(l=l.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(l=l.next(()=>{!function(m){const v=m.createObjectStore("documentOverlays",{keyPath:SM});v.createIndex("collectionPathOverlayIndex",AM,{unique:!1}),v.createIndex("collectionGroupOverlayIndex",xM,{unique:!1})}(e)})),r<13&&o>=13&&(l=l.next(()=>function(m){const v=m.createObjectStore("remoteDocumentsV14",{keyPath:mM});v.createIndex("documentKeyIndex",yM),v.createIndex("collectionGroupIndex",_M)}(e)).next(()=>this.Gs(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(l=l.next(()=>this.Qs(e,u))),r<15&&o>=15&&(l=l.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:DM}).createIndex("sequenceNumberIndex",bM,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:TM}).createIndex("documentKeyIndex",CM,{unique:!1})}(e))),l}Ls(e){let t=0;return e.store("remoteDocuments").J((r,o)=>{t+=oD(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.K().next(o=>oe.forEach(o,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",l).next(m=>oe.forEach(m,v=>{Ct(v.userId===u.userId);const b=rp(this.wt,v);return _1(e,u.userId,b).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.J((l,m)=>{const v=new Ht(l),b=[0,Kr(v)];u.push(t.get(b).next(A=>A?oe.resolve():t.put({targetId:0,path:Kr(v),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>oe.waitFor(u))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:EM});const r=t.store("collectionParents"),o=new kC,u=l=>{if(o.add(l)){const m=l.lastSegment(),v=l.popLast();return r.put({collectionId:m,parent:Kr(v)})}};return t.store("remoteDocuments").J({H:!0},(l,m)=>{const v=new Ht(l);return u(v.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([l,m,v],b)=>{const A=gc(m);return u(A.popLast())}))}Ks(e){const t=e.store("targets");return t.J((r,o)=>{const u=Yv(o),l=u1(this.wt,u);return t.put(l)})}Gs(e,t){const r=t.store("remoteDocuments"),o=[];return r.J((u,l)=>{const m=t.store("remoteDocumentsV14"),v=(b=l,b.document?new He(Ht.fromString(b.document.name).popFirst(5)):b.noDocument?He.fromSegments(b.noDocument.path):b.unknownDocument?He.fromSegments(b.unknownDocument.path):nt()).path.toArray();var b;const A={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};o.push(m.put(A))}).next(()=>oe.waitFor(o))}Qs(e,t){const r=t.store("mutations"),o=b1(this.wt),u=new x1(cD.Os,this.wt.ne);return r.K().next(l=>{const m=new Map;return l.forEach(v=>{var b;let A=null!==(b=m.get(v.userId))&&void 0!==b?b:Bt();rp(this.wt,v).keys().forEach(R=>A=A.add(R)),m.set(v.userId,A)}),oe.forEach(m,(v,b)=>{const A=new yr(b),R=rD.se(this.wt,A),U=u.getIndexManager(A),Y=aD.se(A,this.wt,U,u.referenceDelegate);return new A1(o,Y,R,U).recalculateAndSaveOverlaysForDocumentKeys(new SC(t,Ri.ot),v).next()})})}}function M1(n){n.createObjectStore("targetDocuments",{keyPath:wM}).createIndex("documentTargetsIndex",IM,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",vM,{unique:!0}),n.createObjectStore("targetGlobal")}const OC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class LC{constructor(e,t,r,o,u,l,m,v,b,A,R=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.js=u,this.window=l,this.document=m,this.Ws=b,this.zs=A,this.Hs=R,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=U=>Promise.resolve(),!LC.V())throw new Re(le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zM(this,o),this.ei=t+"main",this.wt=new o1(v),this.ni=new Gs(this.ei,this.Hs,new nR(this.wt)),this.Vs=new jM(this.referenceDelegate,this.wt),this.remoteDocumentCache=b1(this.wt),this.Ds=new kM,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===A&&Qn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(le.FAILED_PRECONDITION,OC);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new Ri(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var r=(0,ye.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>lD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(au(e))return Ne("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ne("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return n0(e).get("owner").next(t=>oe.resolve(this.di(t)))}_i(e){return lD(e).delete(this.clientId)}wi(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=pi(r,"clientMetadata");return o.K().next(u=>{const l=e.gi(u,18e5),m=u.filter(v=>-1===l.indexOf(v));return oe.forEach(m,v=>o.delete(v.clientId)).next(()=>m)})}).catch(()=>[]);if(e.si)for(const r of t)e.si.removeItem(e.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?oe.resolve(!0):n0(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new Re(le.FAILED_PRECONDITION,OC);return!1}}return!(!this.networkEnabled||!this.inForeground)||lD(e).K().next(r=>void 0===this.gi(r,5e3).find(o=>{if(this.clientId!==o.clientId){const l=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||l&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ne("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new SC(t,Ri.ot);return e.li(r).next(()=>e._i(r))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(r=>this.mi(r.updateTimeMs,t)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>lD(e).K().next(t=>this.gi(t,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return aD.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new BM(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return rD.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,r){Ne("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(l=this.Hs)?RM:14===l?s1:13===l?i1:12===l?MM:11===l?r1:void nt();var l;let m;return this.ni.runTransaction(e,o,u,v=>(m=new SC(v,this.Ps?this.Ps.next():Ri.ot),"readwrite-primary"===t?this.ai(m).next(b=>!!b||this.hi(m)).next(b=>{if(!b)throw Qn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Re(le.FAILED_PRECONDITION,eC);return r(m)}).next(b=>this.fi(m).next(()=>b)):this.bi(m).next(()=>r(m)))).then(v=>(m.raiseOnCommittedEvent(),v))}bi(e){return n0(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(le.FAILED_PRECONDITION,OC)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return n0(e).put("owner",t)}static V(){return Gs.V()}li(e){const t=n0(e);return t.get("owner").next(r=>this.di(r)?(Ne("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):oe.resolve())}mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Qn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,lt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const r=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Ne("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Qn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){Qn("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function n0(n){return pi(n,"owner")}function lD(n){return pi(n,"clientMetadata")}function FC(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class UC{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=o}static Vi(e,t){let r=Bt(),o=Bt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new UC(e,t.fromCache,r,o)}}class R1{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,o){return this.Ci(e,t).next(u=>u||this.xi(e,t,o,r)).next(u=>u||this.Ni(e,t))}Ci(e,t){if(qE(t))return oe.resolve(null);let r=Pi(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=dm(t,null,"F"),r=Pi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=Bt(...u);return this.Di.getDocuments(e,l).next(m=>this.indexManager.getMinOffset(e,r).next(v=>{const b=this.ki(t,m);return this.Mi(t,b,l,v.readTime)?this.Ci(e,dm(t,null,"F")):this.Oi(e,b,t,v)}))})))}xi(e,t,r,o){return qE(t)||o.isEqual(St.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(u=>{const l=this.ki(t,u);return this.Mi(t,l,r,o)?this.Ni(e,t):(wv()<=qu.in.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),lh(t)),this.Oi(e,l,t,hl(o,-1)))})}ki(e,t){let r=new hn(WE(e));return t.forEach((o,u)=>{dh(e,u)&&(r=r.add(u))}),r}Mi(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ni(e,t){return wv()<=qu.in.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",lh(t)),this.Di.getDocumentsMatchingQuery(e,t,Yi.min())}Oi(e,t,r,o){return this.Di.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class rR{constructor(e,t,r,o){this.persistence=e,this.Fi=t,this.wt=o,this.$i=new Jn(Pt),this.Bi=new hu(u=>yl(u),ah),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new A1(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function P1(n,e,t,r){return new rR(n,e,t,r)}function k1(n,e){return VC.apply(this,arguments)}function VC(){return VC=(0,ye.Z)(function*(n,e){const t=We(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],m=[];let v=Bt();for(const b of o){l.push(b.batchId);for(const A of b.mutations)v=v.add(A.key)}for(const b of u){m.push(b.batchId);for(const A of b.mutations)v=v.add(A.key)}return t.localDocuments.getDocuments(r,v).next(b=>({Ki:b,removedBatchIds:l,addedBatchIds:m}))})})}),VC.apply(this,arguments)}function iR(n,e){const t=We(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Ui.newChangeBuffer({trackRemovals:!0});return function(l,m,v,b){const A=v.batch,R=A.keys();let U=oe.resolve();return R.forEach(Y=>{U=U.next(()=>b.getEntry(m,Y)).next(te=>{const Se=v.docVersions.get(Y);Ct(null!==Se),te.version.compareTo(Se)<0&&(A.applyToRemoteDocument(te,v),te.isValidDocument()&&(te.setReadTime(v.commitVersion),b.addEntry(te)))})}),U.next(()=>l.mutationQueue.removeMutationBatch(m,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let m=Bt();for(let v=0;v<l.mutationResults.length;++v)l.mutationResults[v].transformResults.length>0&&(m=m.add(l.batch.mutations[v].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function N1(n){const e=We(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function sR(n,e){const t=We(n),r=e.snapshotVersion;let o=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Ui.newChangeBuffer({trackRemovals:!0});o=t.$i;const m=[];e.targetChanges.forEach((A,R)=>{const U=o.get(R);if(!U)return;m.push(t.Vs.removeMatchingKeys(u,A.removedDocuments,R).next(()=>t.Vs.addMatchingKeys(u,A.addedDocuments,R)));let Y=U.withSequenceNumber(u.currentSequenceNumber);var te,Se,xe;e.targetMismatches.has(R)?Y=Y.withResumeToken(Ur.EMPTY_BYTE_STRING,St.min()).withLastLimboFreeSnapshotVersion(St.min()):A.resumeToken.approximateByteSize()>0&&(Y=Y.withResumeToken(A.resumeToken,r)),o=o.insert(R,Y),Se=Y,xe=A,(0===(te=U).resumeToken.approximateByteSize()||Se.snapshotVersion.toMicroseconds()-te.snapshotVersion.toMicroseconds()>=3e8||xe.addedDocuments.size+xe.modifiedDocuments.size+xe.removedDocuments.size>0)&&m.push(t.Vs.updateTargetData(u,Y))});let v=Ji(),b=Bt();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),m.push(O1(u,l,e.documentUpdates).next(A=>{v=A.Gi,b=A.Qi})),!r.isEqual(St.min())){const A=t.Vs.getLastRemoteSnapshotVersion(u).next(R=>t.Vs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(A)}return oe.waitFor(m).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,v,b)).next(()=>v)}).then(u=>(t.$i=o,u))}function O1(n,e,t){let r=Bt(),o=Bt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=Ji();return t.forEach((m,v)=>{const b=u.get(m);v.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(m)),v.isNoDocument()&&v.version.isEqual(St.min())?(e.removeEntry(m,v.readTime),l=l.insert(m,v)):!b.isValidDocument()||v.version.compareTo(b.version)>0||0===v.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(v),l=l.insert(m,v)):Ne("LocalStore","Ignoring outdated watch update for ",m,". Current version:",b.version," Watch version:",v.version)}),{Gi:l,Qi:o}})}function oR(n,e){const t=We(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Im(n,e){const t=We(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Vs.getTargetData(r,e).next(u=>u?(o=u,oe.resolve(o)):t.Vs.allocateTargetId(r).next(l=>(o=new ph(e,l,0,r.currentSequenceNumber),t.Vs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.$i.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function Em(n,e,t){return BC.apply(this,arguments)}function BC(){return BC=(0,ye.Z)(function*(n,e,t){const r=We(n),o=r.$i.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,o)))}catch(l){if(!au(l))throw l;Ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.$i=r.$i.remove(e),r.Bi.delete(o.target)}),BC.apply(this,arguments)}function dD(n,e,t){const r=We(n);let o=St.min(),u=Bt();return r.persistence.runTransaction("Execute query","readonly",l=>function(m,v,b){const A=We(m),R=A.Bi.get(b);return void 0!==R?oe.resolve(A.$i.get(R)):A.Vs.getTargetData(v,b)}(r,l,Pi(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(l,m.targetId).next(v=>{u=v})}).next(()=>r.Fi.getDocumentsMatchingQuery(l,e,t?o:St.min(),t?u:Bt())).next(m=>(U1(r,Ov(e),m),{documents:m,ji:u})))}function L1(n,e){const t=We(n),r=We(t.Vs),o=t.$i.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.te(u,e).next(l=>l?l.target:null))}function F1(n,e){const t=We(n),r=t.Li.get(e)||St.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Ui.getAllFromCollectionGroup(o,e,hl(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(U1(t,e,o),o))}function U1(n,e,t){let r=St.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Li.set(e,r)}function jC(){return jC=(0,ye.Z)(function*(n,e,t,r){const o=We(n);let u=Bt(),l=Ji();for(const b of t){const A=e.Wi(b.metadata.name);b.document&&(u=u.add(A));const R=e.zi(b);R.setReadTime(e.Hi(b.metadata.readTime)),l=l.insert(A,R)}const m=o.Ui.newChangeBuffer({trackRemovals:!0}),v=yield Im(o,(b=r,Pi(vl(Ht.fromString(`__bundle__/docs/${b}`)))));var b;return o.persistence.runTransaction("Apply bundle documents","readwrite",b=>O1(b,m,l).next(A=>(m.apply(b),A)).next(A=>o.Vs.removeMatchingKeysForTargetId(b,v.targetId).next(()=>o.Vs.addMatchingKeys(b,u,v.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(b,A.Gi,A.Qi)).next(()=>A.Gi)))}),jC.apply(this,arguments)}function uR(n,e){return $C.apply(this,arguments)}function $C(){return $C=(0,ye.Z)(function*(n,e,t=Bt()){const r=yield Im(n,Pi(RC(e.bundledQuery))),o=We(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const l=a(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return o.Ds.saveNamedQuery(u,e);const m=r.withResumeToken(Ur.EMPTY_BYTE_STRING,l);return o.$i=o.$i.insert(m.targetId,m),o.Vs.updateTargetData(u,m).next(()=>o.Vs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Vs.addMatchingKeys(u,t,r.targetId)).next(()=>o.Ds.saveNamedQuery(u,e))})}),$C.apply(this,arguments)}function V1(n,e){return`firestore_clients_${n}_${e}`}function B1(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function HC(n,e){return`firestore_targets_${n}_${e}`}class hD{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Ji(e,t,r){const o=JSON.parse(r);let u,l="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return l&&o.error&&(l="string"==typeof o.error.message&&"string"==typeof o.error.code,l&&(u=new Re(o.error.code,o.error.message))),l?new hD(e,t,o.state,u):(Qn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class r0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Re(r.error.code,r.error.message))),u?new r0(e,r.state,o):(Qn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=gm();for(let l=0;o&&l<r.activeTargetIds.length;++l)o=LE(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return o?new fD(e,u):(Qn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class GC{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new GC(t.clientId,t.onlineState):(Qn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class zC{constructor(){this.activeTargetIds=gm()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qC{constructor(e,t,r,o,u){this.window=e,this.js=t,this.persistenceKey=r,this.tr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Jn(Pt),this.started=!1,this.ir=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.rr=V1(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new zC),this.cr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.Ri();for(const o of t){if(o===e.tr)continue;const u=e.getItem(V1(e.persistenceKey,o));if(u){const l=fD.Ji(o,u);l&&(e.sr=e.sr.insert(l.clientId,l))}}e._r();const r=e.storage.getItem(e.lr);if(r){const o=e.wr(r);o&&e.mr(o)}for(const o of e.ir)e.nr(o);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(HC(this.persistenceKey,e));if(r){const o=r0.Ji(e,r);o&&(t=o.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(HC(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.pr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ne("SharedClientState","READ",e,t),t}setItem(e,t){Ne("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ne("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ne("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void Qn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const o=t.Rr(r.key);return t.br(o,null)}{const o=t.Pr(r.key,r.newValue);if(o)return t.br(o.clientId,o)}}else if(t.ar.test(r.key)){if(null!==r.newValue){const o=t.vr(r.key,r.newValue);if(o)return t.Vr(o)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const o=t.Sr(r.key,r.newValue);if(o)return t.Dr(o)}}else if(r.key===t.lr){if(null!==r.newValue){const o=t.wr(r.newValue);if(o)return t.mr(o)}}else if(r.key===t.ur){const o=function(u){let l=Ri.ot;if(null!=u)try{const m=JSON.parse(u);Ct("number"==typeof m),l=m}catch(m){Qn("SharedClientState","Failed to read sequence number from WebStorage",m)}return l}(r.newValue);o!==Ri.ot&&t.sequenceNumberHandler(o)}else if(r.key===t.dr){const o=t.Cr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Nr(u)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const o=new hD(this.currentUser,e,t,r),u=B1(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Yi())}pr(e){const t=B1(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const o=HC(this.persistenceKey,e),u=new r0(e,t,r);this.setItem(o,u.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return fD.Ji(r,t)}vr(e,t){const r=this.ar.exec(e),o=Number(r[1]);return hD.Ji(new yr(void 0!==r[2]?r[2]:null),o,t)}Sr(e,t){const r=this.hr.exec(e),o=Number(r[1]);return r0.Ji(o,t)}wr(e){return GC.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Ne("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),o=this.gr(this.sr),u=this.gr(r),l=[],m=[];return u.forEach(v=>{o.has(v)||l.push(v)}),o.forEach(v=>{u.has(v)||m.push(v)}),this.syncEngine.Or(l,m).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=gm();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class j1{constructor(){this.Fr=new zC,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new zC,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class cR{Br(e){}shutdown(){}}class $1{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){Ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const lR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class dR{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class hR extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,o,u){const l=this.oo(e,t);Ne("RestConnection","Sending: ",l,r);const m={};return this.uo(m,o,u),this.co(e,l,m,r).then(v=>(Ne("RestConnection","Received: ",v),v),v=>{throw su("RestConnection",`${e} failed with error: `,v,"url: ",l,"request:",r),v})}ao(e,t,r,o,u,l){return this.ro(e,t,r,o,u)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+oc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}oo(e,t){return`${this.so}/v1/${t}:${lR[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,o){return new Promise((u,l)=>{const m=new _v;m.listenOnce(DE.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Ff.NO_ERROR:const b=m.getResponseJson();Ne("Connection","XHR received:",JSON.stringify(b)),u(b);break;case Ff.TIMEOUT:Ne("Connection",'RPC "'+e+'" timed out'),l(new Re(le.DEADLINE_EXCEEDED,"Request time out"));break;case Ff.HTTP_ERROR:const A=m.getStatus();if(Ne("Connection",'RPC "'+e+'" failed with status:',A,"response text:",m.getResponseText()),A>0){const R=m.getResponseJson().error;if(R&&R.status&&R.message){const U=function(Y){const te=Y.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(te)>=0?te:le.UNKNOWN}(R.status);l(new Re(U,R.message))}else l(new Re(le.UNKNOWN,"Server responded with status "+m.getStatus()))}else l(new Re(le.UNAVAILABLE,"Connection failed."));break;default:nt()}}finally{Ne("Connection",'RPC "'+e+'" completed.')}});const v=JSON.stringify(o);m.send(t,"POST",v,r,15)})}ho(e,t,r){const o=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=IE(),l=EE(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new HA({})),this.uo(m.initMessageHeaders,t,r),(0,lt.uI)()||(0,lt.b$)()||(0,lt.d)()||(0,lt.w1)()||(0,lt.Mn)()||(0,lt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const v=o.join("");Ne("Connection","Creating WebChannel: "+v,m);const b=u.createWebChannel(v,m);let A=!1,R=!1;const U=new dR({jr:te=>{R?Ne("Connection","Not sending because WebChannel is closed:",te):(A||(Ne("Connection","Opening WebChannel transport."),b.open(),A=!0),Ne("Connection","WebChannel sending:",te),b.send(te))},Wr:()=>b.close()}),Y=(te,Se,xe)=>{te.listen(Se,gt=>{try{xe(gt)}catch(wt){setTimeout(()=>{throw wt},0)}})};return Y(b,Yd.EventType.OPEN,()=>{R||Ne("Connection","WebChannel transport opened.")}),Y(b,Yd.EventType.CLOSE,()=>{R||(R=!0,Ne("Connection","WebChannel transport closed"),U.eo())}),Y(b,Yd.EventType.ERROR,te=>{R||(R=!0,su("Connection","WebChannel transport errored:",te),U.eo(new Re(le.UNAVAILABLE,"The operation could not be completed")))}),Y(b,Yd.EventType.MESSAGE,te=>{var Se;if(!R){const xe=te.data[0];Ct(!!xe);const gt=xe,wt=gt.error||(null===(Se=gt[0])||void 0===Se?void 0:Se.error);if(wt){Ne("Connection","WebChannel received error:",wt);const mt=wt.status;let it=function(Ut){const or=_r[Ut];if(void 0!==or)return $v(or)}(mt),bt=wt.message;void 0===it&&(it=le.INTERNAL,bt="Unknown error status: "+mt+" with message "+wt.message),R=!0,U.eo(new Re(it,bt)),b.close()}else Ne("Connection","WebChannel received:",xe),U.no(xe)}}),Y(l,zT.STAT_EVENT,te=>{te.stat===bE.PROXY?Ne("Connection","Detected buffering proxy"):te.stat===bE.NOPROXY&&Ne("Connection","Detected no buffering proxy")}),setTimeout(()=>{U.Zr()},0),U}}function H1(){return typeof window<"u"?window:null}function pD(){return typeof document<"u"?document:null}function s0(n){return new XA(n,!0)}class ZC{constructor(e,t,r=1e3,o=1.5,u=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=o,this._o=u,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),o=Math.max(0,t-r);o>0&&Ne("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,o,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class G1{constructor(e,t,r,o,u,l,m,v){this.js=e,this.Ao=r,this.Ro=o,this.bo=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=m,this.listener=v,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new ZC(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,ye.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,ye.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(Qn(t.toString()),Qn("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===le.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Po===t&&this.Uo(r,o)},r=>{e(()=>{const o=new Re(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(o)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(o=>{r(()=>this.qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}xo(){var e=this;this.state=5,this.So.Io((0,ye.Z)(function*(){e.state=0,e.start()}))}qo(e){return Ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(Ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fR extends G1{constructor(e,t,r,o,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,l),this.wt=u}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function we(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:nt(),o=e.targetChange.targetIds||[],u=function(v,b){return v.dt?(Ct(void 0===b||"string"==typeof b),Ur.fromBase64String(b||"")):(Ct(void 0===b||b instanceof Uint8Array),Ur.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,m=l&&function(v){const b=void 0===v.code?le.UNKNOWN:$v(v.code);return new Re(b,v.message||"")}(l);t=new EC(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=_(n,r.document.name),u=a(r.document.updateTime),l=new Zr({mapValue:{fields:r.document.fields}}),m=vn.newFoundDocument(o,u,l);t=new Gv(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=_(n,r.document),u=r.readTime?a(r.readTime):St.min(),l=vn.newNoDocument(o,u);t=new Gv([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,o=_(n,r.document);t=new Gv([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return nt();{const r=e.filter,u=new mC(r.count||0);t=new IC(r.targetId,u)}}var v;return t}(this.wt,e),r=function(o){if(!("targetChange"in o))return St.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?St.min():u.readTime?a(u.readTime):St.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=C(this.wt),t.addTarget=function(o,u){let l;const m=u.target;return l=Wf(m)?{documents:Et(o,m)}:{query:Me(o,m)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?l.resumeToken=i(o,u.resumeToken):u.snapshotVersion.compareTo(St.min())>0&&(l.readTime=ym(o,u.snapshotVersion.toTimestamp())),l}(this.wt,e);const r=function Zt(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return nt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=C(this.wt),t.removeTarget=e,this.Oo(t)}}class pR extends G1{constructor(e,t,r,o,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,l),this.wt=u,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function et(n,e){return n&&n.length>0?(Ct(void 0!==e),n.map(t=>function(r,o){let u=a(r.updateTime?r.updateTime:o);return u.isEqual(St.min())&&(u=a(o)),new hC(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=a(e.commitTime);return this.listener.Jo(r,t)}return Ct(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=C(this.wt),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Pe(this.wt,r))};this.Oo(t)}}class gR extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=o,this.Zo=!1}tu(){if(this.Zo)throw new Re(le.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.ro(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Re(le.UNKNOWN,o.toString())})}ao(e,t,r,o){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.bo.ao(e,t,r,u,l,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Re(le.UNKNOWN,u.toString())})}terminate(){this.Zo=!0}}class mR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Qn(t),this.su=!1):Ne("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class yR{constructor(e,t,r,o,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=u,this.du.Br(m=>{r.enqueueAndForget((0,ye.Z)(function*(){var v;yh(l)&&(Ne("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,ye.Z)(function*(b){const A=We(b);A.lu.add(4),yield Dm(A),A._u.set("Unknown"),A.lu.delete(4),yield o0(A)}),function(b){return v.apply(this,arguments)})(l))}))}),this._u=new mR(r,o)}}function o0(n){return WC.apply(this,arguments)}function WC(){return WC=(0,ye.Z)(function*(n){if(yh(n))for(const e of n.fu)yield e(!0)}),WC.apply(this,arguments)}function Dm(n){return KC.apply(this,arguments)}function KC(){return KC=(0,ye.Z)(function*(n){for(const e of n.fu)yield e(!1)}),KC.apply(this,arguments)}function gD(n,e){const t=We(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),JC(t)?QC(t):Tm(t).Co()&&YC(t,e))}function a0(n,e){const t=We(n),r=Tm(t);t.hu.delete(e),r.Co()&&z1(t,e),0===t.hu.size&&(r.Co()?r.ko():yh(t)&&t._u.set("Unknown"))}function YC(n,e){n.wu.Nt(e.targetId),Tm(n).Qo(e)}function z1(n,e){n.wu.Nt(e),Tm(n).jo(e)}function QC(n){n.wu=new bC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),Tm(n).start(),n._u.iu()}function JC(n){return yh(n)&&!Tm(n).Do()&&n.hu.size>0}function yh(n){return 0===We(n).lu.size}function q1(n){n.wu=void 0}function _R(n){return XC.apply(this,arguments)}function XC(){return XC=(0,ye.Z)(function*(n){n.hu.forEach((e,t)=>{YC(n,e)})}),XC.apply(this,arguments)}function vR(n,e){return eS.apply(this,arguments)}function eS(){return eS=(0,ye.Z)(function*(n,e){q1(n),JC(n)?(n._u.uu(e),QC(n)):n._u.set("Unknown")}),eS.apply(this,arguments)}function wR(n,e,t){return tS.apply(this,arguments)}function tS(){return tS=(0,ye.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof EC&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(o,u){const l=u.cause;for(const m of u.targetIds)o.hu.has(m)&&(yield o.remoteSyncer.rejectListen(m,l),o.hu.delete(m),o.wu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield mD(n,r)}else if(e instanceof Gv?n.wu.Ut(e):e instanceof IC?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(St.min()))try{const r=yield N1(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const l=o.wu.Yt(u);return l.targetChanges.forEach((m,v)=>{if(m.resumeToken.approximateByteSize()>0){const b=o.hu.get(v);b&&o.hu.set(v,b.withResumeToken(m.resumeToken,u))}}),l.targetMismatches.forEach(m=>{const v=o.hu.get(m);if(!v)return;o.hu.set(m,v.withResumeToken(Ur.EMPTY_BYTE_STRING,v.snapshotVersion)),z1(o,m);const b=new ph(v.target,m,1,v.sequenceNumber);YC(o,b)}),o.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Ne("RemoteStore","Failed to raise snapshot:",r),yield mD(n,r)}var r}),tS.apply(this,arguments)}function mD(n,e,t){return nS.apply(this,arguments)}function nS(){return nS=(0,ye.Z)(function*(n,e,t){if(!au(e))throw e;n.lu.add(1),yield Dm(n),n._u.set("Offline"),t||(t=()=>N1(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){Ne("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield o0(n)}))}),nS.apply(this,arguments)}function Z1(n,e){return e().catch(t=>mD(n,t,e))}function bm(n){return rS.apply(this,arguments)}function rS(){return rS=(0,ye.Z)(function*(n){const e=We(n),t=_h(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;IR(e);)try{const o=yield oR(e.localStore,r);if(null===o){0===e.au.length&&t.ko();break}r=o.batchId,ER(e,o)}catch(o){yield mD(e,o)}W1(e)&&K1(e)}),rS.apply(this,arguments)}function IR(n){return yh(n)&&n.au.length<10}function ER(n,e){n.au.push(e);const t=_h(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function W1(n){return yh(n)&&!_h(n).Do()&&n.au.length>0}function K1(n){_h(n).start()}function DR(n){return iS.apply(this,arguments)}function iS(){return iS=(0,ye.Z)(function*(n){_h(n).Xo()}),iS.apply(this,arguments)}function bR(n){return sS.apply(this,arguments)}function sS(){return sS=(0,ye.Z)(function*(n){const e=_h(n);for(const t of n.au)e.Ho(t.mutations)}),sS.apply(this,arguments)}function TR(n,e,t){return oS.apply(this,arguments)}function oS(){return oS=(0,ye.Z)(function*(n,e,t){const r=n.au.shift(),o=xC.from(r,e,t);yield Z1(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield bm(n)}),oS.apply(this,arguments)}function CR(n,e){return aS.apply(this,arguments)}function aS(){return aS=(0,ye.Z)(function*(n,e){var t;e&&_h(n).zo&&(yield(t=(0,ye.Z)(function*(r,o){if(jv(u=o.code)&&u!==le.ABORTED){const l=r.au.shift();_h(r).No(),yield Z1(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o)),yield bm(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),W1(n)&&K1(n)}),aS.apply(this,arguments)}function Y1(n,e){return uS.apply(this,arguments)}function uS(){return uS=(0,ye.Z)(function*(n,e){const t=We(n);t.asyncQueue.verifyOperationInProgress(),Ne("RemoteStore","RemoteStore received new credentials");const r=yh(t);t.lu.add(3),yield Dm(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield o0(t)}),uS.apply(this,arguments)}function cS(n,e){return lS.apply(this,arguments)}function lS(){return lS=(0,ye.Z)(function*(n,e){const t=We(n);e?(t.lu.delete(2),yield o0(t)):e||(t.lu.add(2),yield Dm(t),t._u.set("Unknown"))}),lS.apply(this,arguments)}function Tm(n){return n.mu||(n.mu=function(e,t,r){const o=We(e);return o.tu(),new fR(t,o.bo,o.authCredentials,o.appCheckCredentials,o.wt,r)}(n.datastore,n.asyncQueue,{zr:_R.bind(null,n),Jr:vR.bind(null,n),Go:wR.bind(null,n)}),n.fu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.mu.No(),JC(n)?QC(n):n._u.set("Unknown")):(yield n.mu.stop(),q1(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function _h(n){return n.gu||(n.gu=function(e,t,r){const o=We(e);return o.tu(),new pR(t,o.bo,o.authCredentials,o.appCheckCredentials,o.wt,r)}(n.datastore,n.asyncQueue,{zr:DR.bind(null,n),Jr:CR.bind(null,n),Yo:bR.bind(null,n),Jo:TR.bind(null,n)}),n.fu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.gu.No(),yield bm(n)):(yield n.gu.stop(),n.au.length>0&&(Ne("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class dS{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,o,u){const l=Date.now()+r,m=new dS(e,t,l,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cm(n,e){if(Qn("AsyncQueue",`${e}: ${n}`),au(n))return new Re(le.UNAVAILABLE,`${e}: ${n}`);throw n}class Sm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||He.comparator(t.key,r.key):(t,r)=>He.comparator(t.key,r.key),this.keyedMap=Dl(),this.sortedSet=new Jn(this.comparator)}static emptySet(e){return new Sm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Sm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Sm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Q1{constructor(){this.yu=new Jn(He.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):nt():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Am{constructor(e,t,r,o,u,l,m,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=m,this.excludesMetadataChanges=v}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(l=>{u.push({type:0,doc:l})}),new Am(e,t,Sm.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ch(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class SR{constructor(){this.Iu=void 0,this.listeners=[]}}class AR{constructor(){this.queries=new hu(e=>Nv(e),ch),this.onlineState="Unknown",this.Tu=new Set}}function hS(n,e){return fS.apply(this,arguments)}function fS(){return fS=(0,ye.Z)(function*(n,e){const t=We(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new SR),o)try{u.Iu=yield t.onListen(r)}catch(l){const m=Cm(l,`Initialization of query '${lh(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Eu(t.onlineState),u.Iu&&e.Au(u.Iu)&&mS(t)}),fS.apply(this,arguments)}function pS(n,e){return gS.apply(this,arguments)}function gS(){return gS=(0,ye.Z)(function*(n,e){const t=We(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),gS.apply(this,arguments)}function xR(n,e){const t=We(n);let r=!1;for(const o of e){const l=t.queries.get(o.query);if(l){for(const m of l.listeners)m.Au(o)&&(r=!0);l.Iu=o}}r&&mS(t)}function MR(n,e,t){const r=We(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function mS(n){n.Tu.forEach(e=>{e.next()})}class yS{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Am(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Am.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class RR{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class J1{constructor(e){this.wt=e}Wi(e){return _(this.wt,e)}zi(e){return e.metadata.exists?G(this.wt,e.document,!1):vn.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return a(e)}}class PR{constructor(e,t,r){this.xu=e,this.localStore=t,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=X1(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Ht.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new J1(this.wt);for(const o of e)if(o.metadata.queries){const u=r.Wi(o.metadata.name);for(const l of o.metadata.queries){const m=(t.get(l)||Bt()).add(u);t.set(l,m)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function aR(n,e,t,r){return jC.apply(this,arguments)}(e.localStore,new J1(e.wt),e.documents,e.xu.id),r=e.ku(e.documents);for(const o of e.queries)yield uR(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function X1(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class ex{constructor(e){this.key=e}}class tx{constructor(e){this.key=e}}class nx{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Bt(),this.mutatedKeys=Bt(),this.Lu=WE(e),this.Uu=new Sm(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new Q1,o=t?t.Uu:this.Uu;let u=t?t.mutatedKeys:this.mutatedKeys,l=o,m=!1;const v="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,b="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((A,R)=>{const U=o.get(A),Y=dh(this.query,R)?R:null,te=!!U&&this.mutatedKeys.has(U.key),Se=!!Y&&(Y.hasLocalMutations||this.mutatedKeys.has(Y.key)&&Y.hasCommittedMutations);let xe=!1;U&&Y?U.data.isEqual(Y.data)?te!==Se&&(r.track({type:3,doc:Y}),xe=!0):this.Qu(U,Y)||(r.track({type:2,doc:Y}),xe=!0,(v&&this.Lu(Y,v)>0||b&&this.Lu(Y,b)<0)&&(m=!0)):!U&&Y?(r.track({type:0,doc:Y}),xe=!0):U&&!Y&&(r.track({type:1,doc:U}),xe=!0,(v||b)&&(m=!0)),xe&&(Y?(l=l.add(Y),u=Se?u.add(A):u.delete(A)):(l=l.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const A="F"===this.query.limitType?l.last():l.first();l=l.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Uu:l,Gu:r,Mi:m,mutatedKeys:u}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const u=e.Gu.pu();u.sort((b,A)=>function(R,U){const Y=te=>{switch(te){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt()}};return Y(R)-Y(U)}(b.type,A.type)||this.Lu(b.doc,A.doc)),this.ju(r);const l=t?this.Wu():[],m=0===this.Bu.size&&this.current?1:0,v=m!==this.$u;return this.$u=m,0!==u.length||v?{snapshot:new Am(this.query,e.Uu,o,u,e.mutatedKeys,0===m,v,!1),zu:l}:{zu:l}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new Q1,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Bt(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new tx(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new ex(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=Bt();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return Am.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class kR{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class NR{constructor(e){this.key=e,this.Xu=!1}}class OR{constructor(e,t,r,o,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.Zu={},this.tc=new hu(m=>Nv(m),ch),this.ec=new Map,this.nc=new Set,this.sc=new Jn(He.comparator),this.ic=new Map,this.rc=new NC,this.oc={},this.uc=new Map,this.cc=ap.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function LR(n,e){return _S.apply(this,arguments)}function _S(){return _S=(0,ye.Z)(function*(n,e){const t=jS(n);let r,o;const u=t.tc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.Yu();else{const l=yield Im(t.localStore,Pi(e));t.isPrimaryClient&&gD(t.remoteStore,l);const m=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,o=yield vS(t,e,r,"current"===m)}return o}),_S.apply(this,arguments)}function vS(n,e,t,r){return wS.apply(this,arguments)}function wS(){return wS=(0,ye.Z)(function*(n,e,t,r){n.hc=(A,R,U)=>{return(Y=(0,ye.Z)(function*(te,Se,xe,gt){let wt=Se.view.Ku(xe);wt.Mi&&(wt=yield dD(te.localStore,Se.query,!1).then(({documents:bt})=>Se.view.Ku(bt,wt)));const mt=gt&&gt.targetChanges.get(Se.targetId),it=Se.view.applyChanges(wt,te.isPrimaryClient,mt);return MS(te,Se.targetId,it.zu),it.snapshot}),function(te,Se,xe,gt){return Y.apply(this,arguments)})(n,A,R,U);var Y};const o=yield dD(n.localStore,e,!0),u=new nx(e,o.ji),l=u.Ku(o.documents),m=mm.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),v=u.applyChanges(l,n.isPrimaryClient,m);MS(n,t,v.zu);const b=new kR(e,t,u);return n.tc.set(e,b),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),v.snapshot}),wS.apply(this,arguments)}function FR(n,e){return IS.apply(this,arguments)}function IS(){return IS=(0,ye.Z)(function*(n,e){const t=We(n),r=t.tc.get(e),o=t.ec.get(r.targetId);if(o.length>1)return t.ec.set(r.targetId,o.filter(u=>!ch(u,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Em(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),a0(t.remoteStore,r.targetId),xm(t,r.targetId)}).catch(fl))):(xm(t,r.targetId),yield Em(t.localStore,r.targetId,!0))}),IS.apply(this,arguments)}function ES(){return ES=(0,ye.Z)(function*(n,e,t){const r=$S(n);try{const o=yield function(u,l){const m=We(u),v=bn.now(),b=l.reduce((U,Y)=>U.add(Y.key),Bt());let A,R;return m.persistence.runTransaction("Locally write mutations","readwrite",U=>{let Y=Ji(),te=Bt();return m.Ui.getEntries(U,b).next(Se=>{Y=Se,Y.forEach((xe,gt)=>{gt.isValidDocument()||(te=te.add(xe))})}).next(()=>m.localDocuments.getOverlayedDocuments(U,Y)).next(Se=>{A=Se;const xe=[];for(const gt of l){const wt=Vv(gt,A.get(gt.key).overlayedDocument);null!=wt&&xe.push(new hc(gt.key,wt,Qi(wt.value.mapValue),Vn.exists(!0)))}return m.mutationQueue.addMutationBatch(U,v,xe,l)}).next(Se=>{R=Se;const xe=Se.applyToLocalDocumentSet(A,te);return m.documentOverlayCache.saveOverlays(U,Se.batchId,xe)})}).then(()=>({batchId:R.batchId,changes:_C(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,l,m){let v=u.oc[u.currentUser.toKey()];v||(v=new Jn(Pt)),v=v.insert(l,m),u.oc[u.currentUser.toKey()]=v}(r,o.batchId,t),yield Tl(r,o.changes),yield bm(r.remoteStore)}catch(o){const u=Cm(o,"Failed to persist write");t.reject(u)}}),ES.apply(this,arguments)}function rx(n,e){return DS.apply(this,arguments)}function DS(){return DS=(0,ye.Z)(function*(n,e){const t=We(n);try{const r=yield sR(t.localStore,e);e.targetChanges.forEach((o,u)=>{const l=t.ic.get(u);l&&(Ct(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?l.Xu=!0:o.modifiedDocuments.size>0?Ct(l.Xu):o.removedDocuments.size>0&&(Ct(l.Xu),l.Xu=!1))}),yield Tl(t,r,e)}catch(r){yield fl(r)}}),DS.apply(this,arguments)}function ix(n,e,t){const r=We(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.tc.forEach((u,l)=>{const m=l.view.Eu(e);m.snapshot&&o.push(m.snapshot)}),function(u,l){const m=We(u);m.onlineState=l;let v=!1;m.queries.forEach((b,A)=>{for(const R of A.listeners)R.Eu(l)&&(v=!0)}),v&&mS(m)}(r.eventManager,e),o.length&&r.Zu.Go(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function VR(n,e,t){return bS.apply(this,arguments)}function bS(){return bS=(0,ye.Z)(function*(n,e,t){const r=We(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.ic.get(e),u=o&&o.key;if(u){let l=new Jn(He.comparator);l=l.insert(u,vn.newNoDocument(u,St.min()));const m=Bt().add(u),v=new ep(St.min(),new Map,new hn(Pt),l,m);yield rx(r,v),r.sc=r.sc.remove(u),r.ic.delete(e),RS(r)}else yield Em(r.localStore,e,!1).then(()=>xm(r,e,t)).catch(fl)}),bS.apply(this,arguments)}function BR(n,e){return TS.apply(this,arguments)}function TS(){return TS=(0,ye.Z)(function*(n,e){const t=We(n),r=e.batch.batchId;try{const o=yield iR(t.localStore,e);xS(t,r,null),AS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Tl(t,o)}catch(o){yield fl(o)}}),TS.apply(this,arguments)}function jR(n,e,t){return CS.apply(this,arguments)}function CS(){return CS=(0,ye.Z)(function*(n,e,t){const r=We(n);try{const o=yield function(u,l){const m=We(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let b;return m.mutationQueue.lookupMutationBatch(v,l).next(A=>(Ct(null!==A),b=A.keys(),m.mutationQueue.removeMutationBatch(v,A))).next(()=>m.mutationQueue.performConsistencyCheck(v)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(v,b,l)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,b)).next(()=>m.localDocuments.getDocuments(v,b))})}(r.localStore,e);xS(r,e,t),AS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Tl(r,o)}catch(o){yield fl(o)}}),CS.apply(this,arguments)}function SS(){return SS=(0,ye.Z)(function*(n,e){const t=We(n);yh(t.remoteStore)||Ne("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=We(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>l.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.uc.get(r)||[];o.push(e),t.uc.set(r,o)}catch(r){const o=Cm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),SS.apply(this,arguments)}function AS(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function xS(n,e,t){const r=We(n);let o=r.oc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.oc[r.currentUser.toKey()]=o}}function xm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||sx(n,r)})}function sx(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(a0(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),RS(n))}function MS(n,e,t){for(const r of t)r instanceof ex?(n.rc.addReference(r.key,e),HR(n,r)):r instanceof tx?(Ne("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||sx(n,r.key)):nt()}function HR(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||(Ne("SyncEngine","New document in limbo: "+t),n.nc.add(r),RS(n))}function RS(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new He(Ht.fromString(e)),r=n.cc.next();n.ic.set(r,new NR(t)),n.sc=n.sc.insert(t,r),gD(n.remoteStore,new ph(Pi(vl(t.path)),r,2,Ri.ot))}}function Tl(n,e,t){return PS.apply(this,arguments)}function PS(){return PS=(0,ye.Z)(function*(n,e,t){const r=We(n),o=[],u=[],l=[];var m;r.tc.isEmpty()||(r.tc.forEach((m,v)=>{l.push(r.hc(v,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,b.fromCache?"not-current":"current"),o.push(b);const A=UC.Vi(v.targetId,b);u.push(A)}}))}),yield Promise.all(l),r.Zu.Go(o),yield(m=(0,ye.Z)(function*(v,b){const A=We(v);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>oe.forEach(b,U=>oe.forEach(U.Pi,Y=>A.persistence.referenceDelegate.addReference(R,U.targetId,Y)).next(()=>oe.forEach(U.vi,Y=>A.persistence.referenceDelegate.removeReference(R,U.targetId,Y)))))}catch(R){if(!au(R))throw R;Ne("LocalStore","Failed to update sequence numbers: "+R)}for(const R of b){const U=R.targetId;if(!R.fromCache){const Y=A.$i.get(U),Se=Y.withLastLimboFreeSnapshotVersion(Y.snapshotVersion);A.$i=A.$i.insert(U,Se)}}}),function(v,b){return m.apply(this,arguments)})(r.localStore,u))}),PS.apply(this,arguments)}function GR(n,e){return kS.apply(this,arguments)}function kS(){return kS=(0,ye.Z)(function*(n,e){const t=We(n);if(!t.currentUser.isEqual(e)){Ne("SyncEngine","User change. New user:",e.toKey());const r=yield k1(t.localStore,e);t.currentUser=e,(o=t).uc.forEach(l=>{l.forEach(m=>{m.reject(new Re(le.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Tl(t,r.Ki)}var o}),kS.apply(this,arguments)}function zR(n,e){const t=We(n),r=t.ic.get(e);if(r&&r.Xu)return Bt().add(r.key);{let o=Bt();const u=t.ec.get(e);if(!u)return o;for(const l of u){const m=t.tc.get(l);o=o.unionWith(m.view.qu)}return o}}function qR(n,e){return NS.apply(this,arguments)}function NS(){return NS=(0,ye.Z)(function*(n,e){const t=We(n),r=yield dD(t.localStore,e.query,!0),o=e.view.Ju(r);return t.isPrimaryClient&&MS(t,e.targetId,o.zu),o}),NS.apply(this,arguments)}function ZR(n,e){return OS.apply(this,arguments)}function OS(){return OS=(0,ye.Z)(function*(n,e){const t=We(n);return F1(t.localStore,e).then(r=>Tl(t,r))}),OS.apply(this,arguments)}function WR(n,e,t,r){return LS.apply(this,arguments)}function LS(){return LS=(0,ye.Z)(function*(n,e,t,r){const o=We(n),u=yield function(l,m){const v=We(l),b=We(v.mutationQueue);return v.persistence.runTransaction("Lookup mutation documents","readonly",A=>b.yn(A,m).next(R=>R?v.localDocuments.getDocuments(A,R):oe.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield bm(o.remoteStore):"acknowledged"===t||"rejected"===t?(xS(o,e,r||null),AS(o,e),m=e,We(We(o.localStore).mutationQueue).In(m)):nt(),yield Tl(o,u)):Ne("SyncEngine","Cannot apply mutation batch with id: "+e)}),LS.apply(this,arguments)}function FS(){return FS=(0,ye.Z)(function*(n,e){const t=We(n);if(jS(t),$S(t),!0===e&&!0!==t.ac){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield ox(t,r.toArray());t.ac=!0,yield cS(t.remoteStore,!0);for(const u of o)gD(t.remoteStore,u)}else if(!1===e&&!1!==t.ac){const r=[];let o=Promise.resolve();t.ec.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):o=o.then(()=>(xm(t,l),Em(t.localStore,l,!0))),a0(t.remoteStore,l)}),yield o,yield ox(t,r),function(u){const l=We(u);l.ic.forEach((m,v)=>{a0(l.remoteStore,v)}),l.rc.cs(),l.ic=new Map,l.sc=new Jn(He.comparator)}(t),t.ac=!1,yield cS(t.remoteStore,!1)}}),FS.apply(this,arguments)}function ox(n,e,t){return US.apply(this,arguments)}function US(){return US=(0,ye.Z)(function*(n,e,t){const r=We(n),o=[],u=[];for(const l of e){let m;const v=r.ec.get(l);if(v&&0!==v.length){m=yield Im(r.localStore,Pi(v[0]));for(const b of v){const A=r.tc.get(b),R=yield qR(r,A);R.snapshot&&u.push(R.snapshot)}}else{const b=yield L1(r.localStore,l);m=yield Im(r.localStore,b),yield vS(r,ax(b),l,!1)}o.push(m)}return r.Zu.Go(u),o}),US.apply(this,arguments)}function ax(n){return aC(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function YR(n){const e=We(n);return We(We(e.localStore).persistence).Ri()}function QR(n,e,t,r){return VS.apply(this,arguments)}function VS(){return VS=(0,ye.Z)(function*(n,e,t,r){const o=We(n);if(o.ac)return void Ne("SyncEngine","Ignoring unexpected query state notification.");const u=o.ec.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield F1(o.localStore,Ov(u[0])),m=ep.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Tl(o,l,m);break}case"rejected":yield Em(o.localStore,e,!0),xm(o,e,r);break;default:nt()}}),VS.apply(this,arguments)}function JR(n,e,t){return BS.apply(this,arguments)}function BS(){return BS=(0,ye.Z)(function*(n,e,t){const r=jS(n);if(r.ac){for(const o of e){if(r.ec.has(o)){Ne("SyncEngine","Adding an already active target "+o);continue}const u=yield L1(r.localStore,o),l=yield Im(r.localStore,u);yield vS(r,ax(u),l.targetId,!1),gD(r.remoteStore,l)}for(const o of t)r.ec.has(o)&&(yield Em(r.localStore,o,!1).then(()=>{a0(r.remoteStore,o),xm(r,o)}).catch(fl))}}),BS.apply(this,arguments)}function jS(n){const e=We(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=rx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VR.bind(null,e),e.Zu.Go=xR.bind(null,e.eventManager),e.Zu.lc=MR.bind(null,e.eventManager),e}function $S(n){const e=We(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jR.bind(null,e),e}class ux{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.wt=s0(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return P1(this.persistence,new R1,e.initialUser,this.wt)}_c(e){return new x1(cD.Os,this.wt)}dc(e){return new j1}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class cx extends ux{constructor(e,t,r){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield r.yc.initialize(r,e),yield $S(r.yc.syncEngine),yield bm(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return P1(this.persistence,new R1,e.initialUser,this.wt)}mc(e,t){return new HM(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const r=new kE(t,this.persistence);return new tC(e.asyncQueue,r)}_c(e){const t=FC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?qs.withCacheSize(this.cacheSizeBytes):qs.DEFAULT;return new LC(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,H1(),pD(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new j1}}class eP extends cx{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const o=r.yc.syncEngine;r.sharedClientState instanceof qC&&(r.sharedClientState.syncEngine={kr:WR.bind(null,o),Mr:QR.bind(null,o),Or:JR.bind(null,o),Ri:YR.bind(null,o),Nr:ZR.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var u=(0,ye.Z)(function*(l){yield function KR(n,e){return FS.apply(this,arguments)}(r.yc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}dc(e){const t=H1();if(!qC.V(t))throw new Re(le.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=FC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new qC(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class HS{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>ix(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=GR.bind(null,r.syncEngine),yield cS(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new AR}createDatastore(e){const t=s0(e.databaseInfo.databaseId),r=new hR(e.databaseInfo);return new gR(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>ix(this.syncEngine,m,0),l=$1.V()?new $1:new cR,new yR(t,r,o,u,l);var t,r,o,u,l}createSyncEngine(e,t){return function(r,o,u,l,m,v,b){const A=new OR(r,o,u,l,m,v);return b&&(A.ac=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=We(t);Ne("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield Dm(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function lx(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class yD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):Qn("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class tP{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new Lr,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.bc();if(null===t)return null;const r=e.Ac.decode(t),o=Number(r);isNaN(o)&&e.Pc(`length string (${r}) is not valid number`);const u=yield e.vc(o);return new RR(JSON.parse(u),t.length+o)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,ye.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const r=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class nP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,ye.Z)(function*(u,l){const m=We(u),v=C(m.wt)+"/documents",b={documents:l.map(Y=>f(m.wt,Y))},A=yield m.ao("BatchGetDocuments",v,b,l.length),R=new Map;A.forEach(Y=>{const te=function ee(n,e){return"found"in e?function(t,r){Ct(!!r.found);const o=_(t,r.found.name),u=a(r.found.updateTime),l=new Zr({mapValue:{fields:r.found.fields}});return vn.newFoundDocument(o,u,l)}(n,e):"missing"in e?function(t,r){Ct(!!r.missing),Ct(!!r.readTime);const o=_(t,r.missing),u=a(r.readTime);return vn.newNoDocument(o,u)}(n,e):nt()}(m.wt,Y);R.set(te.key.toString(),te)});const U=[];return l.forEach(Y=>{const te=R.get(Y.toString());Ct(!!te),U.push(te)}),U}),function(u,l){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new El(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=He.fromPath(o);e.mutations.push(new Bv(u,e.precondition(u)))}),yield(r=(0,ye.Z)(function*(o,u){const l=We(o),m=C(l.wt)+"/documents",v={writes:u.map(b=>Pe(l.wt,b))};yield l.ro("Commit",m,v)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw nt();t=St.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Vn.updateTime(t):Vn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(St.min()))throw new Re(le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Vn.updateTime(t)}return Vn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class rP{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.Dc=r.maxAttempts,this.So=new ZC(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,ye.Z)(function*(){const t=new nP(e.datastore),r=e.xc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Nc(u)}))}).catch(o=>{e.Nc(o)})}))}xc(e){try{const t=this.updateFunction(e);return!ml(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!jv(t)}return!1}}class iP{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=yr.UNAUTHENTICATED,this.clientId=Jd.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,ye.Z)(function*(m){Ne("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Ne("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Cm(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function dx(n,e){return GS.apply(this,arguments)}function GS(){return GS=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ne("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,ye.Z)(function*(u){r.isEqual(u)||(yield k1(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),GS.apply(this,arguments)}function hx(n,e){return zS.apply(this,arguments)}function zS(){return zS=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield qS(n);Ne("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>Y1(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>Y1(e.remoteStore,u)),n.onlineComponents=e}),zS.apply(this,arguments)}function qS(n){return ZS.apply(this,arguments)}function ZS(){return ZS=(0,ye.Z)(function*(n){return n.offlineComponents||(Ne("FirestoreClient","Using default OfflineComponentProvider"),yield dx(n,new ux)),n.offlineComponents}),ZS.apply(this,arguments)}function _D(n){return WS.apply(this,arguments)}function WS(){return WS=(0,ye.Z)(function*(n){return n.onlineComponents||(Ne("FirestoreClient","Using default OnlineComponentProvider"),yield hx(n,new HS)),n.onlineComponents}),WS.apply(this,arguments)}function fx(n){return qS(n).then(e=>e.persistence)}function vD(n){return qS(n).then(e=>e.localStore)}function px(n){return _D(n).then(e=>e.remoteStore)}function KS(n){return _D(n).then(e=>e.syncEngine)}function Mm(n){return YS.apply(this,arguments)}function YS(){return YS=(0,ye.Z)(function*(n){const e=yield _D(n),t=e.eventManager;return t.onListen=LR.bind(null,e.syncEngine),t.onUnlisten=FR.bind(null,e.syncEngine),t}),YS.apply(this,arguments)}function gx(n,e,t={}){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(o,u,l,m,v){const b=new yD({next:R=>{u.enqueueAndForget(()=>pS(o,A));const U=R.docs.has(l);!U&&R.fromCache?v.reject(new Re(le.UNAVAILABLE,"Failed to get document because the client is offline.")):U&&R.fromCache&&m&&"server"===m.source?v.reject(new Re(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(R)},error:R=>v.reject(R)}),A=new yS(vl(l.path),b,{includeMetadataChanges:!0,Du:!0});return hS(o,A)}(yield Mm(n),n.asyncQueue,e,t,r)})),r.promise}function mx(n,e,t={}){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(o,u,l,m,v){const b=new yD({next:R=>{u.enqueueAndForget(()=>pS(o,A)),R.fromCache&&"server"===m.source?v.reject(new Re(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(R)},error:R=>v.reject(R)}),A=new yS(l,b,{includeMetadataChanges:!0,Du:!0});return hS(o,A)}(yield Mm(n),n.asyncQueue,e,t,r)})),r.promise}const yx=new Map;function QS(n,e,t){if(!t)throw new Re(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function _x(n,e,t,r){if(!0===e&&!0===r)throw new Re(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function vx(n){if(!He.isDocumentKey(n))throw new Re(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function wx(n){if(He.isDocumentKey(n))throw new Re(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function wD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":nt()}function Xt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=wD(n);throw new Re(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Ix(n,e){if(e<=0)throw new Re(le.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Ex{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,_x("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class u0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ex({}),this._settingsFrozen=!1,e instanceof lc?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Re(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lc(o.options.projectId)}(e))}get app(){if(!this._app)throw new Re(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ex(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new ZT;switch(t.type){case"gapi":const r=t.client;return Ct(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new KT(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Re(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=yx.get(e);t&&(Ne("ComponentProvider","Removing Datastore"),yx.delete(e),t.terminate())}(this),Promise.resolve()}}class Gn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gn(this.firestore,e,this._key)}}class Xi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xi(this.firestore,e,this._query)}}class mc extends Xi{constructor(e,t,r){super(e,t,vl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gn(this.firestore,null,new He(e))}withConverter(e){return new mc(this.firestore,e,this._path)}}function Dx(n,e,...t){if(n=(0,lt.m9)(n),QS("collection","path",e),n instanceof u0){const r=Ht.fromString(e,...t);return wx(r),new mc(n,null,r)}{if(!(n instanceof Gn||n instanceof mc))throw new Re(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ht.fromString(e,...t));return wx(r),new mc(n.firestore,null,r)}}function ID(n,e,...t){if(n=(0,lt.m9)(n),1===arguments.length&&(e=Jd.I()),QS("doc","path",e),n instanceof u0){const r=Ht.fromString(e,...t);return vx(r),new Gn(n,null,new He(r))}{if(!(n instanceof Gn||n instanceof mc))throw new Re(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ht.fromString(e,...t));return vx(r),new Gn(n.firestore,n instanceof mc?n.converter:null,new He(r))}}function bx(n,e){return n=(0,lt.m9)(n),e=(0,lt.m9)(e),(n instanceof Gn||n instanceof mc)&&(e instanceof Gn||e instanceof mc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Tx(n,e){return n=(0,lt.m9)(n),e=(0,lt.m9)(e),n instanceof Xi&&e instanceof Xi&&n.firestore===e.firestore&&ch(n._query,e._query)&&n.converter===e.converter}class gP{constructor(){this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new ZC(this,"async_queue_retry"),this.Kc=()=>{const t=pD();t&&Ne("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=pD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=pD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new Lr;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Oc.push(e),this.jc()))}jc(){var e=this;return(0,ye.Z)(function*(){if(0!==e.Oc.length){try{yield e.Oc[0](),e.Oc.shift(),e.So.reset()}catch(t){if(!au(t))throw t;Ne("AsyncQueue","Operation failed with retryable error: "+t)}e.Oc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Mc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,Qn("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Mc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const o=dS.createAndSchedule(this,e,t,r,u=>this.Wc(u));return this.$c.push(o),o}Gc(){this.Bc&&nt()}verifyOperationInProgress(){}zc(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.Mc,yield t}while(t!==e.Mc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function JS(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class mP{constructor(){this._progressObserver={},this._taskCompletionResolver=new Lr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Xn extends u0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new gP,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Cx(this),this._firestoreClient.terminate()}}function Vr(n){return n._firestoreClient||Cx(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Cx(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new OE(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new iP(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Sx(n,e,t){const r=new Lr;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield dx(n,t),yield hx(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(l=u).name?l.code===le.FAILED_PRECONDITION||l.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw u;su("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var l})).then(()=>r.promise)}function Ax(n){if(n._initialized||n._terminated)throw new Re(le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Cl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class yc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yc(Ur.fromBase64String(e))}catch(t){throw new Re(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new yc(Ur.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class cp{constructor(e){this._methodName=e}}class ED{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pt(this._lat,e._lat)||Pt(this._long,e._long)}}const CP=/^__.*__$/;class SP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new hc(e,this.data,this.fieldMask,t,this.fieldTransforms):new du(e,this.data,t,this.fieldTransforms)}}class xx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new hc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Mx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt()}}class DD{constructor(e,t,r,o,u,l){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=o,void 0===u&&this.Xc(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new DD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ta({path:r,na:!1});return o.sa(e),o}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ta({path:r,na:!1});return o.Xc(),o}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return CD(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(Mx(this.Zc)&&CP.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class AP{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||s0(e)}aa(e,t,r,o=!1){return new DD({Zc:e,methodName:t,ca:r,path:Un.emptyPath(),na:!1,ua:o},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function lp(n){const e=n._freezeSettings(),t=s0(n._databaseId);return new AP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function bD(n,e,t,r,o,u={}){const l=n.aa(u.merge||u.mergeFields?2:0,e,t,o);nA("Data must be an object, but it was:",l,r);const m=kx(r,l);let v,b;if(u.merge)v=new zs(l.fieldMask),b=l.fieldTransforms;else if(u.mergeFields){const A=[];for(const R of u.mergeFields){const U=rA(e,R,t);if(!l.contains(U))throw new Re(le.INVALID_ARGUMENT,`Field '${U}' is specified in your field mask but missing from your input data.`);Ox(A,U)||A.push(U)}v=new zs(A),b=l.fieldTransforms.filter(R=>v.covers(R.field))}else v=null,b=l.fieldTransforms;return new SP(new Zr(m),v,b)}class c0 extends cp{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof c0}}function Rx(n,e,t){return new DD({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class XS extends cp{_toFieldTransform(e){return new dc(e.path,new hh)}isEqual(e){return e instanceof XS}}class xP extends cp{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=Rx(this,e,!0),r=this.ha.map(u=>dp(u,t)),o=new Il(r);return new dc(e.path,o)}isEqual(e){return this===e}}class MP extends cp{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=Rx(this,e,!0),r=this.ha.map(u=>dp(u,t)),o=new fh(r);return new dc(e.path,o)}isEqual(e){return this===e}}class RP extends cp{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new Yf(e.wt,QE(e.wt,this.la));return new dc(e.path,t)}isEqual(e){return this===e}}function eA(n,e,t,r){const o=n.aa(1,e,t);nA("Data must be an object, but it was:",o,r);const u=[],l=Zr.empty();cc(r,(v,b)=>{const A=TD(e,v,t);b=(0,lt.m9)(b);const R=o.ia(A);if(b instanceof c0)u.push(A);else{const U=dp(b,R);null!=U&&(u.push(A),l.set(A,U))}});const m=new zs(u);return new xx(l,m,o.fieldTransforms)}function tA(n,e,t,r,o,u){const l=n.aa(1,e,t),m=[rA(e,r,t)],v=[o];if(u.length%2!=0)throw new Re(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let U=0;U<u.length;U+=2)m.push(rA(e,u[U])),v.push(u[U+1]);const b=[],A=Zr.empty();for(let U=m.length-1;U>=0;--U)if(!Ox(b,m[U])){const Y=m[U];let te=v[U];te=(0,lt.m9)(te);const Se=l.ia(Y);if(te instanceof c0)b.push(Y);else{const xe=dp(te,Se);null!=xe&&(b.push(Y),A.set(Y,xe))}}const R=new zs(b);return new xx(A,R,l.fieldTransforms)}function Px(n,e,t,r=!1){return dp(t,n.aa(r?4:3,e))}function dp(n,e){if(Nx(n=(0,lt.m9)(n)))return nA("Unsupported field value:",e,n),kx(n,e);if(n instanceof cp)return function(t,r){if(!Mx(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const l of t){let m=dp(l,r.ra(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,lt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return QE(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=bn.fromDate(t);return{timestampValue:ym(r.wt,o)}}if(t instanceof bn){const o=new bn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ym(r.wt,o)}}if(t instanceof ED)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof yc)return{bytesValue:i(r.wt,t._byteString)};if(t instanceof Gn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.oa(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:c(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${wD(t)}`)}(n,e)}function kx(n,e){const t={};return NE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cc(n,(r,o)=>{const u=dp(o,e.ea(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function Nx(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof bn||n instanceof ED||n instanceof yc||n instanceof Gn||n instanceof cp)}function nA(n,e,t){if(!Nx(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=wD(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function rA(n,e,t){if((e=(0,lt.m9)(e))instanceof Cl)return e._internalPath;if("string"==typeof e)return TD(n,e);throw CD("Field path arguments must be of type string or ",n,!1,void 0,t)}const PP=new RegExp("[~\\*/\\[\\]]");function TD(n,e,t){if(e.search(PP)>=0)throw CD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Cl(...e.split("."))._internalPath}catch{throw CD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function CD(n,e,t,r,o){const u=r&&!r.isEmpty(),l=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let v="";return(u||l)&&(v+=" (found",u&&(v+=` in field ${r}`),l&&(v+=` in document ${o}`),v+=")"),new Re(le.INVALID_ARGUMENT,m+n+v)}function Ox(n,e){return n.some(t=>t.isEqual(e))}class l0{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Gn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new kP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(SD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class kP extends l0{data(){return super.data()}}function SD(n,e){return"string"==typeof e?TD(n,e):e instanceof Cl?e._internalPath:e._delegate._internalPath}class hp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Sl extends l0{constructor(e,t,r,o,u,l){super(e,t,r,o,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new d0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(SD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class d0 extends Sl{data(e={}){return super.data(e)}}class vh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new hp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new d0(this._firestore,this._userDataWriter,r.key,r,new hp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new d0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new hp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>o||3!==l.type).map(l=>{const m=new d0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new hp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,b=-1;return 0!==l.type&&(v=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),b=u.indexOf(l.doc.key)),{type:NP(l.type),doc:m,oldIndex:v,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function NP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt()}}function Lx(n,e){return n instanceof Sl&&e instanceof Sl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof vh&&e instanceof vh&&n._firestore===e._firestore&&Tx(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function Fx(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Re(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class h0{}function wh(n,...e){for(const t of e)n=t._apply(n);return n}class OP extends h0{constructor(e,t,r){super(),this.fa=e,this.da=t,this._a=r,this.type="where"}_apply(e){const t=lp(e.firestore),r=function(o,u,l,m,v,b,A){let R;if(v.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Re(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){Hx(A,b);const Y=[];for(const te of A)Y.push($x(m,o,te));R={arrayValue:{values:Y}}}else R=$x(m,o,A)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||Hx(A,b),R=Px(l,"where",A,"in"===b||"not-in"===b);const U=Wr.create(v,b,R);return function(Y,te){if(te.ht()){const xe=ZE(Y);if(null!==xe&&!xe.isEqual(te.field))throw new Re(le.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${xe.toString()}' and '${te.field.toString()}'`);const gt=lm(Y);null!==gt&&Gx(0,te.field,gt)}const Se=function(xe,gt){for(const wt of xe.filters)if(gt.indexOf(wt.op)>=0)return wt.op;return null}(Y,function(xe){switch(xe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(te.op));if(null!==Se)throw new Re(le.INVALID_ARGUMENT,Se===te.op?`Invalid query. You cannot use more than one '${te.op.toString()}' filter.`:`Invalid query. You cannot use '${te.op.toString()}' filters with '${Se.toString()}' filters.`)}(o,U),U}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new Xi(e.firestore,e.converter,function(o,u){const l=o.filters.concat([u]);return new ra(o.path,o.collectionGroup,o.explicitOrderBy.slice(),l,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class FP extends h0{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Re(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new uh(o,u);return function(m,v){if(null===lm(m)){const b=ZE(m);null!==b&&Gx(0,b,v.field)}}(r,l),l}(e._query,this.fa,this.wa);return new Xi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new ra(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Ux extends h0{constructor(e,t,r){super(),this.type=e,this.ma=t,this.ga=r}_apply(e){return new Xi(e.firestore,e.converter,dm(e._query,this.ma,this.ga))}}class Vx extends h0{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=jx(e,this.type,this.ya,this.pa);return new Xi(e.firestore,e.converter,(o=t,new ra((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class Bx extends h0{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=jx(e,this.type,this.ya,this.pa);return new Xi(e.firestore,e.converter,(o=t,new ra((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function jx(n,e,t,r){if(t[0]=(0,lt.m9)(t[0]),t[0]instanceof l0)return function(o,u,l,m,v){if(!m)throw new Re(le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const b=[];for(const A of wl(o))if(A.field.isKeyField())b.push(sh(u,m.key));else{const R=m.data.field(A.field);if(om(R))throw new Re(le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===R){const U=A.field.canonicalString();throw new Re(le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${U}' (used as the orderBy) does not exist.`)}b.push(R)}return new _l(b,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=lp(n.firestore);return function(u,l,m,v,b,A){const R=u.explicitOrderBy;if(b.length>R.length)throw new Re(le.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const U=[];for(let Y=0;Y<b.length;Y++){const te=b[Y];if(R[Y].field.isKeyField()){if("string"!=typeof te)throw new Re(le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof te}`);if(!Kf(u)&&-1!==te.indexOf("/"))throw new Re(le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${te}' contains a slash.`);const Se=u.path.child(Ht.fromString(te));if(!He.isDocumentKey(Se))throw new Re(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${Se}' is not because it contains an odd number of segments.`);const xe=new He(Se);U.push(sh(l,xe))}else{const Se=Px(m,v,te);U.push(Se)}}return new _l(U,A)}(n._query,n.firestore._databaseId,o,e,t,r)}}function $x(n,e,t){if("string"==typeof(t=(0,lt.m9)(t))){if(""===t)throw new Re(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Kf(e)&&-1!==t.indexOf("/"))throw new Re(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ht.fromString(t));if(!He.isDocumentKey(r))throw new Re(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return sh(n,new He(r))}if(t instanceof Gn)return sh(n,t._key);throw new Re(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wD(t)}.`)}function Hx(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Re(le.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Gx(n,e,t){if(!t.isEqual(e))throw new Re(le.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const zP={maxAttempts:5};class iA{convertValue(e,t="none"){switch(ih(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(th(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw nt()}}convertObject(e,t){const r={};return cc(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new ED(Tn(e.latitude),Tn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Gf(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(nh(e));default:return null}}convertTimestamp(e){const t=gl(e);return new bn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ht.fromString(e);Ct(_m(r));const o=new lc(r.get(1),r.get(3)),u=new He(r.popFirst(5));return o.isEqual(t)||Qn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function AD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class qP extends iA{constructor(e){super(),this.firestore=e}convertBytes(e){return new yc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gn(this.firestore,null,t)}}class zx{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=lp(e)}set(e,t,r){this._verifyNotCommitted();const o=Ih(e,this._firestore),u=AD(o.converter,t,r),l=bD(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(l.toMutation(o._key,Vn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Ih(e,this._firestore);let l;return l="string"==typeof(t=(0,lt.m9)(t))||t instanceof Cl?tA(this._dataReader,"WriteBatch.update",u._key,t,r,o):eA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,Vn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ih(e,this._firestore);return this._mutations=this._mutations.concat(new El(t._key,Vn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ih(n,e){if((n=(0,lt.m9)(n)).firestore!==e)throw new Re(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class fp extends iA{constructor(e){super(),this.firestore=e}convertBytes(e){return new yc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gn(this.firestore,null,t)}}function qx(n,e,t){n=Xt(n,Gn);const r=Xt(n.firestore,Xn),o=AD(n.converter,e,t);return Rm(r,[bD(lp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Vn.none())])}function Zx(n,e,t,...r){n=Xt(n,Gn);const o=Xt(n.firestore,Xn),u=lp(o);let l;return l="string"==typeof(e=(0,lt.m9)(e))||e instanceof Cl?tA(u,"updateDoc",n._key,e,t,r):eA(u,"updateDoc",n._key,e),Rm(o,[l.toMutation(n._key,Vn.exists(!0))])}function Wx(n,...e){var t,r,o;n=(0,lt.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||JS(e[l])||(u=e[l],l++);const m={includeMetadataChanges:u.includeMetadataChanges};if(JS(e[l])){const R=e[l];e[l]=null===(t=R.next)||void 0===t?void 0:t.bind(R),e[l+1]=null===(r=R.error)||void 0===r?void 0:r.bind(R),e[l+2]=null===(o=R.complete)||void 0===o?void 0:o.bind(R)}let v,b,A;if(n instanceof Gn)b=Xt(n.firestore,Xn),A=vl(n._key.path),v={next:R=>{e[l]&&e[l](sA(b,n,R))},error:e[l+1],complete:e[l+2]};else{const R=Xt(n,Xi);b=Xt(R.firestore,Xn),A=R._query;const U=new fp(b);v={next:Y=>{e[l]&&e[l](new vh(b,U,R,Y))},error:e[l+1],complete:e[l+2]},Fx(n._query)}return function(R,U,Y,te){const Se=new yD(te),xe=new yS(U,Se,Y);return R.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return hS(yield Mm(R),xe)})),()=>{Se.Tc(),R.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return pS(yield Mm(R),xe)}))}}(Vr(b),A,m,v)}function Rm(n,e){return function(t,r){const o=new Lr;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function UR(n,e,t){return ES.apply(this,arguments)}(yield KS(t),r,o)})),o.promise}(Vr(n),e)}function sA(n,e,t){const r=t.docs.get(e._key),o=new fp(n);return new Sl(n,o,e._key,r,new hp(t.hasPendingWrites,t.fromCache),e.converter)}class nk extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=lp(e)}get(e){const t=Ih(e,this._firestore),r=new qP(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return nt();const u=o[0];if(u.isFoundDocument())return new l0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new l0(this._firestore,r,t._key,null,t.converter);throw nt()})}set(e,t,r){const o=Ih(e,this._firestore),u=AD(o.converter,t,r),l=bD(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,l),this}update(e,t,r,...o){const u=Ih(e,this._firestore);let l;return l="string"==typeof(t=(0,lt.m9)(t))||t instanceof Cl?tA(this._dataReader,"Transaction.update",u._key,t,r,o):eA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=Ih(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ih(e,this._firestore),r=new fp(this._firestore);return super.get(e).then(o=>new Sl(this._firestore,r,t._key,o._document,new hp(!1,!1),t.converter))}}function oA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Yx(){if(typeof Uint8Array>"u")throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function Qx(){if(!function qA(){return typeof atob<"u"}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){oc=po.SDK_VERSION,(0,po._registerComponent)(new vd.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new Xn(o,new Qd(t.getProvider("auth-internal")),new GA(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,po.registerVersion)(vv,"3.4.14",n),(0,po.registerVersion)(vv,"3.4.14","esm2017")}();class f0{constructor(e){this._delegate=e}static fromBase64String(e){return Qx(),new f0(yc.fromBase64String(e))}static fromUint8Array(e){return Yx(),new f0(yc.fromUint8Array(e))}toBase64(){return Qx(),this._delegate.toBase64()}toUint8Array(){return Yx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function aA(n){return function dk(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class hk{enableIndexedDbPersistence(e,t){return function _P(n,e){Ax(n=Xt(n,Xn));const t=Vr(n),r=n._freezeSettings(),o=new HS;return Sx(t,o,new cx(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function vP(n){Ax(n=Xt(n,Xn));const e=Vr(n),t=n._freezeSettings(),r=new HS;return Sx(e,r,new eP(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function wP(n){if(n._initialized&&!n._terminated)throw new Re(le.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Lr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!Gs.V())return Promise.resolve();const o=r+"main";yield Gs.delete(o)}),function(r){return t.apply(this,arguments)})(FC(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Jx{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof lc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&su("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function fP(n,e,t,r={}){var o;const u=(n=Xt(n,u0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&su("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,m;if("string"==typeof r.mockUserToken)l=r.mockUserToken,m=yr.MOCK_USER;else{l=(0,lt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Re(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new yr(v)}n._authCredentials=new Mi(new Iv(l,m))}}(this._delegate,e,t,r)}enableNetwork(){return function EP(n){return function sP(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield fx(n),t=yield px(n);return e.setNetworkEnabled(!0),function(r){const o=We(r);return o.lu.delete(0),o0(o)}(t)}))}(Vr(n=Xt(n,Xn)))}(this._delegate)}disableNetwork(){return function DP(n){return function oP(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield fx(n),t=yield px(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(o){const u=We(o);u.lu.add(0),yield Dm(u),u._u.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Vr(n=Xt(n,Xn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,_x("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function IP(n){return function(e){const t=new Lr;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function $R(n,e){return SS.apply(this,arguments)}(yield KS(e),t)})),t.promise}(Vr(n=Xt(n,Xn)))}(this._delegate)}onSnapshotsInSync(e){return function tk(n,e){return function cP(n,e){const t=new yD(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield Mm(n),o=t,We(r).Tu.add(o),void o.next();var r,o})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield Mm(n),o=t,void We(r).Tu.delete(o);var r,o}))}}(Vr(n=Xt(n,Xn)),JS(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Pm(this,Dx(this._delegate,e))}catch(t){throw vs(t,"collection()","Firestore.collection()")}}doc(e){try{return new sa(this,ID(this._delegate,e))}catch(t){throw vs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ws(this,function pP(n,e){if(n=Xt(n,u0),QS("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(le.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Xi(n,null,(t=e,new ra(Ht.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw vs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function rk(n,e,t){n=Xt(n,Xn);const r=Object.assign(Object.assign({},zP),t);return function(o){if(o.maxAttempts<1)throw new Re(le.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function lP(n,e,t){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const o=yield(u=n,_D(u).then(l=>l.datastore));var u;new rP(n.asyncQueue,o,t,e,r).run()})),r.promise}(Vr(n),o=>e(new nk(n,o)),r)}(this._delegate,t=>e(new Xx(this,t)))}batch(){return Vr(this._delegate),new eM(new zx(this._delegate,e=>Rm(this._delegate,e)))}loadBundle(e){return function bP(n,e){const t=Vr(n=Xt(n,Xn)),r=new mP;return function dP(n,e,t,r){const o=function(u,l){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,v=function(v,b){if(v instanceof Uint8Array)return lx(v,b);if(v instanceof ArrayBuffer)return lx(new Uint8Array(v),b);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new tP(v,l);var v}(t,s0(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function XR(n,e,t){const r=We(n);var o;(o=(0,ye.Z)(function*(u,l,m){try{const v=yield l.getMetadata();if(yield function(U,Y){const te=We(U),Se=a(Y.createTime);return te.persistence.runTransaction("hasNewerBundle","readonly",xe=>te.Ds.getBundleMetadata(xe,Y.id)).then(xe=>!!xe&&xe.createTime.compareTo(Se)>=0)}(u.localStore,v))return yield l.close(),m._completeWith({taskState:"Success",documentsLoaded:(U=v).totalDocuments,bytesLoaded:U.totalBytes,totalDocuments:U.totalDocuments,totalBytes:U.totalBytes}),Promise.resolve(new Set);m._updateProgress(X1(v));const b=new PR(v,u.localStore,l.wt);let A=yield l.fc();for(;A;){const U=yield b.Nu(A);U&&m._updateProgress(U),A=yield l.fc()}const R=yield b.complete();return yield Tl(u,R.Ou,void 0),yield function(U,Y){const te=We(U);return te.persistence.runTransaction("Save bundle","readwrite",Se=>te.Ds.saveBundleMetadata(Se,Y))}(u.localStore,v),m._completeWith(R.progress),Promise.resolve(R.Mu)}catch(v){return su("SyncEngine",`Loading bundle failed with ${v}`),m._failWith(v),Promise.resolve(new Set)}var U}),function(u,l,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield KS(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function TP(n,e){return function hP(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const o=We(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Ds.getNamedQuery(u,r))}(yield vD(n),e)}))}(Vr(n=Xt(n,Xn)),e).then(t=>t?new Xi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ws(this,t):null)}}class xD extends iA{constructor(e){super(),this.firestore=e}convertBytes(e){return new f0(new yc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return sa.forKey(t,this.firestore,null)}}class Xx{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new xD(e)}get(e){const t=gp(e);return this._delegate.get(t).then(r=>new p0(this._firestore,new Sl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=gp(e);return r?(oA("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=gp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=gp(e);return this._delegate.delete(t),this}}class eM{constructor(e){this._delegate=e}set(e,t,r){const o=gp(e);return r?(oA("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=gp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=gp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class pp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new d0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new g0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=pp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new pp(e,new xD(e),t),o.set(t,u)),u}}pp.INSTANCES=new WeakMap;class sa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new xD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new sa(t,new Gn(t._delegate,r,new He(e)))}static forKey(e,t,r){return new sa(t,new Gn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Pm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Pm(this.firestore,Dx(this._delegate,e))}catch(t){throw vs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,lt.m9)(e))instanceof Gn&&bx(this._delegate,e)}set(e,t){t=oA("DocumentReference.set",t);try{return t?qx(this._delegate,e,t):qx(this._delegate,e)}catch(r){throw vs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Zx(this._delegate,e):Zx(this._delegate,e,t,...r)}catch(o){throw vs(o,"updateDoc()","DocumentReference.update()")}}delete(){return function XP(n){return Rm(Xt(n.firestore,Xn),[new El(n._key,Vn.none())])}(this._delegate)}onSnapshot(...e){const t=tM(e),r=nM(e,o=>new p0(this.firestore,new Sl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return Wx(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function WP(n){n=Xt(n,Gn);const e=Xt(n.firestore,Xn),t=Vr(e),r=new fp(e);return function aP(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(o,u,l){try{const m=yield function(v,b){const A=We(v);return A.persistence.runTransaction("read document","readonly",R=>A.localDocuments.getDocument(R,b))}(o,u);m.isFoundDocument()?l.resolve(m):m.isNoDocument()?l.resolve(null):l.reject(new Re(le.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const v=Cm(m,`Failed to get document '${u} from cache`);l.reject(v)}}),function(o,u,l){return r.apply(this,arguments)})(yield vD(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Sl(e,r,n._key,o,new hp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function KP(n){n=Xt(n,Gn);const e=Xt(n.firestore,Xn);return gx(Vr(e),n._key,{source:"server"}).then(t=>sA(e,n,t))}(this._delegate):function ZP(n){n=Xt(n,Gn);const e=Xt(n.firestore,Xn);return gx(Vr(e),n._key).then(t=>sA(e,n,t))}(this._delegate),t.then(r=>new p0(this.firestore,new Sl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new sa(this.firestore,this._delegate.withConverter(e?pp.getInstance(this.firestore,e):null))}}function vs(n,e,t){return n.message=n.message.replace(e,t),n}function tM(n){for(const e of n)if("object"==typeof e&&!aA(e))return e;return{}}function nM(n,e){var t,r;let o;return o=aA(n[0])?n[0]:aA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class p0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new sa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Lx(this._delegate,e._delegate)}}class g0 extends p0{data(e){const t=this._delegate.data(e);return function TE(n,e){n||nt()}(void 0!==t),t}}class ws{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new xD(e)}where(e,t,r){try{return new ws(this.firestore,wh(this._delegate,function LP(n,e,t){const r=e,o=SD("where",n);return new OP(o,r,t)}(e,t,r)))}catch(o){throw vs(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ws(this.firestore,wh(this._delegate,function UP(n,e="asc"){const t=e,r=SD("orderBy",n);return new FP(r,t)}(e,t)))}catch(r){throw vs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ws(this.firestore,wh(this._delegate,function VP(n){return Ix("limit",n),new Ux("limit",n,"F")}(e)))}catch(t){throw vs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ws(this.firestore,wh(this._delegate,function BP(n){return Ix("limitToLast",n),new Ux("limitToLast",n,"L")}(e)))}catch(t){throw vs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ws(this.firestore,wh(this._delegate,function jP(...n){return new Vx("startAt",n,!0)}(...e)))}catch(t){throw vs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ws(this.firestore,wh(this._delegate,function $P(...n){return new Vx("startAfter",n,!1)}(...e)))}catch(t){throw vs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ws(this.firestore,wh(this._delegate,function HP(...n){return new Bx("endBefore",n,!1)}(...e)))}catch(t){throw vs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ws(this.firestore,wh(this._delegate,function GP(...n){return new Bx("endAt",n,!0)}(...e)))}catch(t){throw vs(t,"endAt()","Query.endAt()")}}isEqual(e){return Tx(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function QP(n){n=Xt(n,Xi);const e=Xt(n.firestore,Xn),t=Vr(e),r=new fp(e);return function uP(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(o,u,l){try{const m=yield dD(o,u,!0),v=new nx(u,m.ji),b=v.Ku(m.documents),A=v.applyChanges(b,!1);l.resolve(A.snapshot)}catch(m){const v=Cm(m,`Failed to execute query '${u} against cache`);l.reject(v)}}),function(o,u,l){return r.apply(this,arguments)})(yield vD(n),e,t);var r})),t.promise}(t,n._query).then(o=>new vh(e,r,n,o))}(this._delegate):"server"===e?.source?function JP(n){n=Xt(n,Xi);const e=Xt(n.firestore,Xn),t=Vr(e),r=new fp(e);return mx(t,n._query,{source:"server"}).then(o=>new vh(e,r,n,o))}(this._delegate):function YP(n){n=Xt(n,Xi);const e=Xt(n.firestore,Xn),t=Vr(e),r=new fp(e);return Fx(n._query),mx(t,n._query).then(o=>new vh(e,r,n,o))}(this._delegate),t.then(r=>new uA(this.firestore,new vh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=tM(e),r=nM(e,o=>new uA(this.firestore,new vh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return Wx(this._delegate,t,r)}withConverter(e){return new ws(this.firestore,this._delegate.withConverter(e?pp.getInstance(this.firestore,e):null))}}class pk{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new g0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class uA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ws(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new g0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new pk(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new g0(this._firestore,r))})}isEqual(e){return Lx(this._delegate,e._delegate)}}class Pm extends ws{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new sa(this.firestore,e):null}doc(e){try{return new sa(this.firestore,void 0===e?ID(this._delegate):ID(this._delegate,e))}catch(t){throw vs(t,"doc()","CollectionReference.doc()")}}add(e){return function ek(n,e){const t=Xt(n.firestore,Xn),r=ID(n),o=AD(n.converter,e);return Rm(t,[bD(lp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Vn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new sa(this.firestore,t))}isEqual(e){return bx(this._delegate,e._delegate)}withConverter(e){return new Pm(this.firestore,this._delegate.withConverter(e?pp.getInstance(this.firestore,e):null))}}function gp(n){return Xt(n,Gn)}class cA{constructor(...e){this._delegate=new Cl(...e)}static documentId(){return new cA(Un.keyField().canonicalString())}isEqual(e){return(e=(0,lt.m9)(e))instanceof Cl&&this._delegate._internalPath.isEqual(e._internalPath)}}class mp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function sk(){return new XS("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new mp(e)}static delete(){const e=function ik(){return new c0("deleteField")}();return e._methodName="FieldValue.delete",new mp(e)}static arrayUnion(...e){const t=function ok(...n){return new xP("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new mp(t)}static arrayRemove(...e){const t=function ak(...n){return new MP("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new mp(t)}static increment(e){const t=function uk(n){return new RP("increment",n)}(e);return t._methodName="FieldValue.increment",new mp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const gk={Firestore:Jx,GeoPoint:ED,Timestamp:bn,Blob:f0,Transaction:Xx,WriteBatch:eM,DocumentReference:sa,DocumentSnapshot:p0,Query:ws,QueryDocumentSnapshot:g0,QuerySnapshot:uA,CollectionReference:Pm,FieldPath:cA,FieldValue:mp,setLogLevel:function fk(n){!function qT(n){ac.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function rM(n,e){return function _k(n,e=Sw.z){return new ti.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function lA(n,e){return rM(n,e).pipe((0,pt.U)(t=>({payload:t,type:"query"})))}function MD(n,e){return lA(n,e).pipe(kc(void 0),wg(),(0,pt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,m)=>{const v=o.find(A=>A.doc.ref.isEqual(l.ref)),b=t?.payload.docs.find(A=>A.ref.isEqual(l.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(l.metadata)||!v&&b&&JSON.stringify(b.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:l}})}),u}))}function iM(n,e,t){return MD(n,t).pipe(pr((r,o)=>function wk(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Ik(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return dA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return dA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return dA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function EI(n,e=wi.y){return n=n??ea,(0,kn.e)((t,r)=>{let o,u=!0;t.subscribe((0,Pn.x)(r,l=>{const m=e(l);(u||!n(o,m))&&(u=!1,o=m,r.next(l))}))})}(),(0,pt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function dA(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function sM(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function yk(n){(function mk(n,e){n.INTERNAL.registerComponent(new vd.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},gk)))})(n,(e,t)=>new Jx(e,t,new hk)),n.registerVersion("@firebase/firestore-compat","0.1.23")}(Yy.Z);class oM{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=MD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,pt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(kc(void 0),wg(),ji(([r,o])=>o.length>0||!r),(0,pt.U)(([r,o])=>o),_n.iC)}auditTrail(e){return this.stateChanges(e).pipe(pr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=sM(e);return iM(this.query,t,this.afs.schedulers.outsideAngular).pipe(_n.iC)}valueChanges(e={}){return lA(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),_n.iC)}get(e){return(0,qt.D)(this.query.get(e)).pipe(_n.iC)}add(e){return this.ref.add(e)}doc(e){return new aM(this.ref.doc(e),this.afs)}}class aM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=lM(r,t);return new oM(o,u,this.afs)}snapshotChanges(){return function vk(n,e){return rM(n,e).pipe(kc(void 0),wg(),(0,pt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(_n.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,pt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,qt.D)(this.ref.get(e)).pipe(_n.iC)}}class Ek{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?MD(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ji(t=>t.length>0),_n.iC):MD(this.query,this.afs.schedulers.outsideAngular).pipe(_n.iC)}auditTrail(e){return this.stateChanges(e).pipe(pr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=sM(e);return iM(this.query,t,this.afs.schedulers.outsideAngular).pipe(_n.iC)}valueChanges(e={}){return lA(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),_n.iC)}get(e){return(0,qt.D)(this.query.get(e)).pipe(_n.iC)}}const uM=new g.OlP("angularfire2.enableFirestorePersistence"),cM=new g.OlP("angularfire2.firestore.persistenceSettings"),Dk=new g.OlP("angularfire2.firestore.settings"),bk=new g.OlP("angularfire2.firestore.use-emulator");function lM(n,e=(t=>t)){return{query:e(n),ref:n}}let Tk=(()=>{class n{constructor(t,r,o,u,l,m,v,b,A,R,U,Y,te,Se,xe,gt,wt){this.schedulers=v;const mt=(0,oi.on)(t,m,r),it=A;R&&nl(mt,m,U,te,Se,xe,Y,gt),[this.firestore,this.persistenceEnabled$]=(0,oi.cc)(`${mt.name}.firestore`,"AngularFirestore",mt.name,()=>{const bt=m.runOutsideAngular(()=>mt.firestore());if(u&&bt.settings(u),it&&bt.useEmulator(...it),o&&!$r(l)){const Ut=()=>{try{return(0,qt.D)(bt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(or){return typeof console<"u"&&console.warn(or),$e(!1)}};return[bt,m.runOutsideAngular(Ut)]}return[bt,$e(!1)]},[u,it,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=lM(o,r),m=this.schedulers.ngZone.run(()=>u);return new oM(m,l,this)}collectionGroup(t,r){const o=r||(l=>l),u=this.firestore.collectionGroup(t);return new Ek(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new aM(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(oi.Dh),g.LFG(oi.xv,8),g.LFG(uM,8),g.LFG(Dk,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(_n.HU),g.LFG(cM,8),g.LFG(bk,8),g.LFG(Dd,8),g.LFG(Ky,8),g.LFG(Tw,8),g.LFG(Cw,8),g.LFG(hf,8),g.LFG(tl,8),g.LFG(ng,8),g.LFG(Zy,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Ck=(()=>{class n{constructor(){df.Z.registerVersion("angularfire",_n.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:uM,useValue:!0},{provide:cM,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[Tk]}),n})(),Sk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[Wc]}),n.\u0275inj=g.cJS({imports:[oi.hO.initializeApp(xc_firebase),ff,Ck,BA,gn,vy]}),n})();(0,g.G48)(),Ch().bootstrapModule(Sk).catch(n=>console.error(n))},5867:(st,Te,O)=>{O.d(Te,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=O(9681);(0,g.registerVersion)("firebase","9.9.2","app")},127:(st,Te,O)=>{O.d(Te,{Z:()=>g.Z});var g=O(3942);g.Z.registerVersion("firebase","9.9.2","app-compat")},1451:(st,Te,O)=>{O.r(Te);var g=O(5861),X=O(3942),k=O(2090),ae=O(9681),ie=O(655),de=O(1877),ce=O(4859);const ve=function Fe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Je=function Ae(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},me=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ye=new de.Yd("@firebase/auth");function rt(y,...h){Ye.logLevel<=de.in.ERROR&&Ye.error(`Auth (${ae.SDK_VERSION}): ${y}`,...h)}function Ce(y,...h){throw je(y,...h)}function _e(y,...h){return je(y,...h)}function Ie(y,h,p){const w=Object.assign(Object.assign({},Je()),{[h]:p});return new k.LL("auth","Firebase",w).create(h,{appName:y.name})}function Ve(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&Ce(y,"argument-error"),Ie(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(y,...h){if("string"!=typeof y){const p=h[0],w=[...h.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(p,...w)}return me.create(y,...h)}function V(y,h,...p){if(!y)throw je(h,...p)}function ge(y){const h="INTERNAL ASSERTION FAILED: "+y;throw rt(h),new Error(h)}function W(y,h){y||ge(h)}const J=new Map;function se(y){W(y instanceof Function,"Expected a class definition");let h=J.get(y);return h?(W(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,J.set(y,h),h)}function ke(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ut(){return"http:"===zt()||"https:"===zt()}function zt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class tn{constructor(h,p){this.shortDelay=h,this.longDelay=p,W(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return function $t(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ut()||(0,k.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Cn(y,h){W(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class Wt{static initialize(h,p,w){this.fetchImpl=h,p&&(this.headersImpl=p),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ge("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ge("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ge("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Kt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},br=new tn(3e4,6e4);function Nt(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function nn(y,h,p,w){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,g.Z)(function*(y,h,p,w,S={}){return Yr(y,S,(0,g.Z)(function*(){let P={},q={};w&&("GET"===h?q=w:P={body:JSON.stringify(w)});const ue=(0,k.xO)(Object.assign({key:y.config.apiKey},q)).slice(1),Le=yield y._getAdditionalHeaders();return Le["Content-Type"]="application/json",y.languageCode&&(Le["X-Firebase-Locale"]=y.languageCode),Wt.fetch()(es(y,y.config.apiHost,p,ue),Object.assign({method:h,headers:Le,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function Yr(y,h,p){return vr.apply(this,arguments)}function vr(){return(vr=(0,g.Z)(function*(y,h,p){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},Kt),h);try{const S=new Qr(y),P=yield Promise.race([p(),S.promise]);S.clearNetworkTimeout();const q=yield P.json();if("needConfirmation"in q)throw Ni(y,"account-exists-with-different-credential",q);if(P.ok&&!("errorMessage"in q))return q;{const ue=P.ok?q.errorMessage:q.error.message,[Le,Qe]=ue.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw Ni(y,"credential-already-in-use",q);if("EMAIL_EXISTS"===Le)throw Ni(y,"email-already-in-use",q);if("USER_DISABLED"===Le)throw Ni(y,"user-disabled",q);const yt=w[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if(Qe)throw Ie(y,yt,Qe);Ce(y,yt)}}catch(S){if(S instanceof k.ZR)throw S;Ce(y,"network-request-failed")}})).apply(this,arguments)}function Tr(y,h,p,w){return ki.apply(this,arguments)}function ki(){return(ki=(0,g.Z)(function*(y,h,p,w,S={}){const P=yield nn(y,h,p,w,S);return"mfaPendingCredential"in P&&Ce(y,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function es(y,h,p,w){const S=`${h}${p}?${w}`;return y.config.emulator?Cn(y.config,S):`${y.config.apiScheme}://${S}`}class Qr{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,w)=>{this.timer=setTimeout(()=>w(_e(this.auth,"network-request-failed")),br.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ni(y,h,p){const w={appName:y.name};p.email&&(w.email=p.email),p.phoneNumber&&(w.phoneNumber=p.phoneNumber);const S=_e(y,h,w);return S.customData._tokenResponse=p,S}function on(){return(on=(0,g.Z)(function*(y,h){return nn(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function mi(y,h){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,g.Z)(function*(y,h){return nn(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Oi(y,h){return ts.apply(this,arguments)}function ts(){return(ts=(0,g.Z)(function*(y,h){return nn(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function An(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function an(){return(an=(0,g.Z)(function*(y,h=!1){const p=(0,k.m9)(y),w=yield p.getIdToken(h),S=Ke(w);V(S&&S.exp&&S.auth_time&&S.iat,p.auth,"internal-error");const P="object"==typeof S.firebase?S.firebase:void 0,q=P?.sign_in_provider;return{claims:S,token:w,authTime:An(tt(S.auth_time)),issuedAtTime:An(tt(S.iat)),expirationTime:An(tt(S.exp)),signInProvider:q||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function tt(y){return 1e3*Number(y)}function Ke(y){var h;const[p,w,S]=y.split(".");if(void 0===p||void 0===w||void 0===S)return rt("JWT malformed, contained fewer than 3 sections"),null;try{const P=(0,k.tV)(w);return P?JSON.parse(P):(rt("Failed to decode base64 JWT payload"),null)}catch(P){return rt("Caught error parsing JWT payload as JSON",null===(h=P)||void 0===h?void 0:h.toString()),null}}function er(y,h){return cn.apply(this,arguments)}function cn(){return(cn=(0,g.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(w){throw w instanceof k.ZR&&Ot(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function Ot({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Bn{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const S=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const w=this.getInterval(h);this.timerId=setTimeout((0,g.Z)(function*(){yield p.iteration()}),w)}iteration(){var h=this;return(0,g.Z)(function*(){var p;try{yield h.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===(null===(p=w)||void 0===p?void 0:p.code)&&h.schedule(!0))}h.schedule()})()}}class Is{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=An(this.lastLoginAt),this.creationTime=An(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Yt(y){return Li.apply(this,arguments)}function Li(){return(Li=(0,g.Z)(function*(y){var h;const p=y.auth,w=yield y.getIdToken(),S=yield er(y,Oi(p,{idToken:w}));V(S?.users.length,p,"internal-error");const P=S.users[0];y._notifyReloadListener(P);const q=null!==(h=P.providerUserInfo)&&void 0!==h&&h.length?F(P.providerUserInfo):[],ue=$(y.providerData,q),yt=!!y.isAnonymous&&!(y.email&&P.passwordHash||ue?.length),dt={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:ue,metadata:new Is(P.createdAt,P.lastLoginAt),isAnonymous:yt};Object.assign(y,dt)})).apply(this,arguments)}function Z(){return(Z=(0,g.Z)(function*(y){const h=(0,k.m9)(y);yield Yt(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function $(y,h){return[...y.filter(w=>!h.some(S=>S.providerId===w.providerId)),...h]}function F(y){return y.map(h=>{var{providerId:p}=h,w=(0,ie._T)(h,["providerId"]);return{providerId:p,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function z(){return(z=(0,g.Z)(function*(y,h){const p=yield Yr(y,{},(0,g.Z)(function*(){const w=(0,k.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:S,apiKey:P}=y.config,q=es(y,S,"/v1/token",`key=${P}`),ue=yield y._getAdditionalHeaders();return ue["Content-Type"]="application/x-www-form-urlencoded",Wt.fetch()(q,{method:"POST",headers:ue,body:w})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class be{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){V(h.idToken,"internal-error"),V(typeof h.idToken<"u","internal-error"),V(typeof h.refreshToken<"u","internal-error");const p="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function Do(y){const h=Ke(y);return V(h,"internal-error"),V(typeof h.exp<"u","internal-error"),V(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var w=this;return(0,g.Z)(function*(){return V(!w.accessToken||w.refreshToken,h,"user-token-expired"),p||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(h,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var w=this;return(0,g.Z)(function*(){const{accessToken:S,refreshToken:P,expiresIn:q}=yield function H(y,h){return z.apply(this,arguments)}(h,p);w.updateTokensAndExpiration(S,P,Number(q))})()}updateTokensAndExpiration(h,p,w){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(h,p){const{refreshToken:w,accessToken:S,expirationTime:P}=p,q=new be;return w&&(V("string"==typeof w,"internal-error",{appName:h}),q.refreshToken=w),S&&(V("string"==typeof S,"internal-error",{appName:h}),q.accessToken=S),P&&(V("number"==typeof P,"internal-error",{appName:h}),q.expirationTime=P),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new be,this.toJSON())}_performRefresh(){return ge("not implemented")}}function Ue(y,h){V("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class ot{constructor(h){var{uid:p,auth:w,stsTokenManager:S}=h,P=(0,ie._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Bn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=w,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new Is(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,g.Z)(function*(){const w=yield er(p,p.stsTokenManager.getToken(p.auth,h));return V(w,p.auth,"internal-error"),p.accessToken!==w&&(p.accessToken=w,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),w})()}getIdTokenResult(h){return function Zs(y){return an.apply(this,arguments)}(this,h)}reload(){return function Vt(y){return Z.apply(this,arguments)}(this)}_assign(h){this!==h&&(V(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new ot(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var w=this;return(0,g.Z)(function*(){let S=!1;h.idToken&&h.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(h),S=!0),p&&(yield Yt(w)),yield w.auth._persistUserIfCurrent(w),S&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var h=this;return(0,g.Z)(function*(){const p=yield h.getIdToken();return yield er(h,function ht(y,h){return on.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var w,S,P,q,ue,Le,Qe,yt;const dt=null!==(w=p.displayName)&&void 0!==w?w:void 0,Fn=null!==(S=p.email)&&void 0!==S?S:void 0,Zi=null!==(P=p.phoneNumber)&&void 0!==P?P:void 0,$u=null!==(q=p.photoURL)&&void 0!==q?q:void 0,Hu=null!==(ue=p.tenantId)&&void 0!==ue?ue:void 0,Qo=null!==(Le=p._redirectEventId)&&void 0!==Le?Le:void 0,nf=null!==(Qe=p.createdAt)&&void 0!==Qe?Qe:void 0,Gu=null!==(yt=p.lastLoginAt)&&void 0!==yt?yt:void 0,{uid:zu,emailVerified:ny,isAnonymous:ry,providerData:zc,stsTokenManager:iy}=p;V(zu&&iy,h,"internal-error");const T0=be.fromJSON(this.name,iy);V("string"==typeof zu,h,"internal-error"),Ue(dt,h.name),Ue(Fn,h.name),V("boolean"==typeof ny,h,"internal-error"),V("boolean"==typeof ry,h,"internal-error"),Ue(Zi,h.name),Ue($u,h.name),Ue(Hu,h.name),Ue(Qo,h.name),Ue(nf,h.name),Ue(Gu,h.name);const qc=new ot({uid:zu,auth:h,email:Fn,emailVerified:ny,displayName:dt,isAnonymous:ry,photoURL:$u,phoneNumber:Zi,tenantId:Hu,stsTokenManager:T0,createdAt:nf,lastLoginAt:Gu});return zc&&Array.isArray(zc)&&(qc.providerData=zc.map(C0=>Object.assign({},C0))),Qo&&(qc._redirectEventId=Qo),qc}static _fromIdTokenResponse(h,p,w=!1){return(0,g.Z)(function*(){const S=new be;S.updateFromServerResponse(p);const P=new ot({uid:p.localId,auth:h,stsTokenManager:S,isAnonymous:w});return yield Yt(P),P})()}}const Qt=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(p,w){var S=this;return(0,g.Z)(function*(){S.storage[p]=w})()}_get(p){var w=this;return(0,g.Z)(function*(){const S=w.storage[p];return void 0===S?null:S})()}_remove(p){var w=this;return(0,g.Z)(function*(){delete w.storage[p]})()}_addListener(p,w){}_removeListener(p,w){}}return y.type="NONE",y})();function zn(y,h,p){return`firebase:${y}:${h}:${p}`}class Xe{constructor(h,p,w){this.persistence=h,this.auth=p,this.userKey=w;const{config:S,name:P}=this.auth;this.fullUserKey=zn(this.userKey,S.apiKey,P),this.fullPersistenceKey=zn("persistence",S.apiKey,P),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,g.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?ot._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,g.Z)(function*(){if(p.persistence===h)return;const w=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,w?p.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,w="authUser"){return(0,g.Z)(function*(){if(!p.length)return new Xe(se(Qt),h,w);const S=(yield Promise.all(p.map(function(){var Qe=(0,g.Z)(function*(yt){if(yield yt._isAvailable())return yt});return function(yt){return Qe.apply(this,arguments)}}()))).filter(Qe=>Qe);let P=S[0]||se(Qt);const q=zn(w,h.config.apiKey,h.name);let ue=null;for(const Qe of p)try{const yt=yield Qe._get(q);if(yt){const dt=ot._fromJSON(h,yt);Qe!==P&&(ue=dt),P=Qe;break}}catch{}const Le=S.filter(Qe=>Qe._shouldAllowMigration);return P._shouldAllowMigration&&Le.length?(P=Le[0],ue&&(yield P._set(q,ue.toJSON())),yield Promise.all(p.map(function(){var Qe=(0,g.Z)(function*(yt){if(yt!==P)try{yield yt._remove(q)}catch{}});return function(yt){return Qe.apply(this,arguments)}}())),new Xe(P,h,w)):new Xe(P,h,w)})()}}function sn(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(qe(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(ln(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(en(h))return"Blackberry";if(xn(h))return"Webos";if(tr(h))return"Safari";if((h.includes("chrome/")||ar(h))&&!h.includes("edge/"))return"Chrome";if(_t(h))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function ln(y=(0,k.z$)()){return/firefox\//i.test(y)}function tr(y=(0,k.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function ar(y=(0,k.z$)()){return/crios\//i.test(y)}function qe(y=(0,k.z$)()){return/iemobile/i.test(y)}function _t(y=(0,k.z$)()){return/android/i.test(y)}function en(y=(0,k.z$)()){return/blackberry/i.test(y)}function xn(y=(0,k.z$)()){return/webos/i.test(y)}function Jr(y=(0,k.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function oa(y=(0,k.z$)()){return Jr(y)||_t(y)||xn(y)||en(y)||/windows phone/i.test(y)||qe(y)}function At(y,h=[]){let p;switch(y){case"Browser":p=sn((0,k.z$)());break;case"Worker":p=`${sn((0,k.z$)())}-${y}`;break;default:p=y}const w=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${ae.SDK_VERSION}/${w}`}class aa{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const w=P=>new Promise((q,ue)=>{try{q(h(P))}catch(Le){ue(Le)}});w.onAbort=p,this.queue.push(w);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,g.Z)(function*(){var w;if(p.auth.currentUser===h)return;const S=[];try{for(const P of p.queue)yield P(h),P.onAbort&&S.push(P.onAbort)}catch(P){S.reverse();for(const q of S)try{q()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:null===(w=P)||void 0===w?void 0:w.message})}})()}}class bo{constructor(h,p,w){this.app=h,this.heartbeatServiceProvider=p,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ds(this),this.idTokenSubscription=new Ds(this),this.beforeStateQueue=new aa(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=me,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(h,p){var w=this;return p&&(this._popupRedirectResolver=se(p)),this._initializationPromise=this.queue((0,g.Z)(function*(){var S,P;if(!w._deleted&&(w.persistenceManager=yield Xe.create(w,h),!w._deleted)){if(null!==(S=w._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(p),w.lastNotifiedUid=(null===(P=w.currentUser)||void 0===P?void 0:P.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,g.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,g.Z)(function*(){var w;const S=yield p.assertedPersistence.getCurrentUser();let P=S,q=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const ue=null===(w=p.redirectUser)||void 0===w?void 0:w._redirectEventId,Le=P?._redirectEventId,Qe=yield p.tryRedirectSignIn(h);(!ue||ue===Le)&&Qe?.user&&(P=Qe.user,q=!0)}if(!P)return p.directlySetCurrentUser(null);if(!P._redirectEventId){if(q)try{yield p.beforeStateQueue.runMiddleware(P)}catch(ue){P=S,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(ue))}return P?p.reloadAndSetCurrentUserOrClear(P):p.directlySetCurrentUser(null)}return V(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===P._redirectEventId?p.directlySetCurrentUser(P):p.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(h){var p=this;return(0,g.Z)(function*(){let w=null;try{w=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch{yield p._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,g.Z)(function*(){var w;try{yield Yt(h)}catch(S){if("auth/network-request-failed"!==(null===(w=S)||void 0===w?void 0:w.code))return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function ze(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,g.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,g.Z)(function*(){const w=h?(0,k.m9)(h):null;return w&&V(w.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(w&&w._clone(p))})()}_updateCurrentUser(h,p=!1){var w=this;return(0,g.Z)(function*(){if(!w._deleted)return h&&V(w.tenantId===h.tenantId,w,"tenant-id-mismatch"),p||(yield w.beforeStateQueue.runMiddleware(h)),w.queue((0,g.Z)(function*(){yield w.directlySetCurrentUser(h),w.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,g.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,g.Z)(function*(){yield p.assertedPersistence.setPersistence(se(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new k.LL("auth","Firebase",h())}onAuthStateChanged(h,p,w){return this.registerStateListener(this.authStateSubscription,h,p,w)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,w){return this.registerStateListener(this.idTokenSubscription,h,p,w)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var w=this;return(0,g.Z)(function*(){const S=yield w.getOrInitRedirectPersistenceManager(p);return null===h?S.removeCurrentUser():S.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,g.Z)(function*(){if(!p.redirectPersistenceManager){const w=h&&se(h)||p._popupRedirectResolver;V(w,p,"argument-error"),p.redirectPersistenceManager=yield Xe.create(p,[se(w._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,g.Z)(function*(){var w,S;return p._isInitialized&&(yield p.queue((0,g.Z)(function*(){}))),(null===(w=p._currentUser)||void 0===w?void 0:w._redirectEventId)===h?p._currentUser:(null===(S=p.redirectUser)||void 0===S?void 0:S._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,g.Z)(function*(){if(h===p.currentUser)return p.queue((0,g.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,w,S){if(this._deleted)return()=>{};const P="function"==typeof p?p:p.next.bind(p),q=this._isInitialized?Promise.resolve():this._initializationPromise;return V(q,this,"internal-error"),q.then(()=>P(this.currentUser)),"function"==typeof p?h.addObserver(p,w,S):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,g.Z)(function*(){p.currentUser&&p.currentUser!==h&&(p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh()),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=At(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,g.Z)(function*(){var p;const w={"X-Client-Version":h.clientVersion};h.app.options.appId&&(w["X-Firebase-gmpid"]=h.app.options.appId);const S=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return S&&(w["X-Firebase-Client"]=S),w})()}}function pn(y){return(0,k.m9)(y)}class Ds{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,k.ne)(p=>this.observer=p)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function bs(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Cr(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class Ws{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return ge("not implemented")}_getIdTokenResponse(h){return ge("not implemented")}_linkToIdToken(h,p){return ge("not implemented")}_getReauthenticationResolver(h){return ge("not implemented")}}function Lt(y,h){return _c.apply(this,arguments)}function _c(){return(_c=(0,g.Z)(function*(y,h){return nn(y,"POST","/v1/accounts:resetPassword",Nt(y,h))})).apply(this,arguments)}function Al(y,h){return To.apply(this,arguments)}function To(){return(To=(0,g.Z)(function*(y,h){return nn(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ua(y,h){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,g.Z)(function*(y,h){return nn(y,"POST","/v1/accounts:update",Nt(y,h))})).apply(this,arguments)}function Ss(){return(Ss=(0,g.Z)(function*(y,h){return Tr(y,"POST","/v1/accounts:signInWithPassword",Nt(y,h))})).apply(this,arguments)}function Mn(y,h){return ca.apply(this,arguments)}function ca(){return(ca=(0,g.Z)(function*(y,h){return nn(y,"POST","/v1/accounts:sendOobCode",Nt(y,h))})).apply(this,arguments)}function Sr(y,h){return Br.apply(this,arguments)}function Br(){return(Br=(0,g.Z)(function*(y,h){return Mn(y,h)})).apply(this,arguments)}function So(y,h){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,g.Z)(function*(y,h){return Mn(y,h)})).apply(this,arguments)}function Ao(y,h){return jr.apply(this,arguments)}function jr(){return(jr=(0,g.Z)(function*(y,h){return Mn(y,h)})).apply(this,arguments)}function Eh(y,h){return pu.apply(this,arguments)}function pu(){return(pu=(0,g.Z)(function*(y,h){return Mn(y,h)})).apply(this,arguments)}function vc(){return(vc=(0,g.Z)(function*(y,h){return Tr(y,"POST","/v1/accounts:signInWithEmailLink",Nt(y,h))})).apply(this,arguments)}function xl(){return(xl=(0,g.Z)(function*(y,h){return Tr(y,"POST","/v1/accounts:signInWithEmailLink",Nt(y,h))})).apply(this,arguments)}class wc extends Ws{constructor(h,p,w,S=null){super("password",w),this._email=h,this._password=p,this._tenantId=S}static _fromEmailAndPassword(h,p){return new wc(h,p,"password")}static _fromEmailAndCode(h,p,w=null){return new wc(h,p,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,g.Z)(function*(){switch(p.signInMethod){case"password":return function Co(y,h){return Ss.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function Dh(y,h){return vc.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:Ce(h,"internal-error")}})()}_linkToIdToken(h,p){var w=this;return(0,g.Z)(function*(){switch(w.signInMethod){case"password":return Al(h,{idToken:p,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function yp(y,h){return xl.apply(this,arguments)}(h,{idToken:p,email:w._email,oobCode:w._password});default:Ce(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function qn(y,h){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,g.Z)(function*(y,h){return Tr(y,"POST","/v1/accounts:signInWithIdp",Nt(y,h))})).apply(this,arguments)}class rs extends Ws{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new rs(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):Ce("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:w,signInMethod:S}=p,P=(0,ie._T)(p,["providerId","signInMethod"]);if(!w||!S)return null;const q=new rs(w,S);return q.idToken=P.idToken||void 0,q.accessToken=P.accessToken||void 0,q.secret=P.secret,q.nonce=P.nonce,q.pendingToken=P.pendingToken||null,q}_getIdTokenResponse(h){return qn(h,this.buildRequest())}_linkToIdToken(h,p){const w=this.buildRequest();return w.idToken=p,qn(h,w)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,qn(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,k.xO)(p)}return h}}function vp(y,h){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,g.Z)(function*(y,h){return nn(y,"POST","/v1/accounts:sendVerificationCode",Nt(y,h))})).apply(this,arguments)}function As(){return(As=(0,g.Z)(function*(y,h){return Tr(y,"POST","/v1/accounts:signInWithPhoneNumber",Nt(y,h))})).apply(this,arguments)}function Pl(){return(Pl=(0,g.Z)(function*(y,h){const p=yield Tr(y,"POST","/v1/accounts:signInWithPhoneNumber",Nt(y,h));if(p.temporaryProof)throw Ni(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Ip={USER_NOT_FOUND:"user-not-found"};function la(){return(la=(0,g.Z)(function*(y,h){return Tr(y,"POST","/v1/accounts:signInWithPhoneNumber",Nt(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Ip)})).apply(this,arguments)}class xo extends Ws{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new xo({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new xo({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function Ic(y,h){return As.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function wp(y,h){return Pl.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function kl(y,h){return la.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:w,verificationCode:S}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:w,code:S}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:w,phoneNumber:S,temporaryProof:P}=h;return w||p||S||P?new xo({verificationId:p,verificationCode:w,phoneNumber:S,temporaryProof:P}):null}}class _i{constructor(h){var p,w,S,P,q,ue;const Le=(0,k.zd)((0,k.pd)(h)),Qe=null!==(p=Le.apiKey)&&void 0!==p?p:null,yt=null!==(w=Le.oobCode)&&void 0!==w?w:null,dt=function km(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Le.mode)&&void 0!==S?S:null);V(Qe&&yt&&dt,"argument-error"),this.apiKey=Qe,this.operation=dt,this.code=yt,this.continueUrl=null!==(P=Le.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(q=Le.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(ue=Le.tenantId)&&void 0!==ue?ue:null}static parseLink(h){const p=function Nl(y){const h=(0,k.zd)((0,k.pd)(y)).link,p=h?(0,k.zd)((0,k.pd)(h)).deep_link_id:null,w=(0,k.zd)((0,k.pd)(y)).deep_link_id;return(w?(0,k.zd)((0,k.pd)(w)).link:null)||w||p||h||y}(h);try{return new _i(p)}catch{return null}}}let Mo=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,w){return wc._fromEmailAndPassword(p,w)}static credentialWithLink(p,w){const S=_i.parseLink(w);return V(S,"argument-error"),wc._fromEmailAndCode(p,S.code,S.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Fi{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Ys extends Fi{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Ro extends Ys{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return V("providerId"in p&&"signInMethod"in p,"argument-error"),rs._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return V(h.idToken||h.accessToken,"argument-error"),rs._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Ro.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Ro.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:w,oauthTokenSecret:S,pendingToken:P,nonce:q,providerId:ue}=h;if(!w&&!S&&!p&&!P||!ue)return null;try{return new Ro(ue)._credential({idToken:p,accessToken:w,nonce:q,pendingToken:P})}catch{return null}}}let Po=(()=>{class y extends Ys{constructor(){super("facebook.com")}static credential(p){return rs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),da=(()=>{class y extends Ys{constructor(){super("google.com"),this.addScope("profile")}static credential(p,w){return rs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:w})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:w,oauthAccessToken:S}=p;if(!w&&!S)return null;try{return y.credential(w,S)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Ll=(()=>{class y extends Ys{constructor(){super("github.com")}static credential(p){return rs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class ha extends Ws{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return qn(h,this.buildRequest())}_linkToIdToken(h,p){const w=this.buildRequest();return w.idToken=p,qn(h,w)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,qn(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:w,signInMethod:S,pendingToken:P}=p;return w&&S&&P&&w===S?new ha(w,P):null}static _create(h,p){return new ha(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ar extends Fi{constructor(h){V(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Ar.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Ar.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=ha.fromJSON(h);return V(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:w}=h;if(!p||!w)return null;try{return ha._create(w,p)}catch{return null}}}let Ul=(()=>{class y extends Ys{constructor(){super("twitter.com")}static credential(p,w){return rs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:w})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:w,oauthTokenSecret:S}=p;if(!w||!S)return null;try{return y.credential(w,S)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function ko(y,h){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,g.Z)(function*(y,h){return Tr(y,"POST","/v1/accounts:signUp",Nt(y,h))})).apply(this,arguments)}class $r{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,w,S=!1){return(0,g.Z)(function*(){const P=yield ot._fromIdTokenResponse(h,w,S),q=Rn(w);return new $r({user:P,providerId:q,_tokenResponse:w,operationType:p})})()}static _forOperation(h,p,w){return(0,g.Z)(function*(){yield h._updateTokensIfNecessary(w,!0);const S=Rn(w);return new $r({user:h,providerId:S,_tokenResponse:w,operationType:p})})()}}function Rn(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function bh(){return(bh=(0,g.Z)(function*(y){var h;const p=pn(y);if(yield p._initializationPromise,null!==(h=p.currentUser)&&void 0!==h&&h.isAnonymous)return new $r({user:p.currentUser,providerId:null,operationType:"signIn"});const w=yield ko(p,{returnSecureToken:!0}),S=yield $r._fromIdTokenResponse(p,"signIn",w,!0);return yield p._updateCurrentUser(S.user),S})).apply(this,arguments)}class Qs extends k.ZR{constructor(h,p,w,S){var P;super(p.code,p.message),this.operationType=w,this.user=S,Object.setPrototypeOf(this,Qs.prototype),this.customData={appName:h.name,tenantId:null!==(P=h.tenantId)&&void 0!==P?P:void 0,_serverResponse:p.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(h,p,w,S){return new Qs(h,p,w,S)}}function Hr(y,h,p,w){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Qs._fromErrorAndOperation(y,P,h,w):P})}function is(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function ss(){return(ss=(0,g.Z)(function*(y,h){const p=(0,k.m9)(y);yield vi(!0,p,h);const{providerUserInfo:w}=yield mi(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),S=is(w||[]);return p.providerData=p.providerData.filter(P=>S.has(P.providerId)),S.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function cr(y,h){return No.apply(this,arguments)}function No(){return(No=(0,g.Z)(function*(y,h,p=!1){const w=yield er(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return $r._forOperation(y,"link",w)})).apply(this,arguments)}function vi(y,h,p){return os.apply(this,arguments)}function os(){return(os=(0,g.Z)(function*(y,h,p){yield Yt(h);const S=!1===y?"provider-already-linked":"no-such-provider";V(is(h.providerData).has(p)===y,h.auth,S)})).apply(this,arguments)}function as(y,h){return us.apply(this,arguments)}function us(){return(us=(0,g.Z)(function*(y,h,p=!1){var w;const{auth:S}=y,P="reauthenticate";try{const q=yield er(y,Hr(S,P,h,y),p);V(q.idToken,S,"internal-error");const ue=Ke(q.idToken);V(ue,S,"internal-error");const{sub:Le}=ue;return V(y.uid===Le,S,"user-mismatch"),$r._forOperation(y,P,q)}catch(q){throw"auth/user-not-found"===(null===(w=q)||void 0===w?void 0:w.code)&&Ce(S,"user-mismatch"),q}})).apply(this,arguments)}function Oo(y,h){return It.apply(this,arguments)}function It(){return(It=(0,g.Z)(function*(y,h,p=!1){const w="signIn",S=yield Hr(y,w,h),P=yield $r._fromIdTokenResponse(y,w,S);return p||(yield y._updateCurrentUser(P.user)),P})).apply(this,arguments)}function In(y,h){return jl.apply(this,arguments)}function jl(){return(jl=(0,g.Z)(function*(y,h){return Oo(pn(y),h)})).apply(this,arguments)}function gu(y,h){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,g.Z)(function*(y,h){const p=(0,k.m9)(y);return yield vi(!1,p,h.providerId),cr(p,h)})).apply(this,arguments)}function Js(y,h){return xs.apply(this,arguments)}function xs(){return(xs=(0,g.Z)(function*(y,h){return as((0,k.m9)(y),h)})).apply(this,arguments)}function mu(y,h){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,g.Z)(function*(y,h){return Tr(y,"POST","/v1/accounts:signInWithCustomToken",Nt(y,h))})).apply(this,arguments)}function Ft(){return(Ft=(0,g.Z)(function*(y,h){const p=pn(y),w=yield mu(p,{token:h,returnSecureToken:!0}),S=yield $r._fromIdTokenResponse(p,"signIn",w);return yield p._updateCurrentUser(S.user),S})).apply(this,arguments)}class Ms{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?Fo._fromServerResponse(h,p):Ce(h,"internal-error")}}class Fo extends Ms{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new Fo(p)}}function dn(y,h,p){var w;V((null===(w=p.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),V(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(V(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(V(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function Rs(){return(Rs=(0,g.Z)(function*(y,h,p){const w=(0,k.m9)(y),S={requestType:"PASSWORD_RESET",email:h};p&&dn(w,S,p),yield So(w,S)})).apply(this,arguments)}function ga(){return(ga=(0,g.Z)(function*(y,h,p){yield Lt((0,k.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function Uo(){return(Uo=(0,g.Z)(function*(y,h){yield ua((0,k.m9)(y),{oobCode:h})})).apply(this,arguments)}function ya(y,h){return Th.apply(this,arguments)}function Th(){return(Th=(0,g.Z)(function*(y,h){const p=(0,k.m9)(y),w=yield Lt(p,{oobCode:h}),S=w.requestType;switch(V(S,p,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":V(w.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":V(w.mfaInfo,p,"internal-error");default:V(w.email,p,"internal-error")}let P=null;return w.mfaInfo&&(P=Ms._fromServerResponse(pn(p),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:P},operation:S}})).apply(this,arguments)}function jn(){return(jn=(0,g.Z)(function*(y,h){const{data:p}=yield ya((0,k.m9)(y),h);return p.email})).apply(this,arguments)}function _a(){return(_a=(0,g.Z)(function*(y,h,p){const w=pn(y),S=yield ko(w,{returnSecureToken:!0,email:h,password:p}),P=yield $r._fromIdTokenResponse(w,"signIn",S);return yield w._updateCurrentUser(P.user),P})).apply(this,arguments)}function Dc(){return(Dc=(0,g.Z)(function*(y,h,p){const w=(0,k.m9)(y),S={requestType:"EMAIL_SIGNIN",email:h};V(p.handleCodeInApp,w,"argument-error"),p&&dn(w,S,p),yield Ao(w,S)})).apply(this,arguments)}function va(){return(va=(0,g.Z)(function*(y,h,p){const w=(0,k.m9)(y),S=Mo.credentialWithLink(h,p||ke());return V(S._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),In(w,S)})).apply(this,arguments)}function Tc(y,h){return eo.apply(this,arguments)}function eo(){return(eo=(0,g.Z)(function*(y,h){return nn(y,"POST","/v1/accounts:createAuthUri",Nt(y,h))})).apply(this,arguments)}function wa(){return(wa=(0,g.Z)(function*(y,h){const w={identifier:h,continueUri:ut()?ke():"http://localhost"},{signinMethods:S}=yield Tc((0,k.m9)(y),w);return S||[]})).apply(this,arguments)}function Vo(){return(Vo=(0,g.Z)(function*(y,h){const p=(0,k.m9)(y),S={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&dn(p.auth,S,h);const{email:P}=yield Sr(p.auth,S);P!==y.email&&(yield y.reload())})).apply(this,arguments)}function vu(){return(vu=(0,g.Z)(function*(y,h,p){const w=(0,k.m9)(y),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&dn(w.auth,P,p);const{email:q}=yield Eh(w.auth,P);q!==y.email&&(yield y.reload())})).apply(this,arguments)}function wu(y,h){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,g.Z)(function*(y,h){return nn(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Bo(){return(Bo=(0,g.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const w=(0,k.m9)(y),P={idToken:yield w.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},q=yield er(w,wu(w.auth,P));w.displayName=q.displayName||null,w.photoURL=q.photoUrl||null;const ue=w.providerData.find(({providerId:Le})=>"password"===Le);ue&&(ue.displayName=w.displayName,ue.photoURL=w.photoURL),yield w._updateTokensIfNecessary(q)})).apply(this,arguments)}function Wn(y,h,p){return ei.apply(this,arguments)}function ei(){return(ei=(0,g.Z)(function*(y,h,p){const{auth:w}=y,P={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(P.email=h),p&&(P.password=p);const q=yield er(y,Al(w,P));yield y._updateTokensIfNecessary(q,!0)})).apply(this,arguments)}class jo{constructor(h,p,w={}){this.isNewUser=h,this.providerId=p,this.profile=w}}class Hl extends jo{constructor(h,p,w,S){super(h,p,w),this.username=S}}class Gl extends jo{constructor(h,p){super(h,"facebook.com",p)}}class Sc extends Hl{constructor(h,p){super(h,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class zl extends jo{constructor(h,p){super(h,"google.com",p)}}class Ac extends Hl{constructor(h,p,w){super(h,"twitter.com",p,w)}}function bu(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function gn(y){var h,p;if(!y)return null;const{providerId:w}=y,S=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},P=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&y?.idToken){const q=null===(p=null===(h=Ke(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(q)return new jo(P,"anonymous"!==q&&"custom"!==q?q:null)}if(!w)return null;switch(w){case"facebook.com":return new Gl(P,S);case"github.com":return new Sc(P,S);case"google.com":return new zl(P,S);case"twitter.com":return new Ac(P,S,y.screenName||null);case"custom":case"anonymous":return new jo(P,null);default:return new jo(P,w,S)}}(p)}class Bi{constructor(h,p){this.type=h,this.credential=p}static _fromIdtoken(h){return new Bi("enroll",h)}static _fromMfaPendingCredential(h){return new Bi("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,w;if(h?.multiFactorSession){if(null!==(p=h.multiFactorSession)&&void 0!==p&&p.pendingCredential)return Bi._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(w=h.multiFactorSession)&&void 0!==w&&w.idToken)return Bi._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Ea{constructor(h,p,w){this.session=h,this.hints=p,this.signInResolver=w}static _fromError(h,p){const w=pn(h),S=p.customData._serverResponse,P=(S.mfaInfo||[]).map(ue=>Ms._fromServerResponse(w,ue));V(S.mfaPendingCredential,w,"internal-error");const q=Bi._fromMfaPendingCredential(S.mfaPendingCredential);return new Ea(q,P,function(){var ue=(0,g.Z)(function*(Le){const Qe=yield Le._process(w,q);delete S.mfaInfo,delete S.mfaPendingCredential;const yt=Object.assign(Object.assign({},S),{idToken:Qe.idToken,refreshToken:Qe.refreshToken});switch(p.operationType){case"signIn":const dt=yield $r._fromIdTokenResponse(w,p.operationType,yt);return yield w._updateCurrentUser(dt.user),dt;case"reauthenticate":return V(p.user,w,"internal-error"),$r._forOperation(p.user,p.operationType,yt);default:Ce(w,"internal-error")}});return function(Le){return ue.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,g.Z)(function*(){return p.signInResolver(h)})()}}function Mh(y,h){return nn(y,"POST","/v2/accounts/mfaEnrollment:start",Nt(y,h))}class Da{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(w=>Ms._fromServerResponse(h.auth,w)))})}static _fromUser(h){return new Da(h)}getSession(){var h=this;return(0,g.Z)(function*(){return Bi._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,p){var w=this;return(0,g.Z)(function*(){const S=h,P=yield w.getSession(),q=yield er(w.user,S._process(w.user.auth,P,p));return yield w.user._updateTokensIfNecessary(q),w.user.reload()})()}unenroll(h){var p=this;return(0,g.Z)(function*(){var w;const S="string"==typeof h?h:h.uid,P=yield p.user.getIdToken(),q=yield er(p.user,function Lm(y,h){return nn(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Nt(y,h))}(p.user.auth,{idToken:P,mfaEnrollmentId:S}));p.enrolledFactors=p.enrolledFactors.filter(({uid:ue})=>ue!==S),yield p.user._updateTokensIfNecessary(q);try{yield p.user.reload()}catch(ue){if("auth/user-token-expired"!==(null===(w=ue)||void 0===w?void 0:w.code))throw ue}})()}}const ba=new WeakMap,ks="__sak";class Wl{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(ks,"1"),this.storage.removeItem(ks),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ca=(()=>{class y extends Wl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,w)=>this.onStorageEvent(p,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Rh(){const y=(0,k.z$)();return tr(y)||Jr(y)}()&&function Es(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=oa(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const w of Object.keys(this.listeners)){const S=this.storage.getItem(w),P=this.localCache[w];S!==P&&p(w,P,S)}}onStorageEvent(p,w=!1){if(!p.key)return void this.forAllChangedKeys((ue,Le,Qe)=>{this.notifyListeners(ue,Qe)});const S=p.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ue=this.storage.getItem(S);if(p.newValue!==ue)null!==p.newValue?this.storage.setItem(S,p.newValue):this.storage.removeItem(S);else if(this.localCache[S]===p.newValue&&!w)return}const P=()=>{const ue=this.storage.getItem(S);!w&&this.localCache[S]===ue||this.notifyListeners(S,ue)},q=this.storage.getItem(S);!function fn(){return(0,k.w1)()&&10===document.documentMode}()||q===p.newValue||p.newValue===p.oldValue?P():setTimeout(P,10)}notifyListeners(p,w){this.localCache[p]=w;const S=this.listeners[p];if(S)for(const P of Array.from(S))P(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,w,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:w,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(w)}_removeListener(p,w){this.listeners[p]&&(this.listeners[p].delete(w),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,w){var S=()=>super._set,P=this;return(0,g.Z)(function*(){yield S().call(P,p,w),P.localCache[p]=JSON.stringify(w)})()}_get(p){var w=()=>super._get,S=this;return(0,g.Z)(function*(){const P=yield w().call(S,p);return S.localCache[p]=JSON.stringify(P),P})()}_remove(p){var w=()=>super._remove,S=this;return(0,g.Z)(function*(){yield w().call(S,p),delete S.localCache[p]})()}}return y.type="LOCAL",y})(),no=(()=>{class y extends Wl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,w){}_removeListener(p,w){}}return y.type="SESSION",y})();let xc=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const w=this.receivers.find(P=>P.isListeningto(p));if(w)return w;const S=new y(p);return this.receivers.push(S),S}isListeningto(p){return this.eventTarget===p}handleEvent(p){var w=this;return(0,g.Z)(function*(){const S=p,{eventId:P,eventType:q,data:ue}=S.data,Le=w.handlersMap[q];if(!Le?.size)return;S.ports[0].postMessage({status:"ack",eventId:P,eventType:q});const Qe=Array.from(Le).map(function(){var dt=(0,g.Z)(function*(Fn){return Fn(S.origin,ue)});return function(Fn){return dt.apply(this,arguments)}}()),yt=yield function Yl(y){return Promise.all(y.map(function(){var h=(0,g.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(w){return{fulfilled:!1,reason:w}}});return function(p){return h.apply(this,arguments)}}()))}(Qe);S.ports[0].postMessage({status:"done",eventId:P,eventType:q,response:yt})})()}_subscribe(p,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(w)}_unsubscribe(p,w){this.handlersMap[p]&&w&&this.handlersMap[p].delete(w),(!w||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function qt(y="",h=10){let p="";for(let w=0;w<h;w++)p+=Math.floor(10*Math.random());return y+p}class dr{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,w=50){var S=this;return(0,g.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let q,ue;return new Promise((Le,Qe)=>{const yt=qt("",20);P.port1.start();const dt=setTimeout(()=>{Qe(new Error("unsupported_event"))},w);ue={messageChannel:P,onMessage(Fn){const Zi=Fn;if(Zi.data.eventId===yt)switch(Zi.data.status){case"ack":clearTimeout(dt),q=setTimeout(()=>{Qe(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),Le(Zi.data.response);break;default:clearTimeout(dt),clearTimeout(q),Qe(new Error("invalid_response"))}}},S.handlers.add(ue),P.port1.addEventListener("message",ue.onMessage),S.target.postMessage({eventType:h,eventId:yt,data:p},[P.port2])}).finally(()=>{ue&&S.removeMessageHandler(ue)})})()}}function $e(){return window}function hr(){return typeof $e().WorkerGlobalScope<"u"&&"function"==typeof $e().importScripts}function ls(){return(ls=(0,g.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Aa="firebaseLocalStorageDb",ro="firebaseLocalStorage",Mc="fbase_key";class io{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function wi(y,h){return y.transaction([ro],h?"readwrite":"readonly").objectStore(ro)}function Rc(){const y=indexedDB.open(Aa,1);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(ro,{keyPath:Mc})}catch(S){p(S)}}),y.addEventListener("success",(0,g.Z)(function*(){const w=y.result;w.objectStoreNames.contains(ro)?h(w):(w.close(),yield function pt(){const y=indexedDB.deleteDatabase(Aa);return new io(y).toPromise()}(),h(yield Rc()))}))})}function xa(y,h,p){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,g.Z)(function*(y,h,p){const w=wi(y,!0).put({[Mc]:h,value:p});return new io(w).toPromise()})).apply(this,arguments)}function Pn(){return(Pn=(0,g.Z)(function*(y,h){const p=wi(y,!1).get(h),w=yield new io(p).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Pc(y,h){const p=wi(y,!0).delete(h);return new io(p).toPromise()}const ni=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,g.Z)(function*(){return p.db||(p.db=yield Rc()),p.db})()}_withRetries(p){var w=this;return(0,g.Z)(function*(){let S=0;for(;;)try{const P=yield w._openDb();return yield p(P)}catch(P){if(S++>3)throw P;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,g.Z)(function*(){return hr()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,g.Z)(function*(){p.receiver=xc._getInstance(function Ph(){return hr()?self:null}()),p.receiver._subscribe("keyChanged",function(){var w=(0,g.Z)(function*(S,P){return{keyProcessed:(yield p._poll()).includes(P.key)}});return function(S,P){return w.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var w=(0,g.Z)(function*(S,P){return["keyChanged"]});return function(S,P){return w.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,g.Z)(function*(){var w,S;if(p.activeServiceWorker=yield function Sa(){return ls.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new dr(p.activeServiceWorker);const P=yield p.sender._send("ping",{},800);!P||(null===(w=P[0])||void 0===w?void 0:w.fulfilled)&&(null===(S=P[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var w=this;return(0,g.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function ti(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:p},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Rc();return yield xa(p,ks,"1"),yield Pc(p,ks),!0}catch{}return!1})()}_withPendingWrite(p){var w=this;return(0,g.Z)(function*(){w.pendingWrites++;try{yield p()}finally{w.pendingWrites--}})()}_set(p,w){var S=this;return(0,g.Z)(function*(){return S._withPendingWrite((0,g.Z)(function*(){return yield S._withRetries(P=>xa(P,p,w)),S.localCache[p]=w,S.notifyServiceWorker(p)}))})()}_get(p){var w=this;return(0,g.Z)(function*(){const S=yield w._withRetries(P=>function Ns(y,h){return Pn.apply(this,arguments)}(P,p));return w.localCache[p]=S,S})()}_remove(p){var w=this;return(0,g.Z)(function*(){return w._withPendingWrite((0,g.Z)(function*(){return yield w._withRetries(S=>Pc(S,p)),delete w.localCache[p],w.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,g.Z)(function*(){const w=yield p._withRetries(q=>{const ue=wi(q,!1).getAll();return new io(ue).toPromise()});if(!w)return[];if(0!==p.pendingWrites)return[];const S=[],P=new Set;for(const{fbase_key:q,value:ue}of w)P.add(q),JSON.stringify(p.localCache[q])!==JSON.stringify(ue)&&(p.notifyListeners(q,ue),S.push(q));for(const q of Object.keys(p.localCache))p.localCache[q]&&!P.has(q)&&(p.notifyListeners(q,null),S.push(q));return S})()}notifyListeners(p,w){this.localCache[p]=w;const S=this.listeners[p];if(S)for(const P of Array.from(S))P(w)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(w)}_removeListener(p,w){this.listeners[p]&&(this.listeners[p].delete(w),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Os(y,h){return nn(y,"POST","/v2/accounts/mfaSignIn:start",Nt(y,h))}function Ho(){return(Ho=(0,g.Z)(function*(y){return(yield nn(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ri(y){return new Promise((h,p)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=h,w.onerror=S=>{const P=_e("internal-error");P.customData=S,p(P)},w.type="text/javascript",w.charset="UTF-8",function Su(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(w)})}function Go(y){return`__${y}${Math.floor(1e6*Math.random())}`}const kn=1e12;class Nh{constructor(h){this.auth=h,this.counter=kn,this._widgets=new Map}render(h,p){const w=this.counter;return this._widgets.set(w,new Oh(h,this.auth.name,p||{})),this.counter++,w}reset(h){var p;const w=h||kn;null===(p=this._widgets.get(w))||void 0===p||p.delete(),this._widgets.delete(w)}getResponse(h){var p;return(null===(p=this._widgets.get(h||kn))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,g.Z)(function*(){var w;return null===(w=p._widgets.get(h||kn))||void 0===w||w.execute(),""})()}}class Oh{constructor(h,p,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof h?document.getElementById(h):h;V(S,"argument-error",{appName:p}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function $n(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<y;w++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ra=Go("rcb"),kc=new tn(3e4,6e4);class En{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=$e().grecaptcha)||void 0===h||!h.render)}load(h,p=""){return V(function Jl(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve($e().grecaptcha):new Promise((w,S)=>{const P=$e().setTimeout(()=>{S(_e(h,"network-request-failed"))},kc.get());$e()[Ra]=()=>{$e().clearTimeout(P),delete $e()[Ra];const ue=$e().grecaptcha;if(!ue)return void S(_e(h,"internal-error"));const Le=ue.render;ue.render=(Qe,yt)=>{const dt=Le(Qe,yt);return this.counter++,dt},this.hostLanguage=p,w(ue)},ri(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:Ra,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(P),S(_e(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var p;return!(null===(p=$e().grecaptcha)||void 0===p||!p.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Dp{load(h){return(0,g.Z)(function*(){return new Nh(h)})()}clearedOneInstance(){}}const Hn="recaptcha",$i={theme:"light",type:"image"};class Hi{constructor(h,p=Object.assign({},$i),w){this.parameters=p,this.type=Hn,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=pn(w),this.isInvisible="invisible"===this.parameters.size,V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof h?document.getElementById(h):h;V(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Dp:new En,this.validateStartingState()}verify(){var h=this;return(0,g.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),w=h.getAssertedRecaptcha();return w.getResponse(p)||new Promise(P=>{const q=ue=>{!ue||(h.tokenChangeListeners.delete(q),P(ue))};h.tokenChangeListeners.add(q),h.isInvisible&&w.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){V(!this.parameters.sitekey,this.auth,"argument-error"),V(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(w=>w(p)),"function"==typeof h)h(p);else if("string"==typeof h){const w=$e()[h];"function"==typeof w&&w(p)}}}assertNotDestroyed(){V(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,g.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const w=document.createElement("div");p.appendChild(w),p=w}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,g.Z)(function*(){V(ut()&&!hr(),h.auth,"internal-error"),yield function Ir(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function fr(y){return Ho.apply(this,arguments)}(h.auth);V(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return V(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ds{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=xo._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function pr(){return(pr=(0,g.Z)(function*(y,h,p){const w=pn(y),S=yield zo(w,h,(0,k.m9)(p));return new ds(S,P=>In(w,P))})).apply(this,arguments)}function so(){return(so=(0,g.Z)(function*(y,h,p){const w=(0,k.m9)(y);yield vi(!1,w,"phone");const S=yield zo(w.auth,h,(0,k.m9)(p));return new ds(S,P=>gu(w,P))})).apply(this,arguments)}function xu(){return(xu=(0,g.Z)(function*(y,h,p){const w=(0,k.m9)(y),S=yield zo(w.auth,h,(0,k.m9)(p));return new ds(S,P=>Js(w,P))})).apply(this,arguments)}function zo(y,h,p){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,g.Z)(function*(y,h,p){var w;const S=yield p.verify();try{let P;if(V("string"==typeof S,y,"argument-error"),V(p.type===Hn,y,"argument-error"),P="string"==typeof h?{phoneNumber:h}:h,"session"in P){const q=P.session;if("phoneNumber"in P)return V("enroll"===q.type,y,"internal-error"),(yield Mh(y,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{V("signin"===q.type,y,"internal-error");const ue=(null===(w=P.multiFactorHint)||void 0===w?void 0:w.uid)||P.multiFactorUid;return V(ue,y,"missing-multi-factor-info"),(yield Os(y,{mfaPendingCredential:q.credential,mfaEnrollmentId:ue,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield vp(y,{phoneNumber:P.phoneNumber,recaptchaToken:S});return q}}finally{p._reset()}})).apply(this,arguments)}function oo(){return(oo=(0,g.Z)(function*(y,h){yield cr((0,k.m9)(y),h)})).apply(this,arguments)}let qo=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=pn(p)}verifyPhoneNumber(p,w){return zo(this.auth,p,(0,k.m9)(w))}static credential(p,w){return xo._fromVerification(p,w)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:w,temporaryProof:S}=p;return w&&S?xo._fromTokenResponse(w,S):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Nn(y,h){return h?se(h):(V(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Mr extends Ws{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return qn(h,this._buildIdpRequest())}_linkToIdToken(h,p){return qn(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return qn(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function ao(y){return Oo(y.auth,new Mr(y),y.bypassAuthState)}function Nc(y){const{auth:h,user:p}=y;return V(p,h,"internal-error"),as(p,new Mr(y),y.bypassAuthState)}function ka(y){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,g.Z)(function*(y){const{auth:h,user:p}=y;return V(p,h,"internal-error"),cr(p,new Mr(y),y.bypassAuthState)})).apply(this,arguments)}class On{constructor(h,p,w,S,P=!1){this.auth=h,this.resolver=w,this.user=S,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,g.Z)(function*(w,S){h.pendingPromise={resolve:w,reject:S};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(P){h.reject(P)}});return function(w,S){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,g.Z)(function*(){const{urlResponse:w,sessionId:S,postBody:P,tenantId:q,error:ue,type:Le}=h;if(ue)return void p.reject(ue);const Qe={auth:p.auth,requestUri:w,sessionId:S,tenantId:q||void 0,postBody:P||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Le)(Qe))}catch(yt){p.reject(yt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return ao;case"linkViaPopup":case"linkViaRedirect":return ka;case"reauthViaPopup":case"reauthViaRedirect":return Nc;default:Ce(this.auth,"internal-error")}}resolve(h){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ii=new tn(2e3,1e4);function Oa(){return(Oa=(0,g.Z)(function*(y,h,p){const w=pn(y);Ve(y,h,Fi);const S=Nn(w,p);return new Us(w,"signInViaPopup",h,S).executeNotNull()})).apply(this,arguments)}function La(){return(La=(0,g.Z)(function*(y,h,p){const w=(0,k.m9)(y);Ve(w.auth,h,Fi);const S=Nn(w.auth,p);return new Us(w.auth,"reauthViaPopup",h,S,w).executeNotNull()})).apply(this,arguments)}function Xl(){return(Xl=(0,g.Z)(function*(y,h,p){const w=(0,k.m9)(y);Ve(w.auth,h,Fi);const S=Nn(w.auth,p);return new Us(w.auth,"linkViaPopup",h,S,w).executeNotNull()})).apply(this,arguments)}let Us=(()=>{class y extends On{constructor(p,w,S,P,q){super(p,w,P,q),this.provider=S,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,g.Z)(function*(){const w=yield p.execute();return V(w,p.auth,"internal-error"),w})()}onExecution(){var p=this;return(0,g.Z)(function*(){W(1===p.filter.length,"Popup operations only handle one event");const w=qt();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],w),p.authWindow.associatedEvent=w,p.resolver._originValidation(p.auth).catch(S=>{p.reject(S)}),p.resolver._isIframeWebStorageSupported(p.auth,S=>{S||p.reject(_e(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(_e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var w,S;this.pollId=null!==(S=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(_e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,Ii.get())};p()}}return y.currentPopupAction=null,y})();const Gi=new Map;class ed extends On{constructor(h,p,w=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,w),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,g.Z)(function*(){let w=Gi.get(p.auth._key());if(!w){try{const P=(yield function Pu(y,h){return Er.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;w=()=>Promise.resolve(P)}catch(S){w=()=>Promise.reject(S)}Gi.set(p.auth._key(),w)}return p.bypassAuthState||Gi.set(p.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,w=this;return(0,g.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(w,h);if("unknown"!==h.type){if(h.eventId){const S=yield w.auth._redirectUserForId(h.eventId);if(S)return w.user=S,p().call(w,h);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function Er(){return(Er=(0,g.Z)(function*(y,h){const p=ku(h),w=mn(y);if(!(yield w._isAvailable()))return!1;const S="true"===(yield w._get(p));return yield w._remove(p),S})).apply(this,arguments)}function Rt(y,h){return ir.apply(this,arguments)}function ir(){return(ir=(0,g.Z)(function*(y,h){return mn(y)._set(ku(h),"true")})).apply(this,arguments)}function Bs(y,h){Gi.set(y._key(),h)}function mn(y){return se(y._redirectPersistence)}function ku(y){return zn("pendingRedirect",y.config.apiKey,y.name)}function D(){return(D=(0,g.Z)(function*(y,h,p){const w=pn(y);Ve(y,h,Fi);const S=Nn(w,p);return yield Rt(S,w),S._openRedirect(w,h,"signInViaRedirect")})).apply(this,arguments)}function L(){return(L=(0,g.Z)(function*(y,h,p){const w=(0,k.m9)(y);Ve(w.auth,h,Fi);const S=Nn(w.auth,p);yield Rt(S,w.auth);const P=yield at(w);return S._openRedirect(w.auth,h,"reauthViaRedirect",P)})).apply(this,arguments)}function De(){return(De=(0,g.Z)(function*(y,h,p){const w=(0,k.m9)(y);Ve(w.auth,h,Fi);const S=Nn(w.auth,p);yield vi(!1,w,h.providerId),yield Rt(S,w.auth);const P=yield at(w);return S._openRedirect(w.auth,h,"linkViaRedirect",P)})).apply(this,arguments)}function ct(){return(ct=(0,g.Z)(function*(y,h){return yield pn(y)._initializationPromise,Dt(y,h,!1)})).apply(this,arguments)}function Dt(y,h){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,g.Z)(function*(y,h,p=!1){const w=pn(y),S=Nn(w,h),q=yield new ed(w,S,p).execute();return q&&!p&&(delete q.user._redirectEventId,yield w._persistUserIfCurrent(q.user),yield w._setRedirectUser(null,h)),q})).apply(this,arguments)}function at(y){return yn.apply(this,arguments)}function yn(){return(yn=(0,g.Z)(function*(y){const h=qt(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Fa{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(h,w)&&(p=!0,this.sendToConsumer(h,w),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Lh(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Di(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var w;if(h.error&&!Di(h)){const S=(null===(w=h.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";p.onError(_e(this.auth,S))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const w=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&w}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ei(h))}saveEventToCache(h){this.cachedEventUids.add(Ei(h)),this.lastProcessedEventTime=Date.now()}}function Ei(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function Di({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function Ua(y){return bi.apply(this,arguments)}function bi(){return(bi=(0,g.Z)(function*(y,h={}){return nn(y,"GET","/v1/projects",h)})).apply(this,arguments)}const uo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ti=/^https?/;function Tp(){return(Tp=(0,g.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield Ua(y);for(const p of h)try{if(Um(p))return}catch{}Ce(y,"unauthorized-domain")})).apply(this,arguments)}function Um(y){const h=ke(),{protocol:p,hostname:w}=new URL(h);if(y.startsWith("chrome-extension://")){const q=new URL(y);return""===q.hostname&&""===w?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&q.hostname===w}if(!Ti.test(p))return!1;if(uo.test(y))return w===y;const S=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(w)}const nd=new tn(3e4,6e4);function Fh(){const y=$e().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let co=null;function Lc(y){return co=co||function Oc(y){return new Promise((h,p)=>{var w,S,P;function q(){Fh(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Fh(),p(_e(y,"network-request-failed"))},timeout:nd.get()})}if(null!==(S=null===(w=$e().gapi)||void 0===w?void 0:w.iframes)&&void 0!==S&&S.Iframe)h(gapi.iframes.getContext());else{if(null===(P=$e().gapi)||void 0===P||!P.load){const ue=Go("iframefcb");return $e()[ue]=()=>{gapi.load?q():p(_e(y,"network-request-failed"))},ri(`https://apis.google.com/js/api.js?onload=${ue}`).catch(Le=>p(Le))}q()}}).catch(h=>{throw co=null,h})}(y),co}const Uh=new tn(5e3,15e3),Lu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Cp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function id(y){const h=y.config;V(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?Cn(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:h.apiKey,appName:y.name,v:ae.SDK_VERSION},S=Cp.get(y.config.apiHost);S&&(w.eid=S);const P=y._getFrameworks();return P.length&&(w.fw=P.join(",")),`${p}?${(0,k.xO)(w).slice(1)}`}function Wo(){return Wo=(0,g.Z)(function*(y){const h=yield Lc(y),p=$e().gapi;return V(p,y,"internal-error"),h.open({where:document.body,url:id(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Lu,dontclear:!0},w=>new Promise(function(){var S=(0,g.Z)(function*(P,q){yield w.restyle({setHideOnLeave:!1});const ue=_e(y,"network-request-failed"),Le=$e().setTimeout(()=>{q(ue)},Uh.get());function Qe(){$e().clearTimeout(Le),P(w)}w.ping(Qe).then(Qe,()=>{q(ue)})});return function(P,q){return S.apply(this,arguments)}}()))}),Wo.apply(this,arguments)}const Vh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class od{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Uu(y,h,p,w,S,P){V(y.config.authDomain,y,"auth-domain-config-required"),V(y.config.apiKey,y,"invalid-api-key");const q={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:w,v:ae.SDK_VERSION,eventId:S};if(h instanceof Fi){h.setDefaultLanguage(y.languageCode),q.providerId=h.providerId||"",(0,k.xb)(h.getCustomParameters())||(q.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Le,Qe]of Object.entries(P||{}))q[Le]=Qe}if(h instanceof Ys){const Le=h.getScopes().filter(Qe=>""!==Qe);Le.length>0&&(q.scopes=Le.join(","))}y.tenantId&&(q.tid=y.tenantId);const ue=q;for(const Le of Object.keys(ue))void 0===ue[Le]&&delete ue[Le];return`${function Sp({config:y}){return y.emulator?Cn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,k.xO)(ue).slice(1)}`}const $h="webStorageSupport";class Hh extends class Uc{constructor(h){this.factorId=h}_process(h,p,w){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,w);case"signin":return this._finalizeSignIn(h,p.credential);default:return ge("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Hh(h)}_finalizeEnroll(h,p,w){return function Om(y,h){return nn(y,"POST","/v2/accounts/mfaEnrollment:finalize",Nt(y,h))}(h,{idToken:p,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function Ls(y,h){return nn(y,"POST","/v2/accounts/mfaSignIn:finalize",Nt(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let y0=(()=>{class y{constructor(){}static assertion(p){return Hh._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var jm="@firebase/auth";class _0{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,g.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(w=>{var S;h((null===(S=w)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ba(){return window}function ud(){return(ud=(0,g.Z)(function*(y,h,p){var w;const{BuildInfo:S}=Ba();W(h.sessionId,"AuthEvent did not contain a session ID");const P=yield qh(h.sessionId),q={};return Jr()?q.ibi=S.packageName:_t()?q.apn=S.packageName:Ce(y,"operation-not-supported-in-this-environment"),S.displayName&&(q.appDisplayName=S.displayName),q.sessionId=P,Uu(y,p,h.type,void 0,null!==(w=h.eventId)&&void 0!==w?w:void 0,q)})).apply(this,arguments)}function hs(){return(hs=(0,g.Z)(function*(y){const{BuildInfo:h}=Ba(),p={};Jr()?p.iosBundleId=h.packageName:_t()?p.androidPackageName=h.packageName:Ce(y,"operation-not-supported-in-this-environment"),yield Ua(y,p)})).apply(this,arguments)}function ja(){return(ja=(0,g.Z)(function*(y,h,p){const{cordova:w}=Ba();let S=()=>{};try{yield new Promise((P,q)=>{let ue=null;function Le(){var dt;P();const Fn=null===(dt=w.plugins.browsertab)||void 0===dt?void 0:dt.close;"function"==typeof Fn&&Fn(),"function"==typeof p?.close&&p.close()}function Qe(){ue||(ue=window.setTimeout(()=>{q(_e(y,"redirect-cancelled-by-user"))},2e3))}function yt(){"visible"===document?.visibilityState&&Qe()}h.addPassiveListener(Le),document.addEventListener("resume",Qe,!1),_t()&&document.addEventListener("visibilitychange",yt,!1),S=()=>{h.removePassiveListener(Le),document.removeEventListener("resume",Qe,!1),document.removeEventListener("visibilitychange",yt,!1),ue&&window.clearTimeout(ue)}})}finally{S()}})).apply(this,arguments)}function qh(y){return cd.apply(this,arguments)}function cd(){return(cd=(0,g.Z)(function*(y){const h=Zh(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Zh(y){if(W(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let w=0;w<y.length;w++)p[w]=y.charCodeAt(w);return p}!function Ap(y){(0,ae._registerComponent)(new ce.wA("auth",(h,{options:p})=>{const w=h.getProvider("app").getImmediate(),S=h.getProvider("heartbeat"),{apiKey:P,authDomain:q}=w.options;return((ue,Le)=>{V(P&&!P.includes(":"),"invalid-api-key",{appName:ue.name}),V(!q?.includes(":"),"argument-error",{appName:ue.name});const Qe={apiKey:P,authDomain:q,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:At(y)},yt=new bo(ue,Le,Qe);return function Oe(y,h){const p=h?.persistence||[],w=(Array.isArray(p)?p:[p]).map(se);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(w,h?.popupRedirectResolver)}(yt,p),yt})(w,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,w)=>{h.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new ce.wA("auth-internal",h=>{const p=pn(h.getProvider("auth").getImmediate());return new _0(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(jm,"0.20.5",function v0(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ae.registerVersion)(jm,"0.20.5","esm2017")}("Browser");class Mp extends Fa{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,g.Z)(function*(){yield h.initPromise})()}}function Vu(y){return Rp.apply(this,arguments)}function Rp(){return(Rp=(0,g.Z)(function*(y){const h=yield Wh()._get(Bc(y));return h&&(yield Wh()._remove(Bc(y))),h})).apply(this,arguments)}function Pp(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const w=Math.floor(Math.random()*h.length);y.push(h.charAt(w))}return y.join("")}function Wh(){return se(Ca)}function Bc(y){return zn("authEvent",y.config.apiKey,y.name)}function Bu(y){if(!y?.includes("?"))return{};const[h,...p]=y.split("?");return(0,k.zd)(p.join("?"))}function $c(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_e("no-auth-event")}}function Ga(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function Wm(y=(0,k.z$)()){return!("file:"!==Ga()&&"ionic:"!==Ga()&&"capacitor:"!==Ga()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Km(){try{const y=self.localStorage,h=qt();if(y)return y.setItem(h,"1"),y.removeItem(h),!function D0(y=(0,k.z$)()){return function E0(){return(0,k.w1)()&&11===document?.documentMode}()||function Kh(y=(0,k.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,k.hl)()}catch{return za()&&(0,k.hl)()}return!1}function za(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function qa(){return(function w0(){return"http:"===Ga()||"https:"===Ga()}()||(0,k.ru)()||Wm())&&!function I0(){return(0,k.b$)()||(0,k.UG)()}()&&Km()&&!za()}function ii(){return Wm()&&typeof document<"u"}function Hc(){return(Hc=(0,g.Z)(function*(){return!!ii()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const si={LOCAL:"local",NONE:"none",SESSION:"session"},Za=V,Wa="persistence";function Qh(y){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,g.Z)(function*(y){yield y._initializationPromise;const h=Jh(),p=zn(Wa,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function Jh(){var y;try{return(null===(y=function Ym(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const Ka=V;class zi{constructor(){this.browserResolver=se(class Bm{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=no,this._completeRedirectFn=Dt,this._overrideRedirectResult=Bs}_openPopup(h,p,w,S){var P=this;return(0,g.Z)(function*(){var q;W(null===(q=P.eventManagers[h._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const ue=Uu(h,p,w,ke(),S);return function jh(y,h,p,w=500,S=600){const P=Math.max((window.screen.availHeight-S)/2,0).toString(),q=Math.max((window.screen.availWidth-w)/2,0).toString();let ue="";const Le=Object.assign(Object.assign({},Vh),{width:w.toString(),height:S.toString(),top:P,left:q}),Qe=(0,k.z$)().toLowerCase();p&&(ue=ar(Qe)?"_blank":p),ln(Qe)&&(h=h||"http://localhost",Le.scrollbars="yes");const yt=Object.entries(Le).reduce((Fn,[Zi,$u])=>`${Fn}${Zi}=${$u},`,"");if(function yi(y=(0,k.z$)()){var h;return Jr(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Qe)&&"_self"!==ue)return function js(y,h){const p=document.createElement("a");p.href=y,p.target=h;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(w)}(h||"",ue),new od(null);const dt=window.open(h||"",ue,yt);V(dt,y,"popup-blocked");try{dt.focus()}catch{}return new od(dt)}(h,ue,qt())})()}_openRedirect(h,p,w,S){var P=this;return(0,g.Z)(function*(){return yield P._originValidation(h),function wr(y){$e().location.href=y}(Uu(h,p,w,ke(),S)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:S,promise:P}=this.eventManagers[p];return S?Promise.resolve(S):(W(P,"If manager is not set, promise should be"),P)}const w=this.initAndGetManager(h);return this.eventManagers[p]={promise:w},w.catch(()=>{delete this.eventManagers[p]}),w}initAndGetManager(h){var p=this;return(0,g.Z)(function*(){const w=yield function sd(y){return Wo.apply(this,arguments)}(h),S=new Fa(h);return w.register("authEvent",P=>(V(P?.authEvent,h,"invalid-auth-event"),{status:S.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:S},p.iframes[h._key()]=w,S})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send($h,{type:$h},S=>{var P;const q=null===(P=S?.[0])||void 0===P?void 0:P[$h];void 0!==q&&p(!!q),Ce(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Ou(y){return Tp.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return oa()||tr()||Jr()}}),this.cordovaResolver=se(class zm{constructor(){this._redirectPersistence=no,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Dt,this._overrideRedirectResult=Bs}_initialize(h){var p=this;return(0,g.Z)(function*(){const w=h._key();let S=p.eventManagers.get(w);return S||(S=new Mp(h),p.eventManagers.set(w,S),p.attachCallbackListeners(h,S)),S})()}_openPopup(h){Ce(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,w,S){var P=this;return(0,g.Z)(function*(){!function $a(y){var h,p,w,S,P,q,ue,Le,Qe,yt;const dt=Ba();V("function"==typeof(null===(h=dt?.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),V(typeof(null===(p=dt?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),V("function"==typeof(null===(P=null===(S=null===(w=dt?.cordova)||void 0===w?void 0:w.plugins)||void 0===S?void 0:S.browsertab)||void 0===P?void 0:P.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(Le=null===(ue=null===(q=dt?.cordova)||void 0===q?void 0:q.plugins)||void 0===ue?void 0:ue.browsertab)||void 0===Le?void 0:Le.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(yt=null===(Qe=dt?.cordova)||void 0===Qe?void 0:Qe.InAppBrowser)||void 0===yt?void 0:yt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const q=yield P._initialize(h);yield q.initialized(),q.resetRedirect(),function Zo(){Gi.clear()}(),yield P._originValidation(h);const ue=function ld(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:Pp(),postBody:null,tenantId:y.tenantId,error:_e(y,"no-auth-event")}}(h,w,S);yield function Vc(y,h){return Wh()._set(Bc(y),h)}(h,ue);const Le=yield function Gh(y,h,p){return ud.apply(this,arguments)}(h,ue,p),Qe=yield function zh(y){const{cordova:h}=Ba();return new Promise(p=>{h.plugins.browsertab.isAvailable(w=>{let S=null;w?h.plugins.browsertab.openUrl(y):S=h.InAppBrowser.open(y,function nr(y=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(S)})})}(Le);return function fs(y,h,p){return ja.apply(this,arguments)}(h,q,Qe)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function ho(y){return hs.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:w,handleOpenURL:S,BuildInfo:P}=Ba(),q=setTimeout((0,g.Z)(function*(){yield Vu(h),p.onEvent($c())}),500),ue=function(){var yt=(0,g.Z)(function*(dt){clearTimeout(q);const Fn=yield Vu(h);let Zi=null;Fn&&dt?.url&&(Zi=function dd(y,h){var p,w;const S=function Np(y){const h=Bu(y),p=h.link?decodeURIComponent(h.link):void 0,w=Bu(p).link,S=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Bu(S).link||S||w||p||y}(h);if(S.includes("/__/auth/callback")){const P=Bu(S),q=P.firebaseError?function kp(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(P.firebaseError)):null,ue=null===(w=null===(p=q?.code)||void 0===p?void 0:p.split("auth/"))||void 0===w?void 0:w[1],Le=ue?_e(ue):null;return Le?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Le,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:S,postBody:null}}return null}(Fn,dt.url)),p.onEvent(Zi||$c())});return function(Fn){return yt.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,ue);const Le=S,Qe=`${P.packageName.toLowerCase()}://`;Ba().handleOpenURL=function(){var yt=(0,g.Z)(function*(dt){if(dt.toLowerCase().startsWith(Qe)&&ue({url:dt}),"function"==typeof Le)try{Le(dt)}catch(Fn){console.error(Fn)}});return function(dt){return yt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=no,this._completeRedirectFn=Dt,this._overrideRedirectResult=Bs}_initialize(h){var p=this;return(0,g.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,w,S){var P=this;return(0,g.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openPopup(h,p,w,S)})()}_openRedirect(h,p,w,S){var P=this;return(0,g.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openRedirect(h,p,w,S)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return ii()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ka(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,g.Z)(function*(){if(h.underlyingResolver)return;const p=yield function Yh(){return Hc.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function Yo(y){return y.unwrap()}function Qm(y){return Gc(y)}function Gc(y){const{_tokenResponse:h}=y instanceof k.ZR?y.customData:y;if(!h)return null;if(!(y instanceof k.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return qo.credentialFromResult(y);const p=h.providerId;if(!p||"password"===p)return null;let w;switch(p){case"google.com":w=da;break;case"facebook.com":w=Po;break;case"github.com":w=Ll;break;case"twitter.com":w=Ul;break;default:const{oauthIdToken:S,oauthAccessToken:P,oauthTokenSecret:q,pendingToken:ue,nonce:Le}=h;return P||q||S||ue?ue?p.startsWith("saml.")?ha._create(p,ue):rs._fromParams({providerId:p,signInMethod:p,pendingToken:ue,idToken:S,accessToken:P}):new Ro(p).credential({idToken:S,accessToken:P,rawNonce:Le}):null}return y instanceof k.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function Kn(y,h){return h.catch(p=>{throw p instanceof k.ZR&&function Xh(y,h){var p,w;const S=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===(null===(w=h)||void 0===w?void 0:w.code))h.resolver=new Jm(y,function rr(y,h){var p;const w=(0,k.m9)(y),S=h;return V(h.customData.operationType,w,"argument-error"),V(null===(p=S.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,w,"argument-error"),Ea._fromError(w,S)}(y,h));else if(S){const P=Gc(h),q=h;P&&(q.credential=P,q.tenantId=S.tenantId||void 0,q.email=S.email||void 0,q.phoneNumber=S.phoneNumber||void 0)}}(y,p),p}).then(p=>{const S=p.user;return{operationType:p.operationType,credential:Qm(p),additionalUserInfo:bu(p),user:ps.getOrCreate(S)}})}function pd(y,h){return gd.apply(this,arguments)}function gd(){return(gd=(0,g.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:w=>Kn(y,p.confirm(w))}})).apply(this,arguments)}class Jm{constructor(h,p){this.resolver=p,this.auth=function fd(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return Kn(Yo(this.auth),this.resolver.resolveSignIn(h))}}class ps{constructor(h){this._delegate=h,this.multiFactor=function Zl(y){const h=(0,k.m9)(y);return ba.has(h)||ba.set(h,Da._fromUser(h)),ba.get(h)}(h)}static getOrCreate(h){return ps.USER_MAP.has(h)||ps.USER_MAP.set(h,new ps(h)),ps.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,g.Z)(function*(){return Kn(p.auth,gu(p._delegate,h))})()}linkWithPhoneNumber(h,p){var w=this;return(0,g.Z)(function*(){return pd(w.auth,function Au(y,h,p){return so.apply(this,arguments)}(w._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,g.Z)(function*(){return Kn(p.auth,function Ru(y,h,p){return Xl.apply(this,arguments)}(p._delegate,h,zi))})()}linkWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield Qh(pn(p.auth)),function Q(y,h,p){return function re(y,h,p){return De.apply(this,arguments)}(y,h,p)}(p._delegate,h,zi)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,g.Z)(function*(){return Kn(p.auth,Js(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return pd(this.auth,function Pa(y,h,p){return xu.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return Kn(this.auth,function bp(y,h,p){return La.apply(this,arguments)}(this._delegate,h,zi))}reauthenticateWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield Qh(pn(p.auth)),function T(y,h,p){return function x(y,h,p){return L.apply(this,arguments)}(y,h,p)}(p._delegate,h,zi)})()}sendEmailVerification(h){return function Cc(y,h){return Vo.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,g.Z)(function*(){return yield function fa(y,h){return ss.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function Ch(y,h){return Wn((0,k.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function Du(y,h){return Wn((0,k.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Fm(y,h){return oo.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Eu(y,h){return Bo.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function _u(y,h,p){return vu.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ps.USER_MAP=new WeakMap;const fo=V;let qi=(()=>{class y{constructor(p,w){if(this.app=p,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=p.options;fo(S,"invalid-api-key",{appName:p.name}),fo(S,"invalid-api-key",{appName:p.name});const P=typeof window<"u"?zi:void 0;this._delegate=w.initialize({options:{persistence:Xm(S,p.name),popupRedirectResolver:P}}),this._delegate._updateErrorMap(ve),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ps.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,w){!function ur(y,h,p){const w=pn(y);V(w._canInitEmulator,w,"emulator-config-failed"),V(/^https?:\/\//.test(h),w,"invalid-emulator-scheme");const S=!!p?.disableWarnings,P=bs(h),{host:q,port:ue}=function ns(y){const h=bs(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const w=p[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(w);if(S){const P=S[1];return{host:P,port:Cr(w.substr(P.length+1))}}{const[P,q]=w.split(":");return{host:P,port:Cr(q)}}}(h);w.config.emulator={url:`${P}//${q}${null===ue?"":`:${ue}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:q,port:ue,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function Ts(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,w)}applyActionCode(p){return function ma(y,h){return Uo.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return ya(this._delegate,p)}confirmPasswordReset(p,w){return function Xr(y,h,p){return ga.apply(this,arguments)}(this._delegate,p,w)}createUserWithEmailAndPassword(p,w){var S=this;return(0,g.Z)(function*(){return Kn(S._delegate,function Ui(y,h,p){return _a.apply(this,arguments)}(S._delegate,p,w))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function yu(y,h){return wa.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function bc(y,h){return"EMAIL_SIGNIN"===_i.parseLink(h)?.operation}(0,p)}getRedirectResult(){var p=this;return(0,g.Z)(function*(){fo(qa(),p._delegate,"operation-not-supported-in-this-environment");const w=yield function Be(y,h){return ct.apply(this,arguments)}(p._delegate,zi);return w?Kn(p._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function Ln(y,h){pn(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,w,S){const{next:P,error:q,complete:ue}=Op(p,w,S);return this._delegate.onAuthStateChanged(P,q,ue)}onIdTokenChanged(p,w,S){const{next:P,error:q,complete:ue}=Op(p,w,S);return this._delegate.onIdTokenChanged(P,q,ue)}sendSignInLinkToEmail(p,w){return function cs(y,h,p){return Dc.apply(this,arguments)}(this._delegate,p,w)}sendPasswordResetEmail(p,w){return function pa(y,h,p){return Rs.apply(this,arguments)}(this._delegate,p,w||void 0)}setPersistence(p){var w=this;return(0,g.Z)(function*(){let S;switch(function b0(y,h){Za(Object.values(si).includes(h),y,"invalid-persistence-type"),(0,k.b$)()?Za(h!==si.SESSION,y,"unsupported-persistence-type"):(0,k.UG)()?Za(h===si.NONE,y,"unsupported-persistence-type"):za()?Za(h===si.NONE||h===si.LOCAL&&(0,k.hl)(),y,"unsupported-persistence-type"):Za(h===si.NONE||Km(),y,"unsupported-persistence-type")}(w._delegate,p),p){case si.SESSION:S=no;break;case si.LOCAL:S=(yield se(ni)._isAvailable())?ni:Ca;break;case si.NONE:S=Qt;break;default:return Ce("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return Kn(this._delegate,function Bl(y){return bh.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return Kn(this._delegate,In(this._delegate,p))}signInWithCustomToken(p){return Kn(this._delegate,function Ee(y,h){return Ft.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,w){return Kn(this._delegate,function Xs(y,h,p){return In((0,k.m9)(y),Mo.credential(h,p))}(this._delegate,p,w))}signInWithEmailLink(p,w){return Kn(this._delegate,function $l(y,h,p){return va.apply(this,arguments)}(this._delegate,p,w))}signInWithPhoneNumber(p,w){return pd(this._delegate,function xr(y,h,p){return pr.apply(this,arguments)}(this._delegate,p,w))}signInWithPopup(p){var w=this;return(0,g.Z)(function*(){return fo(qa(),w._delegate,"operation-not-supported-in-this-environment"),Kn(w._delegate,function Na(y,h,p){return Oa.apply(this,arguments)}(w._delegate,p,zi))})()}signInWithRedirect(p){var w=this;return(0,g.Z)(function*(){return fo(qa(),w._delegate,"operation-not-supported-in-this-environment"),yield Qh(w._delegate),function Nu(y,h,p){return function td(y,h,p){return D.apply(this,arguments)}(y,h,p)}(w._delegate,p,zi)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function Ps(y,h){return jn.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=si,y})();function Op(y,h,p){let w=y;"function"!=typeof y&&({next:w,error:h,complete:p}=y);const S=w;return{next:q=>S(q&&ps.getOrCreate(q)),error:h,complete:p}}function Xm(y,h){const p=function ju(y,h){const p=Jh();if(!p)return[];const w=zn(Wa,y,h);switch(p.getItem(w)){case si.NONE:return[Qt];case si.LOCAL:return[ni,no];case si.SESSION:return[no];default:return[]}}(y,h);if(typeof self<"u"&&!p.includes(ni)&&p.push(ni),typeof window<"u")for(const w of[Ca,no])p.includes(w)||p.push(w);return p.includes(Qt)||p.push(Qt),p}class ef{constructor(){this.providerId="phone",this._delegate=new qo(Yo(X.Z.auth()))}static credential(h,p){return qo.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}ef.PHONE_SIGN_IN_METHOD=qo.PHONE_SIGN_IN_METHOD,ef.PROVIDER_ID=qo.PROVIDER_ID;const ey=V;class tf{constructor(h,p,w=X.Z.app()){var S;ey(null===(S=w.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new Hi(h,p,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Lp(y){y.INTERNAL.registerComponent(new ce.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),w=h.getProvider("auth");return new qi(p,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Mo,FacebookAuthProvider:Po,GithubAuthProvider:Ll,GoogleAuthProvider:da,OAuthProvider:Ro,SAMLAuthProvider:Ar,PhoneAuthProvider:ef,PhoneMultiFactorGenerator:y0,RecaptchaVerifier:tf,TwitterAuthProvider:Ul,Auth:qi,AuthCredential:Ws,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.18")}(X.Z)},9751:(st,Te,O)=>{O.d(Te,{y:()=>he});var g=O(2961),X=O(727),k=O(8822),ae=O(9635),ie=O(2416),de=O(576),ce=O(2806);let he=(()=>{class K{constructor(Ae){Ae&&(this._subscribe=Ae)}lift(Ae){const ve=new K;return ve.source=this,ve.operator=Ae,ve}subscribe(Ae,ve,Je){const me=function j(K){return K&&K instanceof g.Lv||function B(K){return K&&(0,de.m)(K.next)&&(0,de.m)(K.error)&&(0,de.m)(K.complete)}(K)&&(0,X.Nn)(K)}(Ae)?Ae:new g.Hp(Ae,ve,Je);return(0,ce.x)(()=>{const{operator:fe,source:Ye}=this;me.add(fe?fe.call(me,Ye):Ye?this._subscribe(me):this._trySubscribe(me))}),me}_trySubscribe(Ae){try{return this._subscribe(Ae)}catch(ve){Ae.error(ve)}}forEach(Ae,ve){return new(ve=pe(ve))((Je,me)=>{const fe=new g.Hp({next:Ye=>{try{Ae(Ye)}catch(rt){me(rt),fe.unsubscribe()}},error:me,complete:Je});this.subscribe(fe)})}_subscribe(Ae){var ve;return null===(ve=this.source)||void 0===ve?void 0:ve.subscribe(Ae)}[k.L](){return this}pipe(...Ae){return(0,ae.U)(Ae)(this)}toPromise(Ae){return new(Ae=pe(Ae))((ve,Je)=>{let me;this.subscribe(fe=>me=fe,fe=>Je(fe),()=>ve(me))})}}return K.create=Fe=>new K(Fe),K})();function pe(K){var Fe;return null!==(Fe=K??ie.v.Promise)&&void 0!==Fe?Fe:Promise}},7579:(st,Te,O)=>{O.d(Te,{x:()=>ce});var g=O(9751),X=O(727);const ae=(0,O(3888).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=O(8737),de=O(2806);let ce=(()=>{class pe extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const K=new he(this,this);return K.operator=j,K}_throwIfClosed(){if(this.closed)throw new ae}next(j){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const K of this.currentObservers)K.next(j)}})}error(j){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:K}=this;for(;K.length;)K.shift().error(j)}})}complete(){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:K,isStopped:Fe,observers:Ae}=this;return K||Fe?X.Lc:(this.currentObservers=null,Ae.push(j),new X.w0(()=>{this.currentObservers=null,(0,ie.P)(Ae,j)}))}_checkFinalizedStatuses(j){const{hasError:K,thrownError:Fe,isStopped:Ae}=this;K?j.error(Fe):Ae&&j.complete()}asObservable(){const j=new g.y;return j.source=this,j}}return pe.create=(B,j)=>new he(B,j),pe})();class he extends ce{constructor(B,j){super(),this.destination=B,this.source=j}next(B){var j,K;null===(K=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===K||K.call(j,B)}error(B){var j,K;null===(K=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===K||K.call(j,B)}complete(){var B,j;null===(j=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===j||j.call(B)}_subscribe(B){var j,K;return null!==(K=null===(j=this.source)||void 0===j?void 0:j.subscribe(B))&&void 0!==K?K:X.Lc}}},2961:(st,Te,O)=>{O.d(Te,{Hp:()=>Je,Lv:()=>K});var g=O(576),X=O(727),k=O(2416),ae=O(7849);function ie(){}const de=pe("C",void 0,void 0);function pe(Ce,_e,Ie){return{kind:Ce,value:_e,error:Ie}}var B=O(3410),j=O(2806);class K extends X.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,X.Nn)(_e)&&_e.add(this)):this.destination=rt}static create(_e,Ie,Ve){return new Je(_e,Ie,Ve)}next(_e){this.isStopped?Ye(function he(Ce){return pe("N",Ce,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?Ye(function ce(Ce){return pe("E",void 0,Ce)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?Ye(de,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Fe=Function.prototype.bind;function Ae(Ce,_e){return Fe.call(Ce,_e)}class ve{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(_e)}catch(Ve){me(Ve)}}error(_e){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(_e)}catch(Ve){me(Ve)}else me(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(Ie){me(Ie)}}}class Je extends K{constructor(_e,Ie,Ve){let je;if(super(),(0,g.m)(_e)||!_e)je={next:_e??void 0,error:Ie??void 0,complete:Ve??void 0};else{let V;this&&k.v.useDeprecatedNextContext?(V=Object.create(_e),V.unsubscribe=()=>this.unsubscribe(),je={next:_e.next&&Ae(_e.next,V),error:_e.error&&Ae(_e.error,V),complete:_e.complete&&Ae(_e.complete,V)}):je=_e}this.destination=new ve(je)}}function me(Ce){k.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(Ce):(0,ae.h)(Ce)}function Ye(Ce,_e){const{onStoppedNotification:Ie}=k.v;Ie&&B.z.setTimeout(()=>Ie(Ce,_e))}const rt={closed:!0,next:ie,error:function fe(Ce){throw Ce},complete:ie}},727:(st,Te,O)=>{O.d(Te,{Lc:()=>de,w0:()=>ie,Nn:()=>ce});var g=O(576);const k=(0,O(3888).d)(pe=>function(j){pe(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((K,Fe)=>`${Fe+1}) ${K.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var ae=O(8737);class ie{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Ae of j)Ae.remove(this);else j.remove(this);const{initialTeardown:K}=this;if((0,g.m)(K))try{K()}catch(Ae){B=Ae instanceof k?Ae.errors:[Ae]}const{_finalizers:Fe}=this;if(Fe){this._finalizers=null;for(const Ae of Fe)try{he(Ae)}catch(ve){B=B??[],ve instanceof k?B=[...B,...ve.errors]:B.push(ve)}}if(B)throw new k(B)}}add(B){var j;if(B&&B!==this)if(this.closed)he(B);else{if(B instanceof ie){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(B)}}_hasParent(B){const{_parentage:j}=this;return j===B||Array.isArray(j)&&j.includes(B)}_addParent(B){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(B),j):j?[j,B]:B}_removeParent(B){const{_parentage:j}=this;j===B?this._parentage=null:Array.isArray(j)&&(0,ae.P)(j,B)}remove(B){const{_finalizers:j}=this;j&&(0,ae.P)(j,B),B instanceof ie&&B._removeParent(this)}}ie.EMPTY=(()=>{const pe=new ie;return pe.closed=!0,pe})();const de=ie.EMPTY;function ce(pe){return pe instanceof ie||pe&&"closed"in pe&&(0,g.m)(pe.remove)&&(0,g.m)(pe.add)&&(0,g.m)(pe.unsubscribe)}function he(pe){(0,g.m)(pe)?pe():pe.unsubscribe()}},2416:(st,Te,O)=>{O.d(Te,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(st,Te,O)=>{O.d(Te,{E:()=>X});const X=new(O(9751).y)(ie=>ie.complete())},8996:(st,Te,O)=>{O.d(Te,{D:()=>_e});var g=O(8421),X=O(5363),k=O(9468),de=O(9751),he=O(2202),pe=O(576),B=O(9672);function K(Ie,Ve){if(!Ie)throw new Error("Iterable cannot be null");return new de.y(je=>{(0,B.f)(je,Ve,()=>{const V=Ie[Symbol.asyncIterator]();(0,B.f)(je,Ve,()=>{V.next().then(ge=>{ge.done?je.complete():je.next(ge.value)})},0,!0)})})}var Fe=O(3670),Ae=O(8239),ve=O(1144),Je=O(6495),me=O(2206),fe=O(4532),Ye=O(3260);function _e(Ie,Ve){return Ve?function Ce(Ie,Ve){if(null!=Ie){if((0,Fe.c)(Ie))return function ae(Ie,Ve){return(0,g.Xf)(Ie).pipe((0,k.R)(Ve),(0,X.Q)(Ve))}(Ie,Ve);if((0,ve.z)(Ie))return function ce(Ie,Ve){return new de.y(je=>{let V=0;return Ve.schedule(function(){V===Ie.length?je.complete():(je.next(Ie[V++]),je.closed||this.schedule())})})}(Ie,Ve);if((0,Ae.t)(Ie))return function ie(Ie,Ve){return(0,g.Xf)(Ie).pipe((0,k.R)(Ve),(0,X.Q)(Ve))}(Ie,Ve);if((0,me.D)(Ie))return K(Ie,Ve);if((0,Je.T)(Ie))return function j(Ie,Ve){return new de.y(je=>{let V;return(0,B.f)(je,Ve,()=>{V=Ie[he.h](),(0,B.f)(je,Ve,()=>{let ge,W;try{({value:ge,done:W}=V.next())}catch(J){return void je.error(J)}W?je.complete():je.next(ge)},0,!0)}),()=>(0,pe.m)(V?.return)&&V.return()})}(Ie,Ve);if((0,Ye.L)(Ie))return function rt(Ie,Ve){return K((0,Ye.Q)(Ie),Ve)}(Ie,Ve)}throw(0,fe.z)(Ie)}(Ie,Ve):(0,g.Xf)(Ie)}},8421:(st,Te,O)=>{O.d(Te,{Xf:()=>Fe});var g=O(655),X=O(1144),k=O(8239),ae=O(9751),ie=O(3670),de=O(2206),ce=O(4532),he=O(6495),pe=O(3260),B=O(576),j=O(7849),K=O(8822);function Fe(Ce){if(Ce instanceof ae.y)return Ce;if(null!=Ce){if((0,ie.c)(Ce))return function Ae(Ce){return new ae.y(_e=>{const Ie=Ce[K.L]();if((0,B.m)(Ie.subscribe))return Ie.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ce);if((0,X.z)(Ce))return function ve(Ce){return new ae.y(_e=>{for(let Ie=0;Ie<Ce.length&&!_e.closed;Ie++)_e.next(Ce[Ie]);_e.complete()})}(Ce);if((0,k.t)(Ce))return function Je(Ce){return new ae.y(_e=>{Ce.then(Ie=>{_e.closed||(_e.next(Ie),_e.complete())},Ie=>_e.error(Ie)).then(null,j.h)})}(Ce);if((0,de.D)(Ce))return fe(Ce);if((0,he.T)(Ce))return function me(Ce){return new ae.y(_e=>{for(const Ie of Ce)if(_e.next(Ie),_e.closed)return;_e.complete()})}(Ce);if((0,pe.L)(Ce))return function Ye(Ce){return fe((0,pe.Q)(Ce))}(Ce)}throw(0,ce.z)(Ce)}function fe(Ce){return new ae.y(_e=>{(function rt(Ce,_e){var Ie,Ve,je,V;return(0,g.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,g.KL)(Ce);!(Ve=yield Ie.next()).done;)if(_e.next(Ve.value),_e.closed)return}catch(ge){je={error:ge}}finally{try{Ve&&!Ve.done&&(V=Ie.return)&&(yield V.call(Ie))}finally{if(je)throw je.error}}_e.complete()})})(Ce,_e).catch(Ie=>_e.error(Ie))})}},6451:(st,Te,O)=>{O.d(Te,{T:()=>de});var g=O(8189),X=O(8421),k=O(515),ae=O(7669),ie=O(8996);function de(...ce){const he=(0,ae.yG)(ce),pe=(0,ae._6)(ce,1/0),B=ce;return B.length?1===B.length?(0,X.Xf)(B[0]):(0,g.J)(pe)((0,ie.D)(B,he)):k.E}},5403:(st,Te,O)=>{O.d(Te,{x:()=>X});var g=O(2961);function X(ae,ie,de,ce,he){return new k(ae,ie,de,ce,he)}class k extends g.Lv{constructor(ie,de,ce,he,pe,B){super(ie),this.onFinalize=pe,this.shouldUnsubscribe=B,this._next=de?function(j){try{de(j)}catch(K){ie.error(K)}}:super._next,this._error=he?function(j){try{he(j)}catch(K){ie.error(K)}finally{this.unsubscribe()}}:super._error,this._complete=ce?function(){try{ce()}catch(j){ie.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:de}=this;super.unsubscribe(),!de&&(null===(ie=this.onFinalize)||void 0===ie||ie.call(this))}}}},4004:(st,Te,O)=>{O.d(Te,{U:()=>k});var g=O(4482),X=O(5403);function k(ae,ie){return(0,g.e)((de,ce)=>{let he=0;de.subscribe((0,X.x)(ce,pe=>{ce.next(ae.call(ie,pe,he++))}))})}},8189:(st,Te,O)=>{O.d(Te,{J:()=>k});var g=O(5577),X=O(4671);function k(ae=1/0){return(0,g.z)(X.y,ae)}},5577:(st,Te,O)=>{O.d(Te,{z:()=>he});var g=O(4004),X=O(8421),k=O(4482),ae=O(9672),ie=O(5403),ce=O(576);function he(pe,B,j=1/0){return(0,ce.m)(B)?he((K,Fe)=>(0,g.U)((Ae,ve)=>B(K,Ae,Fe,ve))((0,X.Xf)(pe(K,Fe))),j):("number"==typeof B&&(j=B),(0,k.e)((K,Fe)=>function de(pe,B,j,K,Fe,Ae,ve,Je){const me=[];let fe=0,Ye=0,rt=!1;const Ce=()=>{rt&&!me.length&&!fe&&B.complete()},_e=Ve=>fe<K?Ie(Ve):me.push(Ve),Ie=Ve=>{Ae&&B.next(Ve),fe++;let je=!1;(0,X.Xf)(j(Ve,Ye++)).subscribe((0,ie.x)(B,V=>{Fe?.(V),Ae?_e(V):B.next(V)},()=>{je=!0},void 0,()=>{if(je)try{for(fe--;me.length&&fe<K;){const V=me.shift();ve?(0,ae.f)(B,ve,()=>Ie(V)):Ie(V)}Ce()}catch(V){B.error(V)}}))};return pe.subscribe((0,ie.x)(B,_e,()=>{rt=!0,Ce()})),()=>{Je?.()}}(K,Fe,pe,j)))}},5363:(st,Te,O)=>{O.d(Te,{Q:()=>ae});var g=O(9672),X=O(4482),k=O(5403);function ae(ie,de=0){return(0,X.e)((ce,he)=>{ce.subscribe((0,k.x)(he,pe=>(0,g.f)(he,ie,()=>he.next(pe),de),()=>(0,g.f)(he,ie,()=>he.complete(),de),pe=>(0,g.f)(he,ie,()=>he.error(pe),de)))})}},3099:(st,Te,O)=>{O.d(Te,{B:()=>ie});var g=O(8421),X=O(7579),k=O(2961),ae=O(4482);function ie(ce={}){const{connector:he=(()=>new X.x),resetOnError:pe=!0,resetOnComplete:B=!0,resetOnRefCountZero:j=!0}=ce;return K=>{let Fe,Ae,ve,Je=0,me=!1,fe=!1;const Ye=()=>{Ae?.unsubscribe(),Ae=void 0},rt=()=>{Ye(),Fe=ve=void 0,me=fe=!1},Ce=()=>{const _e=Fe;rt(),_e?.unsubscribe()};return(0,ae.e)((_e,Ie)=>{Je++,!fe&&!me&&Ye();const Ve=ve=ve??he();Ie.add(()=>{Je--,0===Je&&!fe&&!me&&(Ae=de(Ce,j))}),Ve.subscribe(Ie),!Fe&&Je>0&&(Fe=new k.Hp({next:je=>Ve.next(je),error:je=>{fe=!0,Ye(),Ae=de(rt,pe,je),Ve.error(je)},complete:()=>{me=!0,Ye(),Ae=de(rt,B),Ve.complete()}}),(0,g.Xf)(_e).subscribe(Fe))})(K)}}function de(ce,he,...pe){if(!0===he)return void ce();if(!1===he)return;const B=new k.Hp({next:()=>{B.unsubscribe(),ce()}});return he(...pe).subscribe(B)}},9468:(st,Te,O)=>{O.d(Te,{R:()=>X});var g=O(4482);function X(k,ae=0){return(0,g.e)((ie,de)=>{de.add(k.schedule(()=>ie.subscribe(de),ae))})}},8505:(st,Te,O)=>{O.d(Te,{b:()=>ie});var g=O(576),X=O(4482),k=O(5403),ae=O(4671);function ie(de,ce,he){const pe=(0,g.m)(de)||ce||he?{next:de,error:ce,complete:he}:de;return pe?(0,X.e)((B,j)=>{var K;null===(K=pe.subscribe)||void 0===K||K.call(pe);let Fe=!0;B.subscribe((0,k.x)(j,Ae=>{var ve;null===(ve=pe.next)||void 0===ve||ve.call(pe,Ae),j.next(Ae)},()=>{var Ae;Fe=!1,null===(Ae=pe.complete)||void 0===Ae||Ae.call(pe),j.complete()},Ae=>{var ve;Fe=!1,null===(ve=pe.error)||void 0===ve||ve.call(pe,Ae),j.error(Ae)},()=>{var Ae,ve;Fe&&(null===(Ae=pe.unsubscribe)||void 0===Ae||Ae.call(pe)),null===(ve=pe.finalize)||void 0===ve||ve.call(pe)}))}):ae.y}},4408:(st,Te,O)=>{O.d(Te,{o:()=>ie});var g=O(727);class X extends g.w0{constructor(ce,he){super()}schedule(ce,he=0){return this}}const k={setInterval(de,ce,...he){const{delegate:pe}=k;return pe?.setInterval?pe.setInterval(de,ce,...he):setInterval(de,ce,...he)},clearInterval(de){const{delegate:ce}=k;return(ce?.clearInterval||clearInterval)(de)},delegate:void 0};var ae=O(8737);class ie extends X{constructor(ce,he){super(ce,he),this.scheduler=ce,this.work=he,this.pending=!1}schedule(ce,he=0){if(this.closed)return this;this.state=ce;const pe=this.id,B=this.scheduler;return null!=pe&&(this.id=this.recycleAsyncId(B,pe,he)),this.pending=!0,this.delay=he,this.id=this.id||this.requestAsyncId(B,this.id,he),this}requestAsyncId(ce,he,pe=0){return k.setInterval(ce.flush.bind(ce,this),pe)}recycleAsyncId(ce,he,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return he;k.clearInterval(he)}execute(ce,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(ce,he);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ce,he){let B,pe=!1;try{this.work(ce)}catch(j){pe=!0,B=j||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:ce,scheduler:he}=this,{actions:pe}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(pe,this),null!=ce&&(this.id=this.recycleAsyncId(he,ce,null)),this.delay=null,super.unsubscribe()}}}},7565:(st,Te,O)=>{O.d(Te,{v:()=>k});var g=O(6063);class X{constructor(ie,de=X.now){this.schedulerActionCtor=ie,this.now=de}schedule(ie,de=0,ce){return new this.schedulerActionCtor(this,ie).schedule(ce,de)}}X.now=g.l.now;class k extends X{constructor(ie,de=X.now){super(ie,de),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ie){const{actions:de}=this;if(this._active)return void de.push(ie);let ce;this._active=!0;do{if(ce=ie.execute(ie.state,ie.delay))break}while(ie=de.shift());if(this._active=!1,ce){for(;ie=de.shift();)ie.unsubscribe();throw ce}}}},4986:(st,Te,O)=>{O.d(Te,{z:()=>k});var g=O(4408);const k=new(O(7565).v)(g.o)},6063:(st,Te,O)=>{O.d(Te,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(st,Te,O)=>{O.d(Te,{z:()=>g});const g={setTimeout(X,k,...ae){const{delegate:ie}=g;return ie?.setTimeout?ie.setTimeout(X,k,...ae):setTimeout(X,k,...ae)},clearTimeout(X){const{delegate:k}=g;return(k?.clearTimeout||clearTimeout)(X)},delegate:void 0}},2202:(st,Te,O)=>{O.d(Te,{h:()=>X});const X=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(st,Te,O)=>{O.d(Te,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(st,Te,O)=>{O.d(Te,{_6:()=>de,jO:()=>ae,yG:()=>ie});var g=O(576);function k(ce){return ce[ce.length-1]}function ae(ce){return(0,g.m)(k(ce))?ce.pop():void 0}function ie(ce){return function X(ce){return ce&&(0,g.m)(ce.schedule)}(k(ce))?ce.pop():void 0}function de(ce,he){return"number"==typeof k(ce)?ce.pop():he}},8737:(st,Te,O)=>{function g(X,k){if(X){const ae=X.indexOf(k);0<=ae&&X.splice(ae,1)}}O.d(Te,{P:()=>g})},3888:(st,Te,O)=>{function g(X){const ae=X(ie=>{Error.call(ie),ie.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}O.d(Te,{d:()=>g})},2806:(st,Te,O)=>{O.d(Te,{O:()=>ae,x:()=>k});var g=O(2416);let X=null;function k(ie){if(g.v.useDeprecatedSynchronousErrorHandling){const de=!X;if(de&&(X={errorThrown:!1,error:null}),ie(),de){const{errorThrown:ce,error:he}=X;if(X=null,ce)throw he}}else ie()}function ae(ie){g.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=ie)}},9672:(st,Te,O)=>{function g(X,k,ae,ie=0,de=!1){const ce=k.schedule(function(){ae(),de?X.add(this.schedule(null,ie)):this.unsubscribe()},ie);if(X.add(ce),!de)return ce}O.d(Te,{f:()=>g})},4671:(st,Te,O)=>{function g(X){return X}O.d(Te,{y:()=>g})},1144:(st,Te,O)=>{O.d(Te,{z:()=>g});const g=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(st,Te,O)=>{O.d(Te,{D:()=>X});var g=O(576);function X(k){return Symbol.asyncIterator&&(0,g.m)(k?.[Symbol.asyncIterator])}},576:(st,Te,O)=>{function g(X){return"function"==typeof X}O.d(Te,{m:()=>g})},3670:(st,Te,O)=>{O.d(Te,{c:()=>k});var g=O(8822),X=O(576);function k(ae){return(0,X.m)(ae[g.L])}},6495:(st,Te,O)=>{O.d(Te,{T:()=>k});var g=O(2202),X=O(576);function k(ae){return(0,X.m)(ae?.[g.h])}},8239:(st,Te,O)=>{O.d(Te,{t:()=>X});var g=O(576);function X(k){return(0,g.m)(k?.then)}},3260:(st,Te,O)=>{O.d(Te,{L:()=>ae,Q:()=>k});var g=O(655),X=O(576);function k(ie){return(0,g.FC)(this,arguments,function*(){const ce=ie.getReader();try{for(;;){const{value:he,done:pe}=yield(0,g.qq)(ce.read());if(pe)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(he)}}finally{ce.releaseLock()}})}function ae(ie){return(0,X.m)(ie?.getReader)}},4482:(st,Te,O)=>{O.d(Te,{A:()=>X,e:()=>k});var g=O(576);function X(ae){return(0,g.m)(ae?.lift)}function k(ae){return ie=>{if(X(ie))return ie.lift(function(de){try{return ae(de,this)}catch(ce){this.error(ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(st,Te,O)=>{O.d(Te,{U:()=>k,z:()=>X});var g=O(4671);function X(...ae){return k(ae)}function k(ae){return 0===ae.length?g.y:1===ae.length?ae[0]:function(de){return ae.reduce((ce,he)=>he(ce),de)}}},7849:(st,Te,O)=>{O.d(Te,{h:()=>k});var g=O(2416),X=O(3410);function k(ae){X.z.setTimeout(()=>{const{onUnhandledError:ie}=g.v;if(!ie)throw ae;ie(ae)})}},4532:(st,Te,O)=>{function g(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(Te,{z:()=>g})},655:(st,Te,O)=>{function ae(W,J){var se={};for(var ne in W)Object.prototype.hasOwnProperty.call(W,ne)&&J.indexOf(ne)<0&&(se[ne]=W[ne]);if(null!=W&&"function"==typeof Object.getOwnPropertySymbols){var Oe=0;for(ne=Object.getOwnPropertySymbols(W);Oe<ne.length;Oe++)J.indexOf(ne[Oe])<0&&Object.prototype.propertyIsEnumerable.call(W,ne[Oe])&&(se[ne[Oe]]=W[ne[Oe]])}return se}function he(W,J,se,ne){return new(se||(se=Promise))(function(ke,ut){function zt(tn){try{ze(ne.next(tn))}catch(Cn){ut(Cn)}}function $t(tn){try{ze(ne.throw(tn))}catch(Cn){ut(Cn)}}function ze(tn){tn.done?ke(tn.value):function Oe(ke){return ke instanceof se?ke:new se(function(ut){ut(ke)})}(tn.value).then(zt,$t)}ze((ne=ne.apply(W,J||[])).next())})}function me(W){return this instanceof me?(this.v=W,this):new me(W)}function fe(W,J,se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Oe,ne=se.apply(W,J||[]),ke=[];return Oe={},ut("next"),ut("throw"),ut("return"),Oe[Symbol.asyncIterator]=function(){return this},Oe;function ut(Wt){ne[Wt]&&(Oe[Wt]=function(Kt){return new Promise(function(br,Nt){ke.push([Wt,Kt,br,Nt])>1||zt(Wt,Kt)})})}function zt(Wt,Kt){try{!function $t(Wt){Wt.value instanceof me?Promise.resolve(Wt.value.v).then(ze,tn):Cn(ke[0][2],Wt)}(ne[Wt](Kt))}catch(br){Cn(ke[0][3],br)}}function ze(Wt){zt("next",Wt)}function tn(Wt){zt("throw",Wt)}function Cn(Wt,Kt){Wt(Kt),ke.shift(),ke.length&&zt(ke[0][0],ke[0][1])}}function rt(W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,J=W[Symbol.asyncIterator];return J?J.call(W):(W=function K(W){var J="function"==typeof Symbol&&Symbol.iterator,se=J&&W[J],ne=0;if(se)return se.call(W);if(W&&"number"==typeof W.length)return{next:function(){return W&&ne>=W.length&&(W=void 0),{value:W&&W[ne++],done:!W}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")}(W),se={},ne("next"),ne("throw"),ne("return"),se[Symbol.asyncIterator]=function(){return this},se);function ne(ke){se[ke]=W[ke]&&function(ut){return new Promise(function(zt,$t){!function Oe(ke,ut,zt,$t){Promise.resolve($t).then(function(ze){ke({value:ze,done:zt})},ut)}(zt,$t,(ut=W[ke](ut)).done,ut.value)})}}}O.d(Te,{FC:()=>fe,KL:()=>rt,_T:()=>ae,mG:()=>he,qq:()=>me})},4650:(st,Te,O)=>{O.d(Te,{$8M:()=>ni,$Z:()=>By,AFp:()=>nh,AaK:()=>he,CHM:()=>Ms,CRH:()=>TE,CZH:()=>Gf,CqO:()=>I_,D6c:()=>ep,EJc:()=>FE,EpF:()=>_g,F4k:()=>w_,FYo:()=>yt,FiY:()=>re,G48:()=>QE,GfV:()=>$u,JOm:()=>zr,KtG:()=>Fo,LFG:()=>mn,LSH:()=>hd,Lbi:()=>LE,Lck:()=>OT,MAs:()=>sI,MMx:()=>Pf,NdJ:()=>uI,O4$:()=>jo,OlP:()=>jt,PXZ:()=>oC,Q6J:()=>m_,QGY:()=>vg,QP$:()=>Ht,Qsj:()=>dt,R0b:()=>Qi,RDi:()=>Lu,Rgc:()=>Wd,SBq:()=>ue,Sil:()=>Zf,Suo:()=>Ct,TTD:()=>Mo,TgZ:()=>_f,X6Q:()=>YE,XFs:()=>ht,Xpm:()=>F,Xts:()=>qa,Y36:()=>Zu,YKP:()=>iE,YNc:()=>gg,Yjl:()=>zn,Yz7:()=>Kt,ZZ4:()=>Dl,_UZ:()=>__,_Vd:()=>S,_c5:()=>wC,_uU:()=>M_,aQg:()=>pm,c2e:()=>na,cJS:()=>Nt,cg1:()=>Cf,dDg:()=>Wr,dqk:()=>Ke,eFA:()=>vl,eoX:()=>$E,f3M:()=>Nu,g9A:()=>rh,h0i:()=>yo,hGG:()=>gm,hij:()=>bf,iGM:()=>rm,ifc:()=>tt,ip1:()=>om,kL8:()=>$_,kcU:()=>Gl,lG2:()=>Qt,lqb:()=>Kn,lri:()=>Mv,oAB:()=>Ue,q4F:()=>Hu,qLn:()=>md,qZA:()=>mg,rWj:()=>Rv,sBO:()=>XE,sIi:()=>mf,s_b:()=>Lf,soG:()=>vo,tb:()=>uu,tp0:()=>Be,uIk:()=>f_,vHH:()=>ve,vpe:()=>_o,wAp:()=>vt,xp6:()=>Sy,z2F:()=>lh,zSh:()=>Yo,zs3:()=>Yc});var g=O(7579),X=O(727),k=O(9751),ae=O(6451),ie=O(3099);function de(i){for(let s in i)if(i[s]===de)return s;throw Error("Could not find renamed property on target object.")}function he(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(he).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function pe(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const B=de({__forward_ref__:de});function j(i){return i.__forward_ref__=j,i.toString=function(){return he(this())},i}function K(i){return function Fe(i){return"function"==typeof i&&i.hasOwnProperty(B)&&i.__forward_ref__===j}(i)?i():i}class ve extends Error{constructor(s,a){super(function Je(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}(s,a)),this.code=s}}function me(i){return"string"==typeof i?i:null==i?"":String(i)}function _e(i,s){throw new ve(-201,!1)}function $t(i,s){null==i&&function ze(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function Kt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Nt(i){return{providers:i.providers||[],imports:i.imports||[]}}function nn(i){return Eo(i,ki)||Eo(i,Qr)}function Eo(i,s){return i.hasOwnProperty(s)?i[s]:null}function Tr(i){return i&&(i.hasOwnProperty(es)||i.hasOwnProperty(Ni))?i[es]:null}const ki=de({\u0275prov:de}),es=de({\u0275inj:de}),Qr=de({ngInjectableDef:de}),Ni=de({ngInjectorDef:de});var ht=(()=>((ht=ht||{})[ht.Default=0]="Default",ht[ht.Host=1]="Host",ht[ht.Self=2]="Self",ht[ht.SkipSelf=4]="SkipSelf",ht[ht.Optional=8]="Optional",ht))();let on;function Sn(i){const s=on;return on=i,s}function Oi(i,s,a){const c=nn(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&ht.Optional?null:void 0!==s?s:void _e(he(i))}function An(i){return{toString:i}.toString()}var un=(()=>((un=un||{})[un.OnPush=0]="OnPush",un[un.Default=1]="Default",un))(),tt=(()=>{return(i=tt||(tt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",tt;var i})();const Ke=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),cn={},Ot=[],Bn=de({\u0275cmp:de}),Is=de({\u0275dir:de}),Yt=de({\u0275pipe:de}),Li=de({\u0275mod:de}),Vt=de({\u0275fac:de}),Z=de({__NG_ELEMENT_ID__:de});let $=0;function F(i){return An(()=>{const a=!0===i.standalone,c={},d={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===un.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||Ot,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||tt.Emulated,id:"c"+$++,styles:i.styles||Ot,_:null,setInput:null,schemas:i.schemas||null,tView:null},f=i.dependencies,_=i.features;return d.inputs=rn(i.inputs,c),d.outputs=rn(i.outputs),_&&_.forEach(I=>I(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(z).filter(be):null,d.pipeDefs=f?()=>("function"==typeof f?f():f).map(ln).filter(be):null,d})}function z(i){return Xe(i)||sn(i)}function be(i){return null!==i}function Ue(i){return An(()=>({type:i.type,bootstrap:i.bootstrap||Ot,declarations:i.declarations||Ot,imports:i.imports||Ot,exports:i.exports||Ot,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function rn(i,s){if(null==i)return cn;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=c,s&&(s[d]=f)}return a}const Qt=F;function zn(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Xe(i){return i[Bn]||null}function sn(i){return i[Is]||null}function ln(i){return i[Yt]||null}function tr(i,s){const a=i[Li]||null;if(!a&&!0===s)throw new Error(`Type ${he(i)} does not have '\u0275mod' property.`);return a}function Sr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Br(i){return Array.isArray(i)&&!0===i[1]}function So(i){return 0!=(8&i.flags)}function Ks(i){return 2==(2&i.flags)}function Ao(i){return 1==(1&i.flags)}function jr(i){return null!==i.template}function Eh(i){return 0!=(256&i[2])}function _i(i,s){return i.hasOwnProperty(Vt)?i[Vt]:null}class Ol{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function Mo(){return Fi}function Fi(i){return i.type.prototype.ngOnChanges&&(i.setInput=Ro),Ys}function Ys(){const i=da(this),s=i?.current;if(s){const a=i.previous;if(a===cn)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function Ro(i,s,a,c){const d=da(i)||function Ll(i,s){return i[Po]=s}(i,{previous:cn,current:null}),f=d.current||(d.current={}),_=d.previous,I=this.declaredInputs[a],E=_[I];f[I]=new Ol(E&&E.currentValue,s,_===cn),i[c]=s}Mo.ngInherit=!0;const Po="__ngSimpleChanges__";function da(i){return i[Po]||null}function Rn(i){for(;Array.isArray(i);)i=i[0];return i}function Hr(i,s){return Rn(s[i.index])}function fa(i,s){return i.data[s]}function cr(i,s){const a=s[i];return Sr(a)?a:a[0]}function No(i){return 4==(4&i[2])}function vi(i){return 64==(64&i[2])}function as(i,s){return null==s?null:i[s]}function us(i){i[18]=0}function Oo(i,s){i[5]+=s;let a=i,c=i[3];for(;null!==c&&(1===s&&1===a[5]||-1===s&&0===a[5]);)c[5]+=s,a=c,c=c[3]}const It={lFrame:wu(null),bindingsEnabled:!0};function xs(){return It.bindingsEnabled}function Ee(){return It.lFrame.lView}function Ft(){return It.lFrame.tView}function Ms(i){return It.lFrame.contextLView=i,i[8]}function Fo(i){return It.lFrame.contextLView=null,i}function dn(){let i=pa();for(;null!==i&&64===i.type;)i=i.parent;return i}function pa(){return It.lFrame.currentTNode}function Xr(i,s){const a=It.lFrame;a.currentTNode=i,a.isParent=s}function ga(){return It.lFrame.isParent}function Xs(){return It.lFrame.bindingIndex++}function $l(i,s){const a=It.lFrame;a.bindingIndex=a.bindingRootIndex=i,Tc(s)}function Tc(i){It.lFrame.currentDirectiveIndex=i}function yu(){return It.lFrame.currentQueryIndex}function wa(i){It.lFrame.currentQueryIndex=i}function Cc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function Vo(i,s,a){if(a&ht.SkipSelf){let d=s,f=i;for(;!(d=d.parent,null!==d||a&ht.Host||(d=Cc(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;s=d,i=f}const c=It.lFrame=vu();return c.currentTNode=s,c.lView=i,!0}function _u(i){const s=vu(),a=i[1];It.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function vu(){const i=It.lFrame,s=null===i?null:i.child;return null===s?wu(i):s}function wu(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Iu(){const i=It.lFrame;return It.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Eu=Iu;function Bo(){const i=Iu();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Wn(){return It.lFrame.selectedIndex}function ei(i){It.lFrame.selectedIndex=i}function gn(){const i=It.lFrame;return fa(i.tView,i.selectedIndex)}function jo(){It.lFrame.currentNamespace="svg"}function Gl(){!function Sc(){It.lFrame.currentNamespace=null}()}function bu(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:I,ngAfterViewInit:E,ngAfterViewChecked:C,ngOnDestroy:M}=f;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),I&&((i.contentHooks||(i.contentHooks=[])).push(a,I),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,I)),E&&(i.viewHooks||(i.viewHooks=[])).push(-a,E),C&&((i.viewHooks||(i.viewHooks=[])).push(a,C),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,C)),null!=M&&(i.destroyHooks||(i.destroyHooks=[])).push(a,M)}}function Sh(i,s,a){to(i,s,3,a)}function Ah(i,s,a,c){(3&i[2])===a&&to(i,s,a,c)}function Ia(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function to(i,s,a,c){const f=c??-1,_=s.length-1;let I=0;for(let E=void 0!==c?65535&i[18]:0;E<_;E++)if("number"==typeof s[E+1]){if(I=s[E],null!=c&&I>=c)break}else s[E]<0&&(i[18]+=65536),(I<f||-1==f)&&(Nm(i,a,s,E),i[18]=(4294901760&i[18])+E+2),E++}function Nm(i,s,a,c){const d=a[c]<0,f=a[c+1],I=i[d?-a[c]:a[c]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(I)}finally{}}}else try{f.call(I)}finally{}}class $o{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Da(i,s,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const f=a[c++],_=a[c++],I=a[c++];i.setAttribute(s,_,I,f)}else{const f=d,_=a[++c];Zl(f)?i.setProperty(s,f,_):i.setAttribute(s,f,_),c++}}return c}function ba(i){return 3===i||4===i||6===i}function Zl(i){return 64===i.charCodeAt(0)}function ks(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const d=s[c];"number"==typeof d?a=d:0===a||Wl(i,a,d,null,-1===a||2===a?s[++c]:null)}}return i}function Wl(i,s,a,c,d){let f=0,_=i.length;if(-1===s)_=-1;else for(;f<i.length;){const I=i[f++];if("number"==typeof I){if(I===s){_=-1;break}if(I>s){_=f-1;break}}}for(;f<i.length;){const I=i[f];if("number"==typeof I)break;if(I===a){if(null===c)return void(null!==d&&(i[f+1]=d));if(c===i[f+1])return void(i[f+2]=d)}f++,null!==c&&f++,null!==d&&f++}-1!==_&&(i.splice(_,0,s),f=_+1),i.splice(f++,0,a),null!==c&&i.splice(f++,0,c),null!==d&&i.splice(f++,0,d)}function Rh(i){return-1!==i}function Ta(i){return 32767&i}function lr(i,s){let a=function Ep(i){return i>>16}(i),c=s;for(;a>0;)c=c[15],a--;return c}let Ca=!0;function Kl(i){const s=Ca;return Ca=i,s}let qt=0;const dr={};function wr(i,s){const a=Sa(i,s);if(-1!==a)return a;const c=s[1];c.firstCreatePass&&(i.injectorIndex=s.length,hr(c.data,i),hr(s,null),hr(c.blueprint,null));const d=ls(i,s),f=i.injectorIndex;if(Rh(d)){const _=Ta(d),I=lr(d,s),E=I[1].data;for(let C=0;C<8;C++)s[f+C]=I[_+C]|E[_+C]}return s[f+8]=d,f}function hr(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Sa(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function ls(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=s;for(;null!==d;){if(c=Cu(d),null===c)return-1;if(a++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function ti(i,s,a){!function $e(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(Z)&&(c=a[Z]),null==c&&(c=a[Z]=qt++);const d=255&c;s.data[i+(d>>5)]|=1<<d}(i,s,a)}function Aa(i,s,a){if(a&ht.Optional)return i;_e()}function Ql(i,s,a,c){if(a&ht.Optional&&void 0===c&&(c=null),0==(a&(ht.Self|ht.Host))){const d=i[9],f=Sn(void 0);try{return d?d.get(s,c,a&ht.Optional):Oi(s,c,a&ht.Optional)}finally{Sn(f)}}return Aa(c,0,a)}function ro(i,s,a,c=ht.Default,d){if(null!==i){if(1024&s[2]){const _=function kh(i,s,a,c,d){let f=i,_=s;for(;null!==f&&null!==_&&1024&_[2]&&!(256&_[2]);){const I=Mc(f,_,a,c|ht.Self,dr);if(I!==dr)return I;let E=f.parent;if(!E){const C=_[21];if(C){const M=C.get(a,dr,c);if(M!==dr)return M}E=Cu(_),_=_[15]}f=E}return d}(i,s,a,c,dr);if(_!==dr)return _}const f=Mc(i,s,a,c,dr);if(f!==dr)return f}return Ql(s,a,c,d)}function Mc(i,s,a,c,d){const f=function Rc(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Z)?i[Z]:void 0;return"number"==typeof s?s>=0?255&s:Pn:s}(a);if("function"==typeof f){if(!Vo(s,i,c))return c&ht.Host?Aa(d,0,c):Ql(s,a,c,d);try{const _=f(c);if(null!=_||c&ht.Optional)return _;_e()}finally{Eu()}}else if("number"==typeof f){let _=null,I=Sa(i,s),E=-1,C=c&ht.Host?s[16][6]:null;for((-1===I||c&ht.SkipSelf)&&(E=-1===I?ls(i,s):s[I+8],-1!==E&&Tu(c,!1)?(_=s[1],I=Ta(E),s=lr(E,s)):I=-1);-1!==I;){const M=s[1];if(xa(f,I,M.data)){const N=io(I,s,a,_,c,C);if(N!==dr)return N}E=s[I+8],-1!==E&&Tu(c,s[1].data[I+8]===C)&&xa(f,I,s)?(_=M,I=Ta(E),s=lr(E,s)):I=-1}}return d}function io(i,s,a,c,d,f){const _=s[1],I=_.data[i+8],M=wi(I,_,a,null==c?Ks(I)&&Ca:c!=_&&0!=(3&I.type),d&ht.Host&&f===I);return null!==M?pt(s,_,M,I):dr}function wi(i,s,a,c,d){const f=i.providerIndexes,_=s.data,I=1048575&f,E=i.directiveStart,M=f>>20,G=d?I+M:i.directiveEnd;for(let ee=c?I:I+M;ee<G;ee++){const we=_[ee];if(ee<E&&a===we||ee>=E&&we.type===a)return ee}if(d){const ee=_[E];if(ee&&jr(ee)&&ee.type===a)return E}return null}function pt(i,s,a,c){let d=i[a];const f=s.data;if(function xh(i){return i instanceof $o}(d)){const _=d;_.resolving&&function Ye(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new ve(-200,`Circular dependency in DI detected for ${i}${a}`)}(function fe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():me(i)}(f[a]));const I=Kl(_.canSeeViewProviders);_.resolving=!0;const E=_.injectImpl?Sn(_.injectImpl):null;Vo(i,c,ht.Default);try{d=i[a]=_.factory(void 0,f,i,c),s.firstCreatePass&&a>=c.directiveStart&&function Ac(i,s,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:f}=s.type.prototype;if(c){const _=Fi(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==E&&Sn(E),Kl(I),_.resolving=!1,Eu()}}return d}function xa(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Tu(i,s){return!(i&ht.Self||i&ht.Host&&s)}class Ns{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return ro(this._tNode,this._lView,s,c,a)}}function Pn(){return new Ns(dn(),Ee())}function Cu(i){const s=i[1],a=s.type;return 2===a?s.declTNode:1===a?i[6]:null}function ni(i){return function Ph(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const f=a[d];if(ba(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(f===s)return a[d+1];d+=2}}}return null}(dn(),i)}const Ls="__parameters__";function ri(i,s,a){return An(()=>{const c=function Su(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(s);function d(...f){if(this instanceof d)return c.apply(this,f),this;const _=new d(...f);return I.annotation=_,I;function I(E,C,M){const N=E.hasOwnProperty(Ls)?E[Ls]:Object.defineProperty(E,Ls,{value:[]})[Ls];for(;N.length<=M;)N.push(null);return(N[M]=N[M]||[]).push(_),E}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class jt{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Kt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function xr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let c=i[a];Array.isArray(c)?(s===i&&(s=i.slice(0,a)),xr(c,s)):s!==i&&s.push(c)}return s}function pr(i,s){i.forEach(a=>Array.isArray(a)?pr(a,s):s(a))}function Au(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function so(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}const Us={},Vs="__NG_DI_FLAG__",Gi="ngTempTokenPath",Pu=/\n/gm,Rt="__source";let ir;function Zo(i){const s=ir;return ir=i,s}function Bs(i,s=ht.Default){if(void 0===ir)throw new ve(-203,!1);return null===ir?Oi(i,void 0,s):ir.get(i,s&ht.Optional?null:void 0,s)}function mn(i,s=ht.Default){return(function mi(){return on}()||Bs)(K(i),s)}function Nu(i,s=ht.Default){return"number"!=typeof s&&(s=0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)),mn(i,s)}function td(i){const s=[];for(let a=0;a<i.length;a++){const c=K(i[a]);if(Array.isArray(c)){if(0===c.length)throw new ve(900,!1);let d,f=ht.Default;for(let _=0;_<c.length;_++){const I=c[_],E=T(I);"number"==typeof E?-1===E?d=I.token:f|=E:d=I}s.push(mn(d,f))}else s.push(mn(c))}return s}function D(i,s){return i[Vs]=s,i.prototype[Vs]=s,i}function T(i){return i[Vs]}const re=D(ri("Optional"),8),Be=D(ri("SkipSelf"),4);let rd;function Lu(i){rd=i}class ad{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const Gh=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,ho=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Ln=(()=>((Ln=Ln||{})[Ln.NONE=0]="NONE",Ln[Ln.HTML=1]="HTML",Ln[Ln.STYLE=2]="STYLE",Ln[Ln.SCRIPT=3]="SCRIPT",Ln[Ln.URL=4]="URL",Ln[Ln.RESOURCE_URL=5]="RESOURCE_URL",Ln))();function hd(i){const s=function za(){const i=Ee();return i&&i[12]}();return s?s.sanitize(Ln.URL,i)||"":function Uc(i,s){const a=function Hh(i){return i instanceof ad&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?function lo(i){return i instanceof ad?i.changingThisBreaksApplicationSecurity:i}(i):function hs(i){return(i=String(i)).match(Gh)||i.match(ho)?i:"unsafe:"+i}(me(i))}const qa=new jt("ENVIRONMENT_INITIALIZER"),ii=new jt("INJECTOR",-1),Yh=new jt("INJECTOR_DEF_TYPES");class Hc{get(s,a=Us){if(a===Us){const c=new Error(`NullInjectorError: No provider for ${he(s)}!`);throw c.name="NullInjectorError",c}return a}}function Ym(...i){return{\u0275providers:si(0,i)}}function si(i,...s){const a=[],c=new Set;let d;return pr(s,f=>{const _=f;Wa(_,a,[],c)&&(d||(d=[]),d.push(_))}),void 0!==d&&Za(d,a),a}function Za(i,s){for(let a=0;a<i.length;a++){const{providers:d}=i[a];pr(d,f=>{s.push(f)})}}function Wa(i,s,a,c){if(!(i=K(i)))return!1;let d=null,f=Tr(i);const _=!f&&Xe(i);if(f||_){if(_&&!_.standalone)return!1;d=i}else{const E=i.ngModule;if(f=Tr(E),!f)return!1;d=E}const I=c.has(d);if(_){if(I)return!1;if(c.add(d),_.dependencies){const E="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const C of E)Wa(C,s,a,c)}}else{if(!f)return!1;{if(null!=f.imports&&!I){let C;c.add(d);try{pr(f.imports,M=>{Wa(M,s,a,c)&&(C||(C=[]),C.push(M))})}finally{}void 0!==C&&Za(C,s)}if(!I){const C=_i(d)||(()=>new d);s.push({provide:d,useFactory:C,deps:Ot},{provide:Yh,useValue:d,multi:!0},{provide:qa,useValue:()=>mn(d),multi:!0})}const E=f.providers;null==E||I||pr(E,M=>{s.push(M)})}}return d!==i&&void 0!==i.providers}const Qh=de({provide:String,useValue:de});function Ko(i){return null!==i&&"object"==typeof i&&Qh in i}function Ka(i){return"function"==typeof i}const Yo=new jt("Set Injector scope."),fd={},Qm={};let Xh;function Gc(){return void 0===Xh&&(Xh=new Hc),Xh}class Kn{}class pd extends Kn{constructor(s,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,tf(s,_=>this.processProvider(_)),this.records.set(ii,qi(void 0,this)),d.has("environment")&&this.records.set(Kn,qi(void 0,this));const f=this.records.get(Yo);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(Yh.multi,Ot,ht.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const a=Zo(this),c=Sn(void 0);try{return s()}finally{Zo(a),Sn(c)}}get(s,a=Us,c=ht.Default){this.assertNotDestroyed();const d=Zo(this),f=Sn(void 0);try{if(!(c&ht.SkipSelf)){let I=this.records.get(s);if(void 0===I){const E=function ef(i){return"function"==typeof i||"object"==typeof i&&i instanceof jt}(s)&&nn(s);I=E&&this.injectableDefInScope(E)?qi(gd(s),fd):null,this.records.set(s,I)}if(null!=I)return this.hydrate(s,I)}return(c&ht.Self?Gc():this.parent).get(s,a=c&ht.Optional&&a===Us?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[Gi]=_[Gi]||[]).unshift(he(s)),d)throw _;return function x(i,s,a,c){const d=i[Gi];throw s[Rt]&&d.unshift(s[Rt]),i.message=function L(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=he(s);if(Array.isArray(s))d=s.map(he).join(" -> ");else if("object"==typeof s){let f=[];for(let _ in s)if(s.hasOwnProperty(_)){let I=s[_];f.push(_+":"+("string"==typeof I?JSON.stringify(I):he(I)))}d=`{${f.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(Pu,"\n  ")}`}("\n"+i.message,d,a,c),i.ngTokenPath=d,i[Gi]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{Sn(f),Zo(d)}}resolveInjectorInitializers(){const s=Zo(this),a=Sn(void 0);try{const c=this.get(qa.multi,Ot,ht.Self);for(const d of c)d()}finally{Zo(s),Sn(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(he(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ve(205,!1)}processProvider(s){let a=Ka(s=K(s))?s:K(s&&s.provide);const c=function ps(i){return Ko(i)?qi(void 0,i.useValue):qi(function fo(i,s,a){let c;if(Ka(i)){const d=K(i);return _i(d)||gd(d)}if(Ko(i))c=()=>K(i.useValue);else if(function Jh(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...td(i.deps||[]));else if(function ju(i){return!(!i||!i.useExisting)}(i))c=()=>mn(K(i.useExisting));else{const d=K(i&&(i.useClass||i.provide));if(!function Op(i){return!!i.deps}(i))return _i(d)||gd(d);c=()=>new d(...td(i.deps))}return c}(i),fd)}(s);if(Ka(s)||!0!==s.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=qi(void 0,fd,!0),d.factory=()=>td(d.multi),this.records.set(a,d)),a=s,d.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===fd&&(a.value=Qm,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Xm(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=K(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function gd(i){const s=nn(i),a=null!==s?s.factory:_i(i);if(null!==a)return a;if(i instanceof jt)throw new ve(204,!1);if(i instanceof Function)return function Jm(i){const s=i.length;if(s>0)throw function Pa(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new ve(204,!1);const a=function Yr(i){const s=i&&(i[ki]||i[Qr]);if(s){const a=function vr(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new ve(204,!1)}function qi(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function ey(i){return!!i.\u0275providers}function tf(i,s){for(const a of i)Array.isArray(a)?tf(a,s):ey(a)?tf(a.\u0275providers,s):s(a)}class Lp{}class w{resolveComponentFactory(s){throw function y(i){const s=Error(`No component factory found for ${he(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let S=(()=>{class i{}return i.NULL=new w,i})();function P(){return q(dn(),Ee())}function q(i,s){return new ue(Hr(i,s))}let ue=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=P,i})();function Le(i){return i instanceof ue?i.nativeElement:i}class yt{}let dt=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Fn(){const i=Ee(),a=cr(dn().index,i);return(Sr(a)?a:i)[11]}(),i})(),Zi=(()=>{class i{}return i.\u0275prov=Kt({token:i,providedIn:"root",factory:()=>null}),i})();class $u{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Hu=new $u("14.1.2"),Qo={};function Fp(i){return i.ngOriginalError}class md{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Fp(s);for(;a&&Fp(a);)a=Fp(a);return a||null}}const uy=new Map;let k0=0;const Bp="__ngContext__";function Rr(i,s){Sr(s)?(i[Bp]=s[20],function N0(i){uy.set(i[20],i)}(s)):i[Bp]=s}function Zc(i){const s=i[Bp];return"number"==typeof s?function ly(i){return uy.get(i)||null}(s):s||null}function hy(i){const s=Zc(i);return s?Sr(s)?s:s.lView:null}const $D=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(Ke))();function Ya(i){return i instanceof Function?i():i}var zr=(()=>((zr=zr||{})[zr.Important=1]="Important",zr[zr.DashCase=2]="DashCase",zr))();function $p(i,s){return undefined(i,s)}function rf(i){const s=i[3];return Br(s)?s[3]:s}function my(i){return q0(i[13])}function yy(i){return q0(i[4])}function q0(i){for(;null!==i&&!Br(i);)i=i[4];return i}function _d(i,s,a,c,d){if(null!=c){let f,_=!1;Br(c)?f=c:Sr(c)&&(_=!0,c=c[0]);const I=Rn(c);0===i&&null!==a?null==d?oi(s,a,I):Wc(s,a,I,d||null,!0):1===i&&null!==a?Wc(s,a,I,d||null,!0):2===i?function Kp(i,s,a){const c=qp(i,s);c&&function zp(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,I,_):3===i&&s.destroyNode(I),null!=f&&function _A(i,s,a,c,d){const f=a[7];f!==Rn(a)&&_d(s,i,c,f,d);for(let I=10;I<a.length;I++){const E=a[I];Yp(E[1],E,i,s,c,f)}}(s,i,f,a,d)}}function Gp(i,s,a){return i.createElement(s,a)}function W0(i,s){const a=i[9],c=a.indexOf(s),d=s[3];512&s[2]&&(s[2]&=-513,Oo(d,-1)),a.splice(c,1)}function vy(i,s){if(i.length<=10)return;const a=10+s,c=i[a];if(c){const d=c[17];null!==d&&d!==i&&W0(d,c),s>0&&(i[a-1][4]=c[4]);const f=so(i,10+s);!function ZD(i,s){Yp(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(c[1],c);const _=f[19];null!==_&&_.detachView(f[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function K0(i,s){if(!(128&s[2])){const a=s[11];a.destroyNode&&Yp(i,s,a,3,null,null),function KD(i){let s=i[13];if(!s)return wy(i[1],i);for(;s;){let a=null;if(Sr(s))a=s[13];else{const c=s[10];c&&(a=c)}if(!a){for(;s&&!s[4]&&s!==i;)Sr(s)&&wy(s[1],s),s=s[3];null===s&&(s=i),Sr(s)&&wy(s[1],s),a=s&&s[4]}s=a}}(s)}}function wy(i,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function JD(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=s[a[c]];if(!(d instanceof $o)){const f=a[c+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const I=d[f[_]],E=f[_+1];try{E.call(I)}finally{}}else try{f.call(d)}finally{}}}}(i,s),function QD(i,s){const a=i.cleanup,c=s[7];let d=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const _=a[f+1],I="function"==typeof _?_(s):Rn(s[_]),E=c[d=a[f+2]],C=a[f+3];"boolean"==typeof C?I.removeEventListener(a[f],E,C):C>=0?c[d=C]():c[d=-C].unsubscribe(),f+=2}else{const _=c[d=a[f+1]];a[f].call(_)}if(null!==c){for(let f=d+1;f<c.length;f++)(0,c[f])();s[7]=null}}(i,s),1===s[1].type&&s[11].destroy();const a=s[17];if(null!==a&&Br(s[3])){a!==s[3]&&W0(a,s);const c=s[19];null!==c&&c.detachView(i)}!function FD(i){uy.delete(i[20])}(s)}}function Y0(i,s,a){return function Q0(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[0];if(2&c.flags){const d=i.data[c.directiveStart].encapsulation;if(d===tt.None||d===tt.Emulated)return null}return Hr(c,a)}(i,s.parent,a)}function Wc(i,s,a,c,d){i.insertBefore(s,a,c,d)}function oi(i,s,a){i.appendChild(s,a)}function J0(i,s,a,c,d){null!==c?Wc(i,s,a,c,d):oi(i,s,a)}function qp(i,s){return i.parentNode(s)}let Zp=function Ey(i,s,a){return 40&i.type?Hr(i,a):null};function Kc(i,s,a,c){const d=Y0(i,c,s),f=s[11],I=function Iy(i,s,a){return Zp(i,s,a)}(c.parent||s[6],c,s);if(null!=d)if(Array.isArray(a))for(let E=0;E<a.length;E++)J0(f,d,a[E],I,!1);else J0(f,d,a,I,!1)}function Wp(i,s){if(null!==s){const a=s.type;if(3&a)return Hr(s,i);if(4&a)return by(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return Wp(i,c);{const d=i[s.index];return Br(d)?by(-1,d):Rn(d)}}if(32&a)return $p(s,i)()||Rn(i[s.index]);{const c=eb(i,s);return null!==c?Array.isArray(c)?c[0]:Wp(rf(i[16]),c):Wp(i,s.next)}}return null}function eb(i,s){return null!==s?i[16][6].projection[s.projection]:null}function by(i,s){const a=10+i+1;if(a<s.length){const c=s[a],d=c[1].firstChild;if(null!==d)return Wp(c,d)}return s[7]}function X0(i,s,a,c,d,f,_){for(;null!=a;){const I=c[a.index],E=a.type;if(_&&0===s&&(I&&Rr(Rn(I),c),a.flags|=4),64!=(64&a.flags))if(8&E)X0(i,s,a.child,c,d,f,!1),_d(s,i,d,I,f);else if(32&E){const C=$p(a,c);let M;for(;M=C();)_d(s,i,d,M,f);_d(s,i,d,I,f)}else 16&E?ew(i,s,c,a,d,f):_d(s,i,d,I,f);a=_?a.projectionNext:a.next}}function Yp(i,s,a,c,d,f){X0(a,c,i.firstChild,s,d,f,!1)}function ew(i,s,a,c,d,f){const _=a[16],E=_[6].projection[c.projection];if(Array.isArray(E))for(let C=0;C<E.length;C++)_d(s,i,d,E[C],f);else X0(i,s,E,_[3],d,f,!0)}function nb(i,s,a){i.setAttribute(s,"style",a)}function tw(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function rb(i,s,a){let c=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const f=s.length;if(d+f===c||i.charCodeAt(d+f)<=32)return d}a=d+1}}const ib="ng-template";function wA(i,s,a){let c=0;for(;c<i.length;){let d=i[c++];if(a&&"class"===d){if(d=i[c],-1!==rb(d.toLowerCase(),s,0))return!0}else if(1===d){for(;c<i.length&&"string"==typeof(d=i[c++]);)if(d.toLowerCase()===s)return!0;return!1}}return!1}function ye(i){return 4===i.type&&i.value!==ib}function po(i,s,a){return s===(4!==i.type||a?i.value:ib)}function vd(i,s,a){let c=4;const d=i.attrs||[],f=function ob(i){for(let s=0;s<i.length;s++)if(ba(i[s]))return s;return i.length}(d);let _=!1;for(let I=0;I<s.length;I++){const E=s[I];if("number"!=typeof E){if(!_)if(4&c){if(c=2|1&c,""!==E&&!po(i,E,a)||""===E&&1===s.length){if(lt(c))return!1;_=!0}}else{const C=8&c?E:s[++I];if(8&c&&null!==i.attrs){if(!wA(i.attrs,C,a)){if(lt(c))return!1;_=!0}continue}const N=qu(8&c?"class":E,d,ye(i),a);if(-1===N){if(lt(c))return!1;_=!0;continue}if(""!==C){let G;G=N>f?"":d[N+1].toLowerCase();const ee=8&c?G:null;if(ee&&-1!==rb(ee,C,0)||2&c&&C!==G){if(lt(c))return!1;_=!0}}}}else{if(!_&&!lt(c)&&!lt(E))return!1;if(_&&lt(E))continue;_=!1,c=E|1&c}}return lt(c)||_}function lt(i){return 0==(1&i)}function qu(i,s,a,c){if(null===s)return-1;let d=0;if(c||!a){let f=!1;for(;d<s.length;){const _=s[d];if(_===i)return d;if(3===_||6===_)f=!0;else{if(1===_||2===_){let I=s[++d];for(;"string"==typeof I;)I=s[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=f?1:2}return-1}return function Pr(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function Ty(i,s,a=!1){for(let c=0;c<s.length;c++)if(vd(i,s[c],a))return!0;return!1}function sf(i,s){return i?":not("+s.trim()+")":s}function Cy(i){let s=i[0],a=1,c=2,d="",f=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&c){const I=i[++a];d+="["+_+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?d+="."+_:4&c&&(d+=" "+_);else""!==d&&!lt(_)&&(s+=sf(f,d),d=""),c=_,f=f||!lt(c);a++}return""!==d&&(s+=sf(f,d)),s}const kt={};function Sy(i){nw(Ft(),Ee(),Wn()+i,!1)}function nw(i,s,a,c){if(!c)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&Sh(s,f,a)}else{const f=i.preOrderHooks;null!==f&&Ah(s,f,0,a)}ei(a)}function Xp(i,s=null,a=null,c){const d=sw(i,s,a,c);return d.resolveInjectorInitializers(),d}function sw(i,s=null,a=null,c,d=new Set){const f=[a||Ot,Ym(i)];return c=c||("object"==typeof i?void 0:he(i)),new pd(f,s||Gc(),c||null,d)}let Yc=(()=>{class i{static create(a,c){if(Array.isArray(a))return Xp({name:""},c,a,"");{const d=a.name??"";return Xp({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=Us,i.NULL=new Hc,i.\u0275prov=Kt({token:i,providedIn:"any",factory:()=>mn(ii)}),i.__NG_ELEMENT_ID__=-1,i})();function Zu(i,s=ht.Default){const a=Ee();return null===a?mn(i,s):ro(dn(),a,K(i),s)}function By(){throw new Error("invalid")}function Ky(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const d=a[c],f=a[c+1];if(-1!==f){const _=i.data[f];wa(d),_.contentQueries(2,s[f],f)}}}function hf(i,s,a,c,d,f,_,I,E,C,M){const N=s.blueprint.slice();return N[0]=d,N[2]=76|c,(null!==M||i&&1024&i[2])&&(N[2]|=1024),us(N),N[3]=N[15]=i,N[8]=a,N[10]=_||i&&i[10],N[11]=I||i&&i[11],N[12]=E||i&&i[12]||null,N[9]=C||i&&i[9]||null,N[6]=f,N[20]=function cy(){return k0++}(),N[21]=M,N[16]=2==s.type?i[16]:N,N}function tl(i,s,a,c,d){let f=i.data[s];if(null===f)f=function ng(i,s,a,c,d){const f=pa(),_=ga(),E=i.data[s]=function xb(i,s,a,c,d,f){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,a,s,c,d);return null===i.firstChild&&(i.firstChild=E),null!==f&&(_?null==f.child&&null!==E.parent&&(f.child=E):null===f.next&&(f.next=E)),E}(i,s,a,c,d),function Dc(){return It.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=c,f.attrs=d;const _=function Rs(){const i=It.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return Xr(f,!0),f}function nl(i,s,a,c){if(0===a)return-1;const d=s.length;for(let f=0;f<a;f++)s.push(c),i.blueprint.push(c),i.data.push(null);return d}function Dd(i,s,a){_u(s);try{const c=i.viewQuery;null!==c&&Ai(1,c,a);const d=i.template;null!==d&&Aw(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Ky(i,s),i.staticViewQueries&&Ai(2,i.viewQuery,a);const f=i.components;null!==f&&function Cw(i,s){for(let a=0;a<s.length;a++)ug(i,s[a])}(s,f)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[2]&=-5,Bo()}}function ff(i,s,a,c){const d=s[2];if(128!=(128&d)){_u(s);try{us(s),function _a(i){return It.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Aw(i,s,a,2,c);const _=3==(3&d);if(_){const C=i.preOrderCheckHooks;null!==C&&Sh(s,C,null)}else{const C=i.preOrderHooks;null!==C&&Ah(s,C,0,null),Ia(s,0)}if(function Bw(i){for(let s=my(i);null!==s;s=yy(s)){if(!s[2])continue;const a=s[9];for(let c=0;c<a.length;c++){const d=a[c],f=d[3];0==(512&d[2])&&Oo(f,1),d[2]|=512}}}(s),function Ja(i){for(let s=my(i);null!==s;s=yy(s))for(let a=10;a<s.length;a++){const c=s[a],d=c[1];vi(c)&&ff(d,c,d.template,c[8])}}(s),null!==i.contentQueries&&Ky(i,s),_){const C=i.contentCheckHooks;null!==C&&Sh(s,C)}else{const C=i.contentHooks;null!==C&&Ah(s,C,1),Ia(s,1)}!function Ab(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)ei(~d);else{const f=d,_=a[++c],I=a[++c];$l(_,f),I(2,s[f])}}}finally{ei(-1)}}(i,s);const I=i.components;null!==I&&function Tw(i,s){for(let a=0;a<s.length;a++)Wu(i,s[a])}(s,I);const E=i.viewQuery;if(null!==E&&Ai(2,E,c),_){const C=i.viewCheckHooks;null!==C&&Sh(s,C)}else{const C=i.viewHooks;null!==C&&Ah(s,C,2),Ia(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,Oo(s[3],-1))}finally{Bo()}}}function Sw(i,s,a,c){const d=s[10],_=No(s);try{!_&&d.begin&&d.begin(),_&&Dd(i,s,c),ff(i,s,a,c)}finally{!_&&d.end&&d.end()}}function Aw(i,s,a,c,d){const f=Wn(),_=2&c;try{ei(-1),_&&s.length>22&&nw(i,s,22,!1),a(c,d)}finally{ei(f)}}function rg(i,s,a){!xs()||(function bd(i,s,a,c){const d=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||wr(a,s),Rr(c,s);const _=a.initialInputs;for(let I=d;I<f;I++){const E=i.data[I],C=jr(E);C&&Ob(s,a,E);const M=pt(s,i,I,a);Rr(M,s),null!==_&&og(0,I-d,M,E,0,_),C&&(cr(a.index,s)[8]=M)}}(i,s,a,Hr(a,s)),128==(128&a.flags)&&function Ow(i,s,a){const c=a.directiveStart,d=a.directiveEnd,f=a.index,_=function va(){return It.lFrame.currentDirectiveIndex}();try{ei(f);for(let I=c;I<d;I++){const E=i.data[I],C=s[I];Tc(I),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&e_(E,C)}}finally{ei(-1),Tc(_)}}(i,s,a))}function ig(i,s,a=Hr){const c=s.localNames;if(null!==c){let d=s.index+1;for(let f=0;f<c.length;f+=2){const _=c[f+1],I=-1===_?a(s,i):i[_];i[d++]=I}}}function xw(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Qy(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Qy(i,s,a,c,d,f,_,I,E,C){const M=22+c,N=M+d,G=function Yn(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:kt);return a}(M,N),ee="function"==typeof C?C():C;return G[1]={type:i,blueprint:G,template:a,queries:null,viewQuery:I,declTNode:s,data:G.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:N,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:E,consts:ee,incompleteFirstPass:!1}}function Rw(i,s,a,c){const d=o_(s);null===a?d.push(c):(d.push(a),i.firstCreatePass&&Gw(i).push(c,d.length-1))}function Pw(i,s,a){for(let c in i)if(i.hasOwnProperty(c)){const d=i[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(s,d):a[c]=[s,d]}return a}function kw(i,s){const c=s.directiveEnd,d=i.data,f=s.attrs,_=[];let I=null,E=null;for(let C=s.directiveStart;C<c;C++){const M=d[C],N=M.inputs,G=null===f||ye(s)?null:Uw(N,f);_.push(G),I=Pw(N,C,I),E=Pw(M.outputs,C,E)}null!==I&&(I.hasOwnProperty("class")&&(s.flags|=16),I.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=I,s.outputs=E}function Xy(i,s){const a=cr(s,i);16&a[2]||(a[2]|=32)}function sg(i,s,a,c){let d=!1;if(xs()){const f=function pf(i,s,a){const c=i.directiveRegistry;let d=null;if(c)for(let f=0;f<c.length;f++){const _=c[f];Ty(a,_.selectors,!1)&&(d||(d=[]),ti(wr(a,s),i,_.type),jr(_)?(Td(i,a),d.unshift(_)):d.push(_))}return d}(i,s,a),_=null===c?null:{"":-1};if(null!==f){d=!0,Lw(a,i.data.length,f.length);for(let M=0;M<f.length;M++){const N=f[M];N.providersResolver&&N.providersResolver(N)}let I=!1,E=!1,C=nl(i,s,f.length,null);for(let M=0;M<f.length;M++){const N=f[M];a.mergedAttrs=ks(a.mergedAttrs,N.hostAttrs),Fw(i,a,s,C,N),Nb(C,N,_),null!==N.contentQueries&&(a.flags|=8),(null!==N.hostBindings||null!==N.hostAttrs||0!==N.hostVars)&&(a.flags|=128);const G=N.type.prototype;!I&&(G.ngOnChanges||G.ngOnInit||G.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),I=!0),!E&&(G.ngOnChanges||G.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),E=!0),C++}kw(i,a)}_&&function ui(i,s,a){if(s){const c=i.localNames=[];for(let d=0;d<s.length;d+=2){const f=a[s[d+1]];if(null==f)throw new ve(-301,!1);c.push(s[d],f)}}}(a,c,_)}return a.mergedAttrs=ks(a.mergedAttrs,a.attrs),d}function Nw(i,s,a,c,d,f){const _=f.hostBindings;if(_){let I=i.hostBindingOpCodes;null===I&&(I=i.hostBindingOpCodes=[]);const E=~s.index;(function kb(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(I)!=E&&I.push(E),I.push(c,d,_)}}function e_(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Td(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function Nb(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;jr(s)&&(a[""]=i)}}function Lw(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function Fw(i,s,a,c,d){i.data[c]=d;const f=d.factory||(d.factory=_i(d.type)),_=new $o(f,jr(d),Zu);i.blueprint[c]=_,a[c]=_,Nw(i,s,0,c,nl(i,a,d.hostVars,kt),d)}function Ob(i,s,a){const c=Hr(s,i),d=xw(a),f=i[10],_=cg(i,hf(i,d,null,a.onPush?32:16,c,s,f,f.createRenderer(c,a),null,null,null));i[s.index]=_}function Jo(i,s,a,c,d,f){const _=Hr(i,s);!function t_(i,s,a,c,d,f,_){if(null==f)i.removeAttribute(s,d,a);else{const I=null==_?me(f):_(f,c||"",d);i.setAttribute(s,d,I,a)}}(s[11],_,f,i.value,a,c,d)}function og(i,s,a,c,d,f){const _=f[s];if(null!==_){const I=c.setInput;for(let E=0;E<_.length;){const C=_[E++],M=_[E++],N=_[E++];null!==I?c.setInput(a,N,C,M):a[M]=N}}}function Uw(i,s){let a=null,c=0;for(;c<s.length;){const d=s[c];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],s[c+1])),c+=2}else c+=2;else c+=4}return a}function ag(i,s,a,c){return new Array(i,!0,!1,s,null,0,c,a,null,null)}function Wu(i,s){const a=cr(s,i);if(vi(a)){const c=a[1];48&a[2]?ff(c,a,c.template,a[8]):a[5]>0&&n_(a)}}function n_(i){for(let c=my(i);null!==c;c=yy(c))for(let d=10;d<c.length;d++){const f=c[d];if(vi(f))if(512&f[2]){const _=f[1];ff(_,f,_.template,f[8])}else f[5]>0&&n_(f)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const d=cr(a[c],i);vi(d)&&d[5]>0&&n_(d)}}function ug(i,s){const a=cr(s,i),c=a[1];(function Lb(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(c,a),Dd(c,a,a[8])}function cg(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function r_(i){for(;i;){i[2]|=32;const s=rf(i);if(Eh(i)&&!s)return i;i=s}return null}function $w(i){!function jw(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],c=hy(a);if(null!==c){const d=c[1];Sw(d,c,d.template,a)}}}(i[8])}function Ai(i,s,a){wa(0),s(i,a)}const s_=(()=>Promise.resolve(null))();function o_(i){return i[7]||(i[7]=[])}function Gw(i){return i.cleanup||(i.cleanup=[])}function u_(i,s){const a=i[9],c=a?a.get(md,null):null;c&&c.handleError(s)}function c_(i,s,a,c,d){for(let f=0;f<a.length;){const _=a[f++],I=a[f++],E=s[_],C=i.data[_];null!==C.setInput?C.setInput(E,d,c,I):E[I]=d}}function Xa(i,s,a){const c=function Qs(i,s){return Rn(s[i])}(s,i);!function Z0(i,s,a){i.setValue(s,a)}(i[11],c,a)}function lg(i,s,a){let c=a?i.styles:null,d=a?i.classes:null,f=0;if(null!==s)for(let _=0;_<s.length;_++){const I=s[_];"number"==typeof I?f=I:1==f?d=pe(d,I):2==f&&(c=pe(c,I+": "+s[++_]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function ms(i,s,a,c,d=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&c.push(Rn(f)),Br(f))for(let I=10;I<f.length;I++){const E=f[I],C=E[1].firstChild;null!==C&&ms(E[1],E,C,c)}const _=a.type;if(8&_)ms(i,s,a.child,c);else if(32&_){const I=$p(a,s);let E;for(;E=I();)c.push(E)}else if(16&_){const I=eb(s,a);if(Array.isArray(I))c.push(...I);else{const E=rf(s[16]);ms(E[1],E,I,c,!0)}}a=d?a.projectionNext:a.next}return c}class rl{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return ms(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Br(s)){const a=s[8],c=a?a.indexOf(this):-1;c>-1&&(vy(s,c),so(a,c))}this._attachedToViewContainer=!1}K0(this._lView[1],this._lView)}onDestroy(s){Rw(this._lView[1],this._lView,null,s)}markForCheck(){r_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function i_(i,s,a){const c=s[10];c.begin&&c.begin();try{ff(i,s,i.template,a)}catch(d){throw u_(s,d),d}finally{c.end&&c.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ve(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function WD(i,s){Yp(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new ve(902,!1);this._appRef=s}}class Ub extends rl{constructor(s){super(s),this._view=s}detectChanges(){$w(this._view)}checkNoChanges(){}get context(){return null}}class l_ extends S{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Xe(s);return new Ku(a,this.ngModule)}}function d_(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class xi{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){const d=this.injector.get(s,Qo,c);return d!==Qo||a===Qo?d:this.parentInjector.get(s,a,c)}}class Ku extends Lp{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function ab(i){return i.map(Cy).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return d_(this.componentDef.inputs)}get outputs(){return d_(this.componentDef.outputs)}create(s,a,c,d){let f=(d=d||this.ngModule)instanceof Kn?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const _=f?new xi(s,f):s,I=_.get(yt,null);if(null===I)throw new ve(407,!1);const E=_.get(Zi,null),C=I.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",N=c?function Jy(i,s,a){return i.selectRootElement(s,a===tt.ShadowDom)}(C,c,this.componentDef.encapsulation):Gp(I.createRenderer(null,this.componentDef),M,function Vb(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(M)),G=this.componentDef.onPush?288:272,ee=function h_(i,s){return{components:[],scheduler:i||$D,clean:s_,playerHandler:s||null,flags:0}}(),we=Qy(0,null,null,1,0,null,null,null,null,null),Pe=hf(null,we,ee,G,null,null,I,C,E,_,null);let Ge,et;_u(Pe);try{const Et=function zw(i,s,a,c,d,f){const _=a[1];a[22]=i;const E=tl(_,22,2,"#host",null),C=E.mergedAttrs=s.hostAttrs;null!==C&&(lg(E,C,!0),null!==i&&(Da(d,i,C),null!==E.classes&&tw(d,i,E.classes),null!==E.styles&&nb(d,i,E.styles)));const M=c.createRenderer(i,s),N=hf(a,xw(s),null,s.onPush?32:16,a[22],E,c,M,f||null,null,null);return _.firstCreatePass&&(ti(wr(E,a),_,s.type),Td(_,E),Lw(E,a.length,1)),cg(a,N),a[22]=N}(N,this.componentDef,Pe,I,C);if(N)if(c)Da(C,N,["ng-version",Hu.full]);else{const{attrs:Me,classes:ft}=function ub(i){const s=[],a=[];let c=1,d=2;for(;c<i.length;){let f=i[c];if("string"==typeof f)2===d?""!==f&&s.push(f,i[++c]):8===d&&a.push(f);else{if(!lt(d))break;d=f}c++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Me&&Da(C,N,Me),ft&&ft.length>0&&tw(C,N,ft.join(" "))}if(et=fa(we,22),void 0!==a){const Me=et.projection=[];for(let ft=0;ft<this.ngContentSelectors.length;ft++){const Zt=a[ft];Me.push(null!=Zt?Array.from(Zt):null)}}Ge=function $b(i,s,a,c,d){const f=a[1],_=function Pb(i,s,a){const c=dn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Fw(i,c,s,nl(i,s,1,null),a),kw(i,c));const d=pt(s,i,c.directiveStart,c);Rr(d,s);const f=Hr(c,s);return f&&Rr(f,s),d}(f,a,s);if(c.components.push(_),i[8]=_,null!==d)for(const E of d)E(_,s);if(s.contentQueries){const E=dn();s.contentQueries(1,_,E.directiveStart)}const I=dn();return!f.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(ei(I.index),Nw(a[1],I,0,I.directiveStart,I.directiveEnd,s),e_(s,_)),_}(Et,this.componentDef,Pe,ee,[qw]),Dd(we,Pe,null)}finally{Bo()}return new jb(this.componentType,Ge,q(et,Pe),Pe,et)}}class jb extends class ty{}{constructor(s,a,c,d,f){super(),this.location=c,this._rootLView=d,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new Ub(d),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[s])){const f=this._rootLView;c_(f[1],f,d,s,a),Xy(f,this._tNode.index)}}get injector(){return new Ns(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function qw(){const i=dn();bu(Ee()[1],i)}let fg=null;function Yu(){if(!fg){const i=Ke.Symbol;if(i&&i.iterator)fg=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const c=s[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(fg=c)}}}return fg}function mf(i){return!!pg(i)&&(Array.isArray(i)||!(i instanceof Map)&&Yu()in i)}function pg(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function ci(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function f_(i,s,a,c){const d=Ee();return ci(d,Xs(),s)&&(Ft(),Jo(gn(),d,i,s,a,c)),f_}function gg(i,s,a,c,d,f,_,I){const E=Ee(),C=Ft(),M=i+22,N=C.firstCreatePass?function rI(i,s,a,c,d,f,_,I,E){const C=s.consts,M=tl(s,i,4,_||null,as(C,I));sg(s,a,M,as(C,E)),bu(s,M);const N=M.tViews=Qy(2,M,c,d,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,C);return null!==s.queries&&(s.queries.template(s,M),N.queries=s.queries.embeddedTView(M)),M}(M,C,E,s,a,c,d,f,_):C.data[M];Xr(N,!1);const G=E[11].createComment("");Kc(C,E,G,N),Rr(G,E),cg(E,E[M]=ag(G,E,G,N)),Ao(N)&&rg(C,E,N),null!=_&&ig(E,N,I)}function sI(i){return function ss(i,s){return i[s]}(function ya(){return It.lFrame.contextLView}(),22+i)}function m_(i,s,a){const c=Ee();return ci(c,Xs(),s)&&function gs(i,s,a,c,d,f,_,I){const E=Hr(s,a);let M,C=s.inputs;!I&&null!=C&&(M=C[c])?(c_(i,a,M,c,d),Ks(s)&&Xy(a,s.index)):3&s.type&&(c=function Mb(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=_?_(d,s.value||"",c):d,f.setProperty(E,c,d))}(Ft(),gn(),c,i,s,c[11],a,!1),m_}function y_(i,s,a,c,d){const _=d?"class":"style";c_(i,a,s.inputs[_],_,c)}function _f(i,s,a,c){const d=Ee(),f=Ft(),_=22+i,I=d[11],E=d[_]=Gp(I,s,function zl(){return It.lFrame.currentNamespace}()),C=f.firstCreatePass?function Yb(i,s,a,c,d,f,_){const I=s.consts,C=tl(s,i,2,d,as(I,f));return sg(s,a,C,as(I,_)),null!==C.attrs&&lg(C,C.attrs,!1),null!==C.mergedAttrs&&lg(C,C.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,C),C}(_,f,d,0,s,a,c):f.data[_];Xr(C,!0);const M=C.mergedAttrs;null!==M&&Da(I,E,M);const N=C.classes;null!==N&&tw(I,E,N);const G=C.styles;return null!==G&&nb(I,E,G),64!=(64&C.flags)&&Kc(f,d,E,C),0===function gu(){return It.lFrame.elementDepthCount}()&&Rr(E,d),function Ec(){It.lFrame.elementDepthCount++}(),Ao(C)&&(rg(f,d,C),function Yy(i,s,a){if(So(s)){const d=s.directiveEnd;for(let f=s.directiveStart;f<d;f++){const _=i.data[f];_.contentQueries&&_.contentQueries(1,a[f],f)}}}(f,C,d)),null!==c&&ig(d,C),_f}function mg(){let i=dn();ga()?function ma(){It.lFrame.isParent=!1}():(i=i.parent,Xr(i,!1));const s=i;!function Js(){It.lFrame.elementDepthCount--}();const a=Ft();return a.firstCreatePass&&(bu(a,i),So(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function rr(i){return 0!=(16&i.flags)}(s)&&y_(a,s,Ee(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Mh(i){return 0!=(32&i.flags)}(s)&&y_(a,s,Ee(),s.stylesWithoutHost,!1),mg}function __(i,s,a,c){return _f(i,s,a,c),mg(),__}function _g(){return Ee()}function vg(i){return!!i&&"function"==typeof i.then}function w_(i){return!!i&&"function"==typeof i.subscribe}const I_=w_;function uI(i,s,a,c){const d=Ee(),f=Ft(),_=dn();return function cI(i,s,a,c,d,f,_,I){const E=Ao(c),M=i.firstCreatePass&&Gw(i),N=s[8],G=o_(s);let ee=!0;if(3&c.type||I){const Ge=Hr(c,s),et=I?I(Ge):Ge,Et=G.length,Me=I?Zt=>I(Rn(Zt[c.index])):c.index;let ft=null;if(!I&&E&&(ft=function UA(i,s,a,c){const d=i.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const _=d[f];if(_===a&&d[f+1]===c){const I=s[7],E=d[f+2];return I.length>E?I[E]:null}"string"==typeof _&&(f+=2)}return null}(i,s,d,c.index)),null!==ft)(ft.__ngLastListenerFn__||ft).__ngNextListenerFn__=f,ft.__ngLastListenerFn__=f,ee=!1;else{f=dI(c,s,N,f,!1);const Zt=a.listen(et,d,f);G.push(f,Zt),M&&M.push(d,Me,Et,Et+1)}}else f=dI(c,s,N,f,!1);const we=c.outputs;let Pe;if(ee&&null!==we&&(Pe=we[d])){const Ge=Pe.length;if(Ge)for(let et=0;et<Ge;et+=2){const wn=s[Pe[et]][Pe[et+1]].subscribe(f),bl=G.length;G.push(f,wn),M&&M.push(d,c.index,bl,-(bl+1))}}}(f,d,d[11],_,i,s,0,c),uI}function lI(i,s,a,c){try{return!1!==a(c)}catch(d){return u_(i,d),!1}}function dI(i,s,a,c,d){return function f(_){if(_===Function)return c;r_(2&i.flags?cr(i.index,s):s);let E=lI(s,0,c,_),C=f.__ngNextListenerFn__;for(;C;)E=lI(s,0,C,_)&&E,C=C.__ngNextListenerFn__;return d&&!1===E&&(_.preventDefault(),_.returnValue=!1),E}}function M_(i,s=""){const a=Ee(),c=Ft(),d=i+22,f=c.firstCreatePass?tl(c,d,1,s,null):c.data[d],_=a[d]=function Hp(i,s){return i.createText(s)}(a[11],s);Kc(c,a,_,f),Xr(f,!1)}function bf(i,s,a){const c=Ee(),d=function Qu(i,s,a,c){return ci(i,Xs(),a)?s+me(a)+c:kt}(c,i,s,a);return d!==kt&&Xa(c,Wn(),d),bf}const ta=void 0;var j_=["en",[["a","p"],["AM","PM"],ta],[["AM","PM"],ta,ta],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ta,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ta,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ta,"{1} 'at' {0}",ta],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Sg(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Xu={};function Cf(i){const s=function H_(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=FI(s);if(a)return a;const c=s.split("-")[0];if(a=FI(c),a)return a;if("en"===c)return j_;throw new ve(701,!1)}function $_(i){return Cf(i)[vt.PluralCase]}function FI(i){return i in Xu||(Xu[i]=Ke.ng&&Ke.ng.common&&Ke.ng.common.locales&&Ke.ng.common.locales[i]),Xu[i]}var vt=(()=>((vt=vt||{})[vt.LocaleId=0]="LocaleId",vt[vt.DayPeriodsFormat=1]="DayPeriodsFormat",vt[vt.DayPeriodsStandalone=2]="DayPeriodsStandalone",vt[vt.DaysFormat=3]="DaysFormat",vt[vt.DaysStandalone=4]="DaysStandalone",vt[vt.MonthsFormat=5]="MonthsFormat",vt[vt.MonthsStandalone=6]="MonthsStandalone",vt[vt.Eras=7]="Eras",vt[vt.FirstDayOfWeek=8]="FirstDayOfWeek",vt[vt.WeekendRange=9]="WeekendRange",vt[vt.DateFormat=10]="DateFormat",vt[vt.TimeFormat=11]="TimeFormat",vt[vt.DateTimeFormat=12]="DateTimeFormat",vt[vt.NumberSymbols=13]="NumberSymbols",vt[vt.NumberFormats=14]="NumberFormats",vt[vt.CurrencyCode=15]="CurrencyCode",vt[vt.CurrencySymbol=16]="CurrencySymbol",vt[vt.CurrencyName=17]="CurrencyName",vt[vt.Currencies=18]="Currencies",vt[vt.Directionality=19]="Directionality",vt[vt.PluralCase=20]="PluralCase",vt[vt.ExtraData=21]="ExtraData",vt))();const ec="en-US";let Ag=ec;class yo{}class iE{}function OT(i,s){return new sE(i,s??null)}class sE extends yo{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new l_(this);const c=tr(s);this._bootstrapComponents=Ya(c.bootstrap),this._r3Injector=sw(s,a,[{provide:yo,useValue:this},{provide:S,useValue:this.componentFactoryResolver}],he(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Hg extends iE{constructor(s){super(),this.moduleType=s}create(s){return new sE(this.moduleType,s)}}class oE extends yo{constructor(s,a,c){super(),this.componentFactoryResolver=new l_(this),this.instance=null;const d=new pd([...s,{provide:yo,useValue:this},{provide:S,useValue:this.componentFactoryResolver}],a||Gc(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function Pf(i,s,a=null){return new oE(i,s,a).injector}function em(i){return s=>{setTimeout(i,void 0,s)}}const _o=class Xg extends g.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){let d=s,f=a||(()=>null),_=c;if(s&&"object"==typeof s){const E=s;d=E.next?.bind(E),f=E.error?.bind(E),_=E.complete?.bind(E)}this.__isAsync&&(f=em(f),d&&(d=em(d)),_&&(_=em(_)));const I=super.subscribe({next:d,error:f,complete:_});return s instanceof X.w0&&s.add(I),I}};function dl(){return this._results[Yu()]()}class tm{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Yu(),c=tm.prototype;c[a]||(c[a]=dl)}get changes(){return this._changes||(this._changes=new _o)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const d=xr(s);(this._changesDetected=!function ds(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],f=s[c];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Wd=(()=>{class i{}return i.__NG_ELEMENT_ID__=nm,i})();const _E=Wd,vE=class extends _E{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(s,a){const c=this._declarationTContainer.tViews,d=hf(this._declarationLView,c,s,16,null,c.declTNode,null,null,null,null,a||null);d[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(d[19]=_.createEmbeddedView(c)),Dd(c,d,s),new rl(d)}};function nm(){return fi(dn(),Ee())}function fi(i,s){return 4&i.type?new vE(s,i,q(i,s)):null}let Lf=(()=>{class i{}return i.__NG_ELEMENT_ID__=wE,i})();function wE(){return DE(dn(),Ee())}const Kd=Lf,IE=class extends Kd{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return q(this._hostTNode,this._hostLView)}get injector(){return new Ns(this._hostTNode,this._hostLView)}get parentInjector(){const s=ls(this._hostTNode,this._hostLView);if(Rh(s)){const a=lr(s,this._hostLView),c=Ta(s);return new Ns(a[1].data[c+8],a)}return new Ns(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=EE(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,c){let d,f;"number"==typeof c?d=c:null!=c&&(d=c.index,f=c.injector);const _=s.createEmbeddedView(a||{},f);return this.insert(_,d),_}createComponent(s,a,c,d,f){const _=s&&!function Hi(i){return"function"==typeof i}(s);let I;if(_)I=a;else{const N=a||{};I=N.index,c=N.injector,d=N.projectableNodes,f=N.environmentInjector||N.ngModuleRef}const E=_?s:new Ku(Xe(s)),C=c||this.parentInjector;if(!f&&null==E.ngModule){const G=(_?C:this.parentInjector).get(Kn,null);G&&(f=G)}const M=E.create(C,d,void 0,f);return this.insert(M.hostView,I),M}insert(s,a){const c=s._lView,d=c[1];if(function os(i){return Br(i[3])}(c)){const M=this.indexOf(s);if(-1!==M)this.detach(M);else{const N=c[3],G=new IE(N,N[6],N[3]);G.detach(G.indexOf(s))}}const f=this._adjustIndex(a),_=this._lContainer;!function YD(i,s,a,c){const d=10+c,f=a.length;c>0&&(a[d-1][4]=s),c<f-10?(s[4]=a[d],Au(a,10+c,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function mA(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const I=s[19];null!==I&&I.insertView(i),s[2]|=64}(d,c,_,f);const I=by(f,_),E=c[11],C=qp(E,_[7]);return null!==C&&function _y(i,s,a,c,d,f){c[0]=d,c[6]=s,Yp(i,c,a,1,d,f)}(d,_[6],E,c,C,I),s.attachToViewContainerRef(),Au(Ff(_),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=EE(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=vy(this._lContainer,a);c&&(so(Ff(this._lContainer),a),K0(c[1],c))}detach(s){const a=this._adjustIndex(s,-1),c=vy(this._lContainer,a);return c&&null!=so(Ff(this._lContainer),a)?new rl(c):null}_adjustIndex(s,a=0){return s??this.length+a}};function EE(i){return i[8]}function Ff(i){return i[8]||(i[8]=[])}function DE(i,s){let a;const c=s[i.index];if(Br(c))a=c;else{let d;if(8&i.type)d=Rn(c);else{const f=s[11];d=f.createComment("");const _=Hr(i,s);Wc(f,qp(f,_),d,function XD(i,s){return i.nextSibling(s)}(f,_),!1)}s[i.index]=a=ag(c,s,d,i),cg(s,a)}return new IE(a,i,s)}class Yd{constructor(s){this.queryList=s,this.matches=null}clone(){return new Yd(this.queryList)}setDirty(){this.queryList.setDirty()}}class _v{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let f=0;f<c;f++){const _=a.getByIndex(f);d.push(this.queries[_.indexInDeclarationView].clone())}return new _v(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Iv(s,a).matches&&this.queries[a].setDirty()}}class vv{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class yr{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,f=this.getByIndex(c).embeddedTView(s,d);f&&(f.indexInDeclarationView=c,null!==a?a.push(f):a=[f])}return null!==a?new yr(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class oc{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new oc(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const f=c[d];this.matchTNodeWithReadOption(s,a,ac(a,f)),this.matchTNodeWithReadOption(s,a,wi(a,s,f,!1,!1))}else c===Wd?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,wi(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===ue||d===Lf||d===Wd&&4&a.type)this.addMatch(a.index,-2);else{const f=wi(a,s,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function ac(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function qT(i,s,a,c){return-1===a?function wv(i,s){return 11&i.type?q(i,s):4&i.type?fi(i,s):null}(s,i):-2===a?function Ne(i,s,a){return a===ue?q(s,i):a===Wd?fi(s,i):a===Lf?DE(s,i):void 0}(i,s,c):pt(i,i[1],a,s)}function Qn(i,s,a,c){const d=s[19].queries[c];if(null===d.matches){const f=i.data,_=a.matches,I=[];for(let E=0;E<_.length;E+=2){const C=_[E];I.push(C<0?null:qT(s,f[C],_[E+1],a.metadata.read))}d.matches=I}return d.matches}function su(i,s,a,c){const d=i.queries.getByIndex(a),f=d.matches;if(null!==f){const _=Qn(i,s,d,a);for(let I=0;I<f.length;I+=2){const E=f[I];if(E>0)c.push(_[I/2]);else{const C=f[I+1],M=s[-E];for(let N=10;N<M.length;N++){const G=M[N];G[17]===G[3]&&su(G[1],G,C,c)}if(null!==M[9]){const N=M[9];for(let G=0;G<N.length;G++){const ee=N[G];su(ee[1],ee,C,c)}}}}}return c}function rm(i){const s=Ee(),a=Ft(),c=yu();wa(c+1);const d=Iv(a,c);if(i.dirty&&No(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const f=d.crossesNgTemplate?su(a,s,c,[]):Qn(a,s,d,c);i.reset(f,Le),i.notifyOnChanges()}return!0}return!1}function Ct(i,s,a,c){const d=Ft();if(d.firstCreatePass){const f=dn();(function Re(i,s,a){null===i.queries&&(i.queries=new yr),i.queries.track(new oc(s,a))})(d,new vv(s,a,c),f.index),function Lr(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function le(i,s,a){const c=new tm(4==(4&a));Rw(i,s,c,c.destroy),null===s[19]&&(s[19]=new _v),s[19].queries.push(new Yd(c))}(d,Ee(),a)}function TE(){return function We(i,s){return i[19].queries[s].queryList}(Ee(),yu())}function Iv(i,s){return i.queries.getByIndex(s)}function Ht(i){const s=Xe(i)||sn(i)||ln(i);return null!==s&&s.standalone}function Tn(...i){}const om=new jt("Application Initializer");let Gf=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Tn,this.reject=Tn,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(vg(f))a.push(f);else if(I_(f)){const _=new Promise((I,E)=>{f.subscribe({complete:I,error:E})});a.push(_)}}Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(mn(om,8))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const nh=new jt("AppId",{providedIn:"root",factory:function OE(){return`${ml()}${ml()}${ml()}`}});function ml(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const rh=new jt("Platform Initializer"),LE=new jt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),uu=new jt("appBootstrapListener");let na=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const vo=new jt("LocaleId",{providedIn:"root",factory:()=>Nu(vo,ht.Optional|ht.SkipSelf)||function zf(){return typeof $localize<"u"&&$localize.locale||ec}()}),FE=new jt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Cv{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Zf=(()=>{class i{compileModuleSync(a){return new Hg(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),f=Ya(tr(a).declarations).reduce((_,I)=>{const E=Xe(I);return E&&_.push(new Ku(E)),_},[]);return new Cv(c,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const BE=(()=>Promise.resolve(0))();function um(i){typeof Zone>"u"?BE.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Qi{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _o(!1),this.onMicrotaskEmpty=new _o(!1),this.onStable=new _o(!1),this.onError=new _o(!1),typeof Zone>"u")throw new ve(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Zr(){let i=Ke.requestAnimationFrame,s=Ke.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function yl(i){const s=()=>{!function jE(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Ke,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,xv(i),i.isCheckStableRunning=!0,Av(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),xv(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,f,_,I)=>{try{return ah(i),a.invokeTask(d,f,_,I)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),Wf(i)}},onInvoke:(a,c,d,f,_,I,E)=>{try{return ah(i),a.invoke(d,f,_,I,E)}finally{i.shouldCoalesceRunChangeDetection&&s(),Wf(i)}},onHasTask:(a,c,d,f)=>{a.hasTask(d,f),c===d&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,xv(i),Av(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,c,d,f)=>(a.handleError(d,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Qi.isInAngularZone())throw new ve(909,!1)}static assertNotInAngularZone(){if(Qi.isInAngularZone())throw new ve(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,d){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+d,s,vn,Tn,Tn);try{return f.runTask(_,a,c)}finally{f.cancelTask(_)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const vn={};function Av(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function xv(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function ah(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Wf(i){i._nesting--,Av(i)}class cm{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _o,this.onMicrotaskEmpty=new _o,this.onStable=new _o,this.onError=new _o}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,d){return s.apply(a,c)}}const Mv=new jt(""),Rv=new jt("");let Pv,Wr=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Pv||(function iC(i){Pv=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Qi.assertNotInAngularZone(),um(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())um(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(mn(Qi),mn($E),mn(Rv))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac}),i})(),$E=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return Pv?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),cu=null;const HE=new jt("AllowMultipleToken"),kv=new jt("PlatformDestroyListeners");class oC{constructor(s,a){this.name=s,this.token=a}}function vl(i,s,a=[]){const c=`Platform: ${s}`,d=new jt(c);return(f=[])=>{let _=Kf();if(!_||_.injector.get(HE,!1)){const I=[...a,...f,{provide:d,useValue:!0}];i?i(I):function GE(i){if(cu&&!cu.get(HE,!1))throw new ve(400,!1);cu=i;const s=i.get(wl);(function ra(i){const s=i.get(rh,null);s&&s.forEach(a=>a())})(i)}(function lm(i=[],s){return Yc.create({name:s,providers:[{provide:Yo,useValue:"platform"},{provide:kv,useValue:new Set([()=>cu=null])},...i]})}(I,c))}return function qE(i){const s=Kf();if(!s)throw new ve(401,!1);return s}()}}function Kf(){return cu?.get(wl)??null}let wl=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function dm(i,s){let a;return a="noop"===i?new cm:("zone.js"===i?void 0:i)||new Qi(s),a}(c?.ngZone,function Pi(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),f=[{provide:Qi,useValue:d}];return d.run(()=>{const _=Yc.create({providers:f,parent:this.injector,name:a.moduleType.name}),I=a.create(_),E=I.injector.get(md,null);if(!E)throw new ve(402,!1);return d.runOutsideAngular(()=>{const C=d.onError.subscribe({next:M=>{E.handleError(M)}});I.onDestroy(()=>{dh(this._modules,I),C.unsubscribe()})}),function ch(i,s,a){try{const c=a();return vg(c)?c.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(E,d,()=>{const C=I.injector.get(Gf);return C.runInitializers(),C.donePromise.then(()=>(function VI(i){$t(i,"Expected localeId to be defined"),"string"==typeof i&&(Ag=i.toLowerCase().replace(/_/g,"-"))}(I.injector.get(vo,ec)||ec),this._moduleDoBootstrap(I),I))})})}bootstrapModule(a,c=[]){const d=Nv({},c);return function sC(i,s,a){const c=new Hg(a);return Promise.resolve(c)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const c=a.injector.get(lh);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new ve(403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ve(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(kv,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(mn(Yc))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Nv(i,s){return Array.isArray(s)?s.reduce(Nv,i):{...i,...s}}let lh=(()=>{class i{constructor(a,c,d){this._zone=a,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new k.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),_=new k.y(I=>{let E;this._zone.runOutsideAngular(()=>{E=this._zone.onStable.subscribe(()=>{Qi.assertNotInAngularZone(),um(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const C=this._zone.onUnstable.subscribe(()=>{Qi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{E.unsubscribe(),C.unsubscribe()}});this.isStable=(0,ae.T)(f,_.pipe((0,ie.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const d=a instanceof Lp;if(!this._injector.get(Gf).done)throw!d&&Ht(a),new ve(405,false);let _;_=d?a:this._injector.get(S).resolveComponentFactory(a),this.componentTypes.push(_.componentType);const I=function uh(i){return i.isBoundToModule}(_)?void 0:this._injector.get(yo),C=_.create(Yc.NULL,[],c||_.selector,I),M=C.location.nativeElement,N=C.injector.get(Mv,null);return N?.registerApplication(M),C.onDestroy(()=>{this.detachView(C.hostView),dh(this.components,C),N?.unregisterApplication(M)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new ve(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;dh(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(uu,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>dh(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new ve(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(mn(Qi),mn(Kn),mn(md))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function dh(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let KE=!0,Lv=!1;function YE(){return Lv=!0,KE}function QE(){if(Lv)throw new Error("Cannot enable prod mode after platform setup.");KE=!1}let XE=(()=>{class i{}return i.__NG_ELEMENT_ID__=hh,i})();function hh(i){return function Il(i,s,a){if(Ks(i)&&!a){const c=cr(i.index,s);return new rl(c,c)}return 47&i.type?new rl(s[16],s):null}(dn(),Ee(),16==(16&i))}class El{constructor(){}supports(s){return mf(s)}create(s){return new mC(s)}}const Bv=(i,s)=>s;class mC{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||Bv}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,d=0,f=null;for(;a||c;){const _=!c||a&&a.currentIndex<$v(c,d,f)?a:c,I=$v(_,d,f),E=_.currentIndex;if(_===c)d--,c=c._nextRemoved;else if(a=a._next,null==_.previousIndex)d++;else{f||(f=[]);const C=I-d,M=E-d;if(C!=M){for(let G=0;G<C;G++){const ee=G<f.length?f[G]:f[G]=0,we=ee+G;M<=we&&we<C&&(f[G]=ee+1)}f[_.previousIndex]=M-C}}I!==E&&s(_,I,E)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!mf(s))throw new ve(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,f,_,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let I=0;I<this.length;I++)f=s[I],_=this._trackByFn(I,f),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,f,_,I)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,_,I),c=!0),a=a._next}else d=0,function Zb(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Yu()]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,I=>{_=this._trackByFn(d,I),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,I,_,d)),Object.is(a.item,I)||this._addIdentityChange(a,I)):(a=this._mismatch(a,I,_,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,d){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,d)):s=this._addAfter(new _r(a,c),f,d),s}_verifyReinsertion(s,a,c,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?s=this._reinsertAfter(f,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,f=s._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new jv),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new jv),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class _r{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Jt{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class jv{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new Jt,this.map.set(a,c)),c.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function $v(i,s,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+s+d}class hu{constructor(){}supports(s){return s instanceof Map||pg(s)}create(){return new yC}}class yC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||pg(s)))throw new ve(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const f=d._prev,_=d._next;return f&&(f._next=_),_&&(_._prev=f),d._next=null,d._prev=null,d}const c=new Ji(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class Ji{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Hv(){return new Dl([new El])}let Dl=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Hv()),deps:[[i,new Be,new re]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new ve(901,!1)}}return i.\u0275prov=Kt({token:i,providedIn:"root",factory:Hv}),i})();function Io(){return new pm([new hu])}let pm=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Io()),deps:[[i,new Be,new re]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new ve(901,!1)}}return i.\u0275prov=Kt({token:i,providedIn:"root",factory:Io}),i})();const wC=vl(null,"core",[]);let gm=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(mn(lh))},i.\u0275mod=Ue({type:i}),i.\u0275inj=Nt({}),i})();function ep(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(st,Te,O)=>{O.d(Te,{Z:()=>ve});var g=O(2090),X=O(4859),k=O(9681),ae=O(1877);class ie{constructor(me,fe){this._delegate=me,this.firebase=fe,(0,k._addComponent)(me,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=me.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(me){this._delegate.automaticDataCollectionEnabled=me}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(me=>{this._delegate.checkDestroyed(),me()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(me,fe=k._DEFAULT_ENTRY_NAME){var Ye;this._delegate.checkDestroyed();const rt=this._delegate.container.getProvider(me);return!rt.isInitialized()&&"EXPLICIT"===(null===(Ye=rt.getComponent())||void 0===Ye?void 0:Ye.instantiationMode)&&rt.initialize(),rt.getImmediate({identifier:fe})}_removeServiceInstance(me,fe=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(me).clearInstance(fe)}_addComponent(me){(0,k._addComponent)(this._delegate,me)}_addOrOverwriteComponent(me){(0,k._addOrOverwriteComponent)(this._delegate,me)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ce=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function pe(){const Je=function he(Je){const me={},fe={__esModule:!0,initializeApp:function Ce(je,V={}){const ge=k.initializeApp(je,V);if((0,g.r3)(me,ge.name))return me[ge.name];const W=new Je(ge,fe);return me[ge.name]=W,W},app:rt,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function Ie(je){const V=je.name,ge=V.replace("-compat","");if(k._registerComponent(je)&&"PUBLIC"===je.type){const W=(J=rt())=>{if("function"!=typeof J[ge])throw ce.create("invalid-app-argument",{appName:V});return J[ge]()};void 0!==je.serviceProps&&(0,g.ZB)(W,je.serviceProps),fe[ge]=W,Je.prototype[ge]=function(...J){return this._getService.bind(this,V).apply(this,je.multipleInstances?J:[])}}return"PUBLIC"===je.type?fe[ge]:null},removeApp:function Ye(je){delete me[je]},useAsService:function Ve(je,V){return"serverAuth"===V?null:V},modularAPIs:k}};function rt(je){if(!(0,g.r3)(me,je=je||k._DEFAULT_ENTRY_NAME))throw ce.create("no-app",{appName:je});return me[je]}return fe.default=fe,Object.defineProperty(fe,"apps",{get:function _e(){return Object.keys(me).map(je=>me[je])}}),rt.App=Je,fe}(ie);return Je.INTERNAL=Object.assign(Object.assign({},Je.INTERNAL),{createFirebaseNamespace:pe,extendNamespace:function me(fe){(0,g.ZB)(Je,fe)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),Je}(),j=new ae.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Je=self.firebase.SDK_VERSION;Je&&Je.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ve=B;!function Ae(Je){(0,k.registerVersion)("@firebase/app-compat","0.1.31",Je)}()},9681:(st,Te,O)=>{O.r(Te),O.d(Te,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>ki,_DEFAULT_ENTRY_NAME:()=>$t,_addComponent:()=>Wt,_addOrOverwriteComponent:()=>Kt,_apps:()=>tn,_clearComponents:()=>Eo,_components:()=>Cn,_getProvider:()=>Nt,_registerComponent:()=>br,_removeServiceInstance:()=>nn,deleteApp:()=>ht,getApp:()=>Qr,getApps:()=>Ni,initializeApp:()=>es,onLog:()=>Sn,registerVersion:()=>mi,setLogLevel:()=>Oi});var g=O(5861),X=O(4859),k=O(1877),ae=O(2090),ie=O(8766);class de{constructor(H){this.container=H}getPlatformInfoString(){return this.container.getProviders().map(z=>{if(function ce(F){return"VERSION"===F.getComponent()?.type}(z)){const be=z.getImmediate();return`${be.library}/${be.version}`}return null}).filter(z=>z).join(" ")}}const he="@firebase/app",B=new k.Yd("@firebase/app"),$t="[DEFAULT]",ze={[he]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},tn=new Map,Cn=new Map;function Wt(F,H){try{F.container.addComponent(H)}catch(z){B.debug(`Component ${H.name} failed to register with FirebaseApp ${F.name}`,z)}}function Kt(F,H){F.container.addOrOverwriteComponent(H)}function br(F){const H=F.name;if(Cn.has(H))return B.debug(`There were multiple attempts to register component ${H}.`),!1;Cn.set(H,F);for(const z of tn.values())Wt(z,F);return!0}function Nt(F,H){const z=F.container.getProvider("heartbeat").getImmediate({optional:!0});return z&&z.triggerHeartbeat(),F.container.getProvider(H)}function nn(F,H,z=$t){Nt(F,H).clearInstance(z)}function Eo(){Cn.clear()}const vr=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Tr{constructor(H,z,be){this._isDeleted=!1,this._options=Object.assign({},H),this._config=Object.assign({},z),this._name=z.name,this._automaticDataCollectionEnabled=z.automaticDataCollectionEnabled,this._container=be,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(H){this.checkDestroyed(),this._automaticDataCollectionEnabled=H}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(H){this._isDeleted=H}checkDestroyed(){if(this.isDeleted)throw vr.create("app-deleted",{appName:this._name})}}const ki="9.9.2";function es(F,H={}){"object"!=typeof H&&(H={name:H});const z=Object.assign({name:$t,automaticDataCollectionEnabled:!1},H),be=z.name;if("string"!=typeof be||!be)throw vr.create("bad-app-name",{appName:String(be)});const Ue=tn.get(be);if(Ue){if((0,ae.vZ)(F,Ue.options)&&(0,ae.vZ)(z,Ue.config))return Ue;throw vr.create("duplicate-app",{appName:be})}const ot=new X.H0(be);for(const Qt of Cn.values())ot.addComponent(Qt);const rn=new Tr(F,z,ot);return tn.set(be,rn),rn}function Qr(F=$t){const H=tn.get(F);if(!H)throw vr.create("no-app",{appName:F});return H}function Ni(){return Array.from(tn.values())}function ht(F){return on.apply(this,arguments)}function on(){return(on=(0,g.Z)(function*(F){const H=F.name;tn.has(H)&&(tn.delete(H),yield Promise.all(F.container.getProviders().map(z=>z.delete())),F.isDeleted=!0)})).apply(this,arguments)}function mi(F,H,z){var be;let Ue=null!==(be=ze[F])&&void 0!==be?be:F;z&&(Ue+=`-${z}`);const ot=Ue.match(/\s|\//),rn=H.match(/\s|\//);if(ot||rn){const Qt=[`Unable to register library "${Ue}" with version "${H}":`];return ot&&Qt.push(`library name "${Ue}" contains illegal characters (whitespace or "/")`),ot&&rn&&Qt.push("and"),rn&&Qt.push(`version name "${H}" contains illegal characters (whitespace or "/")`),void B.warn(Qt.join(" "))}br(new X.wA(`${Ue}-version`,()=>({library:Ue,version:H}),"VERSION"))}function Sn(F,H){if(null!==F&&"function"!=typeof F)throw vr.create("invalid-log-argument");(0,k.Am)(F,H)}function Oi(F){(0,k.Ub)(F)}const un="firebase-heartbeat-store";let Zs=null;function an(){return Zs||(Zs=(0,ie.X3)("firebase-heartbeat-database",1,{upgrade:(F,H)=>{0===H&&F.createObjectStore(un)}}).catch(F=>{throw vr.create("idb-open",{originalErrorMessage:F.message})})),Zs}function Ke(){return(Ke=(0,g.Z)(function*(F){var H;try{return(yield an()).transaction(un).objectStore(un).get(cn(F))}catch(z){if(z instanceof ae.ZR)B.warn(z.message);else{const be=vr.create("idb-get",{originalErrorMessage:null===(H=z)||void 0===H?void 0:H.message});B.warn(be.message)}}})).apply(this,arguments)}function Do(F,H){return er.apply(this,arguments)}function er(){return(er=(0,g.Z)(function*(F,H){var z;try{const Ue=(yield an()).transaction(un,"readwrite");return yield Ue.objectStore(un).put(H,cn(F)),Ue.done}catch(be){if(be instanceof ae.ZR)B.warn(be.message);else{const Ue=vr.create("idb-set",{originalErrorMessage:null===(z=be)||void 0===z?void 0:z.message});B.warn(Ue.message)}}})).apply(this,arguments)}function cn(F){return`${F.name}!${F.options.appId}`}class Is{constructor(H){this.container=H,this._heartbeatsCache=null;const z=this.container.getProvider("app").getImmediate();this._storage=new Vt(z),this._heartbeatsCachePromise=this._storage.read().then(be=>(this._heartbeatsCache=be,be))}triggerHeartbeat(){var H=this;return(0,g.Z)(function*(){const be=H.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ue=Yt();if(null===H._heartbeatsCache&&(H._heartbeatsCache=yield H._heartbeatsCachePromise),H._heartbeatsCache.lastSentHeartbeatDate!==Ue&&!H._heartbeatsCache.heartbeats.some(ot=>ot.date===Ue))return H._heartbeatsCache.heartbeats.push({date:Ue,agent:be}),H._heartbeatsCache.heartbeats=H._heartbeatsCache.heartbeats.filter(ot=>{const rn=new Date(ot.date).valueOf();return Date.now()-rn<=2592e6}),H._storage.overwrite(H._heartbeatsCache)})()}getHeartbeatsHeader(){var H=this;return(0,g.Z)(function*(){if(null===H._heartbeatsCache&&(yield H._heartbeatsCachePromise),null===H._heartbeatsCache||0===H._heartbeatsCache.heartbeats.length)return"";const z=Yt(),{heartbeatsToSend:be,unsentEntries:Ue}=function Li(F,H=1024){const z=[];let be=F.slice();for(const Ue of F){const ot=z.find(rn=>rn.agent===Ue.agent);if(ot){if(ot.dates.push(Ue.date),Z(z)>H){ot.dates.pop();break}}else if(z.push({agent:Ue.agent,dates:[Ue.date]}),Z(z)>H){z.pop();break}be=be.slice(1)}return{heartbeatsToSend:z,unsentEntries:be}}(H._heartbeatsCache.heartbeats),ot=(0,ae.L)(JSON.stringify({version:2,heartbeats:be}));return H._heartbeatsCache.lastSentHeartbeatDate=z,Ue.length>0?(H._heartbeatsCache.heartbeats=Ue,yield H._storage.overwrite(H._heartbeatsCache)):(H._heartbeatsCache.heartbeats=[],H._storage.overwrite(H._heartbeatsCache)),ot})()}}function Yt(){return(new Date).toISOString().substring(0,10)}class Vt{constructor(H){this.app=H,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var H=this;return(0,g.Z)(function*(){return(yield H._canUseIndexedDBPromise)&&(yield function tt(F){return Ke.apply(this,arguments)}(H.app))||{heartbeats:[]}})()}overwrite(H){var z=this;return(0,g.Z)(function*(){var be;if(yield z._canUseIndexedDBPromise){const ot=yield z.read();return Do(z.app,{lastSentHeartbeatDate:null!==(be=H.lastSentHeartbeatDate)&&void 0!==be?be:ot.lastSentHeartbeatDate,heartbeats:H.heartbeats})}})()}add(H){var z=this;return(0,g.Z)(function*(){var be;if(yield z._canUseIndexedDBPromise){const ot=yield z.read();return Do(z.app,{lastSentHeartbeatDate:null!==(be=H.lastSentHeartbeatDate)&&void 0!==be?be:ot.lastSentHeartbeatDate,heartbeats:[...ot.heartbeats,...H.heartbeats]})}})()}}function Z(F){return(0,ae.L)(JSON.stringify({version:2,heartbeats:F})).length}!function $(F){br(new X.wA("platform-logger",H=>new de(H),"PRIVATE")),br(new X.wA("heartbeat",H=>new Is(H),"PRIVATE")),mi(he,"0.7.30",F),mi(he,"0.7.30","esm2017"),mi("fire-js","")}("")},4859:(st,Te,O)=>{O.d(Te,{H0:()=>he,wA:()=>k});var g=O(5861),X=O(2090);class k{constructor(B,j,K){this.name=B,this.instanceFactory=j,this.type=K,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const ae="[DEFAULT]";class ie{constructor(B,j){this.name=B,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const j=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(j)){const K=new X.BH;if(this.instancesDeferred.set(j,K),this.isInitialized(j)||this.shouldAutoInitialize())try{const Fe=this.getOrInitializeService({instanceIdentifier:j});Fe&&K.resolve(Fe)}catch{}}return this.instancesDeferred.get(j).promise}getImmediate(B){var j;const K=this.normalizeInstanceIdentifier(B?.identifier),Fe=null!==(j=B?.optional)&&void 0!==j&&j;if(!this.isInitialized(K)&&!this.shouldAutoInitialize()){if(Fe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:K})}catch(Ae){if(Fe)return null;throw Ae}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function ce(pe){return"EAGER"===pe.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:ae})}catch{}for(const[j,K]of this.instancesDeferred.entries()){const Fe=this.normalizeInstanceIdentifier(j);try{const Ae=this.getOrInitializeService({instanceIdentifier:Fe});K.resolve(Ae)}catch{}}}}clearInstance(B=ae){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,g.Z)(function*(){const j=Array.from(B.instances.values());yield Promise.all([...j.filter(K=>"INTERNAL"in K).map(K=>K.INTERNAL.delete()),...j.filter(K=>"_delete"in K).map(K=>K._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=ae){return this.instances.has(B)}getOptions(B=ae){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:j={}}=B,K=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(K))throw Error(`${this.name}(${K}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Fe=this.getOrInitializeService({instanceIdentifier:K,options:j});for(const[Ae,ve]of this.instancesDeferred.entries())K===this.normalizeInstanceIdentifier(Ae)&&ve.resolve(Fe);return Fe}onInit(B,j){var K;const Fe=this.normalizeInstanceIdentifier(j),Ae=null!==(K=this.onInitCallbacks.get(Fe))&&void 0!==K?K:new Set;Ae.add(B),this.onInitCallbacks.set(Fe,Ae);const ve=this.instances.get(Fe);return ve&&B(ve,Fe),()=>{Ae.delete(B)}}invokeOnInitCallbacks(B,j){const K=this.onInitCallbacks.get(j);if(K)for(const Fe of K)try{Fe(B,j)}catch{}}getOrInitializeService({instanceIdentifier:B,options:j={}}){let K=this.instances.get(B);if(!K&&this.component&&(K=this.component.instanceFactory(this.container,{instanceIdentifier:(pe=B,pe===ae?void 0:pe),options:j}),this.instances.set(B,K),this.instancesOptions.set(B,j),this.invokeOnInitCallbacks(K,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,K)}catch{}var pe;return K||null}normalizeInstanceIdentifier(B=ae){return this.component?this.component.multipleInstances?B:ae:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const j=this.getProvider(B.name);if(j.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);j.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const j=new ie(B,this);return this.providers.set(B,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(st,Te,O)=>{O.d(Te,{Am:()=>pe,Ub:()=>he,Yd:()=>ce,in:()=>X});const g=[];var X=(()=>{return(B=X||(X={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",X;var B})();const k={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},ae=X.INFO,ie={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},de=(B,j,...K)=>{if(j<B.logLevel)return;const Fe=(new Date).toISOString(),Ae=ie[j];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Ae](`[${Fe}]  ${B.name}:`,...K)};class ce{constructor(j){this.name=j,this._logLevel=ae,this._logHandler=de,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in X))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?k[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...j),this._logHandler(this,X.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...j),this._logHandler(this,X.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,X.INFO,...j),this._logHandler(this,X.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,X.WARN,...j),this._logHandler(this,X.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...j),this._logHandler(this,X.ERROR,...j)}}function he(B){g.forEach(j=>{j.setLogLevel(B)})}function pe(B,j){for(const K of g){let Fe=null;j&&j.level&&(Fe=k[j.level]),K.userLogHandler=null===B?null:(Ae,ve,...Je)=>{const me=Je.map(fe=>{if(null==fe)return null;if("string"==typeof fe)return fe;if("number"==typeof fe||"boolean"==typeof fe)return fe.toString();if(fe instanceof Error)return fe.message;try{return JSON.stringify(fe)}catch{return null}}).filter(fe=>fe).join(" ");ve>=(Fe??Ae.logLevel)&&B({level:X[ve].toLowerCase(),message:me,args:Je,type:Ae.name})}}}},8766:(st,Te,O)=>{O.d(Te,{Lj:()=>Ce,X3:()=>rt});var g=O(5861);let k,ae;const ce=new WeakMap,he=new WeakMap,pe=new WeakMap,B=new WeakMap,j=new WeakMap;let Ae={get(V,ge,W){if(V instanceof IDBTransaction){if("done"===ge)return he.get(V);if("objectStoreNames"===ge)return V.objectStoreNames||pe.get(V);if("store"===ge)return W.objectStoreNames[1]?void 0:W.objectStore(W.objectStoreNames[0])}return fe(V[ge])},set:(V,ge,W)=>(V[ge]=W,!0),has:(V,ge)=>V instanceof IDBTransaction&&("done"===ge||"store"===ge)||ge in V};function me(V){return"function"==typeof V?function Je(V){return V!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function de(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(V)?function(...ge){return V.apply(Ye(this),ge),fe(ce.get(this))}:function(...ge){return fe(V.apply(Ye(this),ge))}:function(ge,...W){const J=V.call(Ye(this),ge,...W);return pe.set(J,ge.sort?ge.sort():[ge]),fe(J)}}(V):(V instanceof IDBTransaction&&function Fe(V){if(he.has(V))return;const ge=new Promise((W,J)=>{const se=()=>{V.removeEventListener("complete",ne),V.removeEventListener("error",Oe),V.removeEventListener("abort",Oe)},ne=()=>{W(),se()},Oe=()=>{J(V.error||new DOMException("AbortError","AbortError")),se()};V.addEventListener("complete",ne),V.addEventListener("error",Oe),V.addEventListener("abort",Oe)});he.set(V,ge)}(V),((V,ge)=>ge.some(W=>V instanceof W))(V,function ie(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(V,Ae):V)}function fe(V){if(V instanceof IDBRequest)return function K(V){const ge=new Promise((W,J)=>{const se=()=>{V.removeEventListener("success",ne),V.removeEventListener("error",Oe)},ne=()=>{W(fe(V.result)),se()},Oe=()=>{J(V.error),se()};V.addEventListener("success",ne),V.addEventListener("error",Oe)});return ge.then(W=>{W instanceof IDBCursor&&ce.set(W,V)}).catch(()=>{}),j.set(ge,V),ge}(V);if(B.has(V))return B.get(V);const ge=me(V);return ge!==V&&(B.set(V,ge),j.set(ge,V)),ge}const Ye=V=>j.get(V);function rt(V,ge,{blocked:W,upgrade:J,blocking:se,terminated:ne}={}){const Oe=indexedDB.open(V,ge),ke=fe(Oe);return J&&Oe.addEventListener("upgradeneeded",ut=>{J(fe(Oe.result),ut.oldVersion,ut.newVersion,fe(Oe.transaction))}),W&&Oe.addEventListener("blocked",()=>W()),ke.then(ut=>{ne&&ut.addEventListener("close",()=>ne()),se&&ut.addEventListener("versionchange",()=>se())}).catch(()=>{}),ke}function Ce(V,{blocked:ge}={}){const W=indexedDB.deleteDatabase(V);return ge&&W.addEventListener("blocked",()=>ge()),fe(W).then(()=>{})}const _e=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],Ve=new Map;function je(V,ge){if(!(V instanceof IDBDatabase)||ge in V||"string"!=typeof ge)return;if(Ve.get(ge))return Ve.get(ge);const W=ge.replace(/FromIndex$/,""),J=ge!==W,se=Ie.includes(W);if(!(W in(J?IDBIndex:IDBObjectStore).prototype)||!se&&!_e.includes(W))return;const ne=function(){var Oe=(0,g.Z)(function*(ke,...ut){const zt=this.transaction(ke,se?"readwrite":"readonly");let $t=zt.store;return J&&($t=$t.index(ut.shift())),(yield Promise.all([$t[W](...ut),se&&zt.done]))[0]});return function(ut){return Oe.apply(this,arguments)}}();return Ve.set(ge,ne),ne}!function ve(V){Ae=V(Ae)}(V=>({...V,get:(ge,W,J)=>je(ge,W)||V.get(ge,W,J),has:(ge,W)=>!!je(ge,W)||V.has(ge,W)}))},5861:(st,Te,O)=>{function g(k,ae,ie,de,ce,he,pe){try{var B=k[he](pe),j=B.value}catch(K){return void ie(K)}B.done?ae(j):Promise.resolve(j).then(de,ce)}function X(k){return function(){var ae=this,ie=arguments;return new Promise(function(de,ce){var he=k.apply(ae,ie);function pe(j){g(he,de,ce,pe,B,"next",j)}function B(j){g(he,de,ce,pe,B,"throw",j)}pe(void 0)})}}O.d(Te,{Z:()=>X})}},st=>{st(st.s=7994)}]);